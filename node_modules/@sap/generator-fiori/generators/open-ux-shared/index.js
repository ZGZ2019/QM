"use strict";exports.id=784,exports.ids=[784],exports.modules={10702:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AbapServiceProvider=void 0;const o=r(31726),i=r(63499),s=r(17272),a=r(49882),c=r(15995),l=r(33999),u=r(5903),d=r(12978),p=r(86812);class AbapServiceProvider extends o.ServiceProvider{user(){var e;return Promise.resolve(null===(e=this.defaults.auth)||void 0===e?void 0:e.username)}setAtoInfo(e){this.atoSettings=e}getAtoInfo(){return n(this,void 0,void 0,(function*(){if(this.atoSettings)return this.atoSettings;let e;try{e=yield this.getAdtService(p.AtoService),this.atoSettings=e?yield e.getAtoInfo():{}}catch(e){this.atoSettings={}}return this.atoSettings}))}set publicUrl(e){this._publicUrl=e}get publicUrl(){return this._publicUrl||this.defaults.baseURL}isS4Cloud(){return n(this,void 0,void 0,(function*(){if(void 0===this.s4Cloud)try{const e=yield this.getAtoInfo();this.s4Cloud=e.tenantType===d.TenantType.Customer&&"C"===e.operationsType&&!0===e.isExtensibilityDevelopmentSystem&&""!==e.developmentPrefix&&""!==e.developmentPackage}catch(e){this.log.warn("Failed to detect whether this is an SAP S/4HANA Cloud system or not."),this.s4Cloud=!1}return this.s4Cloud}))}getAdtCatalogService(){if(!this.services[u.AdtCatalogService.ADT_DISCOVERY_SERVICE_PATH]){const e=this.createService(u.AdtCatalogService.ADT_DISCOVERY_SERVICE_PATH,u.AdtCatalogService);this.services[u.AdtCatalogService.ADT_DISCOVERY_SERVICE_PATH]=e}return this.services[u.AdtCatalogService.ADT_DISCOVERY_SERVICE_PATH]}catalog(e){var t,r;let n;if(e===c.ODataVersion.v2)n=null!==(t=this.services[i.V2CatalogService.PATH])&&void 0!==t?t:this.createService(i.V2CatalogService.PATH,i.V2CatalogService);else{if(e!==c.ODataVersion.v4)throw new Error("not implemented yet");n=null!==(r=this.services[i.V4CatalogService.PATH])&&void 0!==r?r:this.createService(i.V4CatalogService.PATH,i.V4CatalogService)}return Object.defineProperty(n,"isS4Cloud",{get:this.isS4Cloud.bind(this)}),n}getUi5AbapRepository(e){const t=null!=e?e:s.Ui5AbapRepositoryService.PATH;return this.services[t]||(this.services[t]=this.createService(t,s.Ui5AbapRepositoryService)),this.services[t]}getAppIndex(){return this.services[a.AppIndexService.PATH]||(this.services[a.AppIndexService.PATH]=this.createService(a.AppIndexService.PATH,a.AppIndexService)),this.services[a.AppIndexService.PATH]}getLayeredRepository(){return this.services[l.LayeredRepositoryService.PATH]||(this.services[l.LayeredRepositoryService.PATH]=this.createService(l.LayeredRepositoryService.PATH,l.LayeredRepositoryService)),this.services[l.LayeredRepositoryService.PATH]}getAdtService(e){return n(this,void 0,void 0,(function*(){const t=e.name;if(!this.services[t]){const r=this.getAdtCatalogService(),n=yield r.getServiceDefinition(e.getAdtCatagory());if(!n)return null;this.services[t]=this.createService(n.href,e),this.services[t].attachAdtSchema(n)}return this.services[t]}))}}t.AbapServiceProvider=AbapServiceProvider},5903:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AdtCatalogService=void 0;const o=r(94486),i=r(23615),s=r(88295);class AdtCatalogService extends o.Axios{constructor(){super(...arguments),this.schemaStore=new i.AdtSchemaStore}getServiceDefinition(e){return n(this,void 0,void 0,(function*(){yield this.checkOrLoadAdtDiscoverySchema();const t=this.schemaStore.getAdtCollection(e);return this.validateServiceSchema(e,t)?t:(this.log.warn("Invalid Discovery Schema"),null)}))}validateServiceSchema(e,t){return t?!!t.href||(this.log.warn(`Empty href in schema: ${e.term} - ${e.scheme}`),!1):(this.log.warn(`Schema Not Found: ${e.term} - ${e.scheme}`),!1)}checkOrLoadAdtDiscoverySchema(){return n(this,void 0,void 0,(function*(){if(!this.schemaStore.isAdtSchemaEmpty())return;const e=yield this.get("",{headers:{Accept:"application/*"}}),t=this.parseAdtSchemaData(e.data);this.schemaStore.updateSchemaData(t)}))}parseAdtSchemaData(e){if(!0!==s.XMLValidator.validate(e))return null;const t=new s.XMLParser({attributeNamePrefix:"",ignoreAttributes:!1,ignoreNameSpace:!0,parseAttributeValue:!0,removeNSPrefix:!0}).parse(e,!0);return t.service?t:null}}t.AdtCatalogService=AdtCatalogService,AdtCatalogService.ADT_DISCOVERY_SERVICE_PATH="/sap/bc/adt/discovery"},23615:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdtSchemaStore=void 0;t.AdtSchemaStore=class AdtSchemaStore{getAdtCollection(e){if(!this.adtSchema)return null;const t=this.serializeAdtCategory(e);return this.adtSchema[t]}updateSchemaData(e){if(e){this.adtSchema={};const t=e.service.workspace;for(const e of t){const t=e.collection;if(t)if(Array.isArray(t))t.forEach((t=>{t.workspaceTitle=e.title;const r=this.serializeAdtCategory(t.category);this.adtSchema[r]=t}));else{const e=t,r=this.serializeAdtCategory(e.category);this.adtSchema[r]=t}}}}isAdtSchemaEmpty(){return!this.adtSchema}serializeAdtCategory(e){return`${e.scheme},${e.term}`}}},95969:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(5903),t),o(r(86812),t)},64757:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdtService=void 0;const n=r(94486);class AdtService extends n.Axios{static getAdtCatagory(){throw new Error("NEEDS TO BE IMPLEMENTED BY AdtService SUBCLASSES")}attachAdtSchema(e){this.serviceSchema=e}}t.AdtService=AdtService},62706:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AtoService=void 0;const o=r(64757),i=r(88295);class AtoService extends o.AdtService{static getAdtCatagory(){return AtoService.adtCategory}getAtoInfo(){return n(this,void 0,void 0,(function*(){const e=yield this.get("",{headers:{Accept:"application/*"}});return this.parseAtoResponse(e.data)}))}parseAtoResponse(e){if(!0!==i.XMLValidator.validate(e))return this.log.warn(`Invalid XML: ${e}`),{};const t=new i.XMLParser({attributeNamePrefix:"",ignoreAttributes:!1,ignoreNameSpace:!0,parseAttributeValue:!0,removeNSPrefix:!0}).parse(e,!0);return t.settings?t.settings:{}}}t.AtoService=AtoService,AtoService.adtCategory={scheme:"http://www.sap.com/adt/categories/ato",term:"settings"}},80223:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FileStoreService=void 0;const o=r(64757),i=r(88295);class FileStoreService extends o.AdtService{static getAdtCatagory(){return FileStoreService.adtCategory}getAppArchiveContent(e,t,r=""){return n(this,void 0,void 0,(function*(){const n={headers:{Accept:"application/xml","Content-Type":"folder"===e?"application/atom+xml":"application/octet-stream"}};if(r&&!r.startsWith("/"))throw new Error('Input argument "path" needs to start with /');const o=encodeURIComponent(`${t}${r}`),i=yield this.get(`/${o}/content`,n);return this.parseArchiveContentResponse(t,i.data,e)}))}parseArchiveContentResponse(e,t,r){if("file"===r)return t;if(!0!==i.XMLValidator.validate(t))throw new Error("Invalid XML content");const n=new i.XMLParser({attributeNamePrefix:"",ignoreAttributes:!1,ignoreNameSpace:!0,parseAttributeValue:!0,removeNSPrefix:!0}).parse(t,!0);let o=[];return(null==n?void 0:n.feed)&&(o=Array.isArray(n.feed.entry)?n.feed.entry:[n.feed.entry]),o.map((t=>({basename:t.title.split("/").pop(),path:t.title.substring(e.length),type:t.category.term})))}}t.FileStoreService=FileStoreService,FileStoreService.adtCategory={scheme:"http://www.sap.com/adt/categories/filestore",term:"filestore-ui5-bsp"}},86812:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileStoreService=t.ListPackageService=t.TransportRequestService=t.TransportChecksService=t.AtoService=t.AdtService=void 0;var n=r(64757);Object.defineProperty(t,"AdtService",{enumerable:!0,get:function(){return n.AdtService}});var o=r(62706);Object.defineProperty(t,"AtoService",{enumerable:!0,get:function(){return o.AtoService}});var i=r(50282);Object.defineProperty(t,"TransportChecksService",{enumerable:!0,get:function(){return i.TransportChecksService}});var s=r(60260);Object.defineProperty(t,"TransportRequestService",{enumerable:!0,get:function(){return s.TransportRequestService}});var a=r(58287);Object.defineProperty(t,"ListPackageService",{enumerable:!0,get:function(){return a.ListPackageService}});var c=r(80223);Object.defineProperty(t,"FileStoreService",{enumerable:!0,get:function(){return c.FileStoreService}})},58287:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ListPackageService=void 0;const o=r(64757),i=r(88295);class ListPackageService extends o.AdtService{static getAdtCatagory(){return ListPackageService.adtCategory}listPackages(e){return n(this,void 0,void 0,(function*(){const{maxResults:t=50,phrase:r=""}=e,n={headers:{Accept:"application/xml"},params:{operation:"quickSearch",query:`${r}*`,useSearchProvider:"X",maxResults:t,objectType:"DEVC/K"}},o=yield this.get("",n);return this.parsePackageListResponse(o.data)}))}parsePackageListResponse(e){var t;if(!0!==i.XMLValidator.validate(e))return this.log.warn(`Invalid XML: ${e}`),[];const r=new i.XMLParser({attributeNamePrefix:"",ignoreAttributes:!1,ignoreNameSpace:!0,parseAttributeValue:!0,removeNSPrefix:!0}).parse(e,!0);let n=[];return(null===(t=null==r?void 0:r.objectReferences)||void 0===t?void 0:t.objectReference)&&(n=Array.isArray(r.objectReferences.objectReference)?r.objectReferences.objectReference:[r.objectReferences.objectReference]),n.map((e=>e.name))}}t.ListPackageService=ListPackageService,ListPackageService.adtCategory={scheme:"http://www.sap.com/adt/categories/respository",term:"search"}},50282:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TransportChecksService=void 0;const a=r(64757),c=r(12978),l=r(88295),u=i(r(96553)),d=r(71667);class TransportChecksService extends a.AdtService{static getAdtCatagory(){return TransportChecksService.adtCategory}getTransportRequests(e,t){return s(this,void 0,void 0,(function*(){const r=`\n                <?xml version="1.0" encoding="UTF-8"?>\n                <asx:abap xmlns:asx="http://www.sap.com/abapxml" version="1.0">\n                    <asx:values>\n                        <DATA>\n                        <PGMID/>\n                        <OBJECT/>\n                        <OBJECTNAME/>\n                        <DEVCLASS>${e}</DEVCLASS>\n                        <SUPER_PACKAGE/>\n                        <OPERATION>I</OPERATION>\n                        <URI>/sap/bc/adt/filestore/ui5-bsp/objects/${encodeURIComponent(t)}/$create</URI>\n                        </DATA>\n                    </asx:values>\n                </asx:abap>\n            `,n=yield this.post("",r,{headers:{Accept:"application/vnd.sap.as+xml; dataname=com.sap.adt.transport.service.checkData","content-type":"application/vnd.sap.as+xml; charset=UTF-8; dataname=com.sap.adt.transport.service.checkData"}});return this.getTransportRequestList(n.data)}))}getTransportRequestList(e){var t;if(!0!==l.XMLValidator.validate(e))return this.log.warn(`Invalid XML: ${e}`),[];const r=(new d.DOMParser).parseFromString(e);return"S"===(null===(t=u.select1("//RESULT/text()",r))||void 0===t?void 0:t.toString())?this.getTransportList(r):(this.log.warn(`Error or unkown response content: ${e}`),[])}getTransportList(e){var t,r,n;const o=null===(t=u.select1("//RECORDING/text()",e))||void 0===t?void 0:t.toString(),i=null===(r=u.select1("//LOCKS",e))||void 0===r?void 0:r.textContent,s=null===(n=u.select1("//DLVUNIT/text()",e))||void 0===n?void 0:n.toString();if(o&&!i)return this.getTransportListForNewProject(e);if(i)return this.getLockedTransport(e);throw c.LocalPackageText.includes(s)?new Error(TransportChecksService.LocalPackageError):new Error("Unable to parse ADT response")}getTransportListForNewProject(e){const t=u.select("//REQ_HEADER",e),r=[];if(t&&t.length>0)for(const e of t){const t=this.convertTransportRequest(e);t&&r.push(t)}return r}getLockedTransport(e){const t=u.select1("//LOCKS//REQ_HEADER",e),r=this.convertTransportRequest(t);return r?[r]:[]}convertTransportRequest(e){var t,r,n,o,i;if(!e)return;const s=null===(t=u.select1("TRKORR/text()",e))||void 0===t?void 0:t.toString();return s?{transportNumber:s,user:null===(r=u.select1("AS4USER/text()",e))||void 0===r?void 0:r.toString(),description:null===(n=u.select1("AS4TEXT/text()",e))||void 0===n?void 0:n.toString(),client:null===(o=u.select1("CLIENT/text()",e))||void 0===o?void 0:o.toString(),targetSystem:null===(i=u.select1("TARSYSTEM/text()",e))||void 0===i?void 0:i.toString()}:void 0}}t.TransportChecksService=TransportChecksService,TransportChecksService.adtCategory={scheme:"http://www.sap.com/adt/categories/cts",term:"transportchecks"},TransportChecksService.LocalPackageError="LocalPackageError"},60260:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TransportRequestService=void 0;const o=r(64757);class TransportRequestService extends o.AdtService{static getAdtCatagory(){return TransportRequestService.adtCategory}createTransportRequest(e){return n(this,void 0,void 0,(function*(){const t=`\n                <?xml version="1.0" encoding="UTF-8"?>\n                <asx:abap xmlns:asx="http://www.sap.com/abapxml" version="1.0">\n                    <asx:values>\n                        <DATA>\n                            <OPERATION>I</OPERATION>\n                            <DEVCLASS>${e.packageName}</DEVCLASS>\n                            <REQUEST_TEXT>${e.description}</REQUEST_TEXT>\n                            <REF>/sap/bc/adt/filestore/ui5-bsp/objects/${e.ui5AppName}/$create</REF>\n                        </DATA>\n                    </asx:values>\n                </asx:abap>\n            `,r=yield this.post("",t,{headers:{Accept:"text/plain","content-type":"application/vnd.sap.as+xml; charset=UTF-8; dataname=com.sap.adt.CreateCorrectionRequest"}});return this.getTransportNumberFromResponse(r.data)}))}getTransportNumberFromResponse(e){const t="/com.sap.cts/object_record/";if(e&&e.startsWith(t)){return e.replace(t,"")}return null}}t.TransportRequestService=TransportRequestService,TransportRequestService.adtCategory={scheme:"http://www.sap.com/adt/categories/cts",term:"transports"}},49882:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AppIndexService=void 0;const o=r(94486);class AppIndexService extends o.Axios{search(e={},t){return n(this,void 0,void 0,(function*(){const r=Object.assign({},e);t&&(r.fields=t.join(","));const n=yield this.get("/",{params:r});return JSON.parse(n.data).results}))}}t.AppIndexService=AppIndexService,AppIndexService.PATH="/sap/bc/ui2/app_index"},76884:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogService=void 0;const o=r(15995);class CatalogService extends o.ODataService{listServices(){return n(this,void 0,void 0,(function*(){return this.services||(this.services=yield this.fetchServices()),this.services}))}}t.CatalogService=CatalogService},63499:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(76884),t),o(r(67912),t),o(r(43817),t)},67912:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.V2CatalogService=void 0;const o=r(76884),i=r(15995),s=r(25298),a="ServiceCollection",c="RecommendedServiceCollection";class V2CatalogService extends o.CatalogService{determineEntitySet(){return n(this,void 0,void 0,(function*(){const e=yield this.document();this.entitySet=e.EntitySets.includes(c)?c:a}))}mapServices(e){return e.map((e=>({id:e.ID,name:e.TechnicalServiceName,path:new URL(e.ServiceUrl).pathname,serviceVersion:e.TechnicalServiceVersion+"",odataVersion:i.ODataVersion.v2})))}fetchServices(){return n(this,void 0,void 0,(function*(){const e={$format:"json"};this.entitySet||(yield this.determineEntitySet()),this.entitySet===a&&(yield this.isS4Cloud)&&(e.$filter="((IsSapService%20eq%20true)and(ReleaseStatus%20eq%20%27RELEASED%27))or((IsSapService%20eq%20false))");const t=(yield this.get(`/${this.entitySet}`,{params:e})).odata();if(s.ODataRequestError.containsError(t))throw new s.ODataRequestError(t);return this.mapServices(t)}))}findService({title:e,path:t}){return n(this,void 0,void 0,(function*(){let r=1;if(!e){const n=t.replace(/\/$/,"").split("/").pop().split(";");if(!(e=n[0].toUpperCase()))throw new Error(`Cannot determine service title from path: ${t}`);n.slice(1).forEach((e=>{const[t,n]=e.split("=");"v"===t&&(r=parseInt(n,10))}))}const n={$format:"json",$filter:`Title eq '${e}' and TechnicalServiceVersion eq ${r}`},o=(yield this.get(`/${this.entitySet}`,{params:n})).odata();if(o.length>1){const r=o.filter((r=>{var n;return null===(n=r.ServiceUrl)||void 0===n?void 0:n.toUpperCase().includes((t||e).toUpperCase())}));if(r.length>1)this.log.warn("Service filter was not sufficient to identify one service.");else if(r.length>0)return this.log.info(`Service filter chose service: ${r[0].TechnicalServiceName}`),r[0]}return o.length>0?o[0]:void 0}))}getServiceAnnotations({id:e,title:t,path:r}){return n(this,void 0,void 0,(function*(){if(this.entitySet||(yield this.determineEntitySet()),!e){const n=yield this.findService({title:t,path:r});n&&(e=n.ID)}if(e){return(yield this.get(`/${this.entitySet}('${encodeURIComponent(e)}')/Annotations`,{params:{$format:"json"}})).odata()}return[]}))}getAnnotations({id:e,title:t,path:r}){return n(this,void 0,void 0,(function*(){if(!e&&!t&&!r)throw new Error("No filter parameters passed in");const n=yield this.getServiceAnnotations({id:e,title:t,path:r}),o=[];for(const e of n){const t=`/Annotations(TechnicalName='${encodeURIComponent(e.TechnicalName)}',Version='${e.Version}')/$value/`,r=yield this.get(t,{headers:{Accept:"application/xml"}});r.data?o.push({TechnicalName:e.TechnicalName,Version:e.Version,Definitions:r.data,Uri:this.defaults.baseURL+t}):this.log.warn(`No annotations found for TechnicalName=${e.TechnicalName}, Version=${e.Version}`)}return o}))}}t.V2CatalogService=V2CatalogService,V2CatalogService.PATH="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2"},43817:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.V4CatalogService=void 0;const o=r(76884),i=r(15995),s=r(25298);class V4CatalogService extends o.CatalogService{mapServices(e,t){const r=[];return e.filter((e=>{var r,n;return(null===(n=null===(r=null==e?void 0:e.DefaultSystem)||void 0===r?void 0:r[t])||void 0===n?void 0:n.length)>0})).forEach((e=>{r.push(...e.DefaultSystem[t].map((t=>({id:t.ServiceId,group:e.GroupId,path:t.ServiceUrl.split("?").shift(),name:`${e.GroupId} > ${t.ServiceAlias||t.ServiceId}`,serviceVersion:t.ServiceVersion,odataVersion:i.ODataVersion.v4}))))})),r}fetchServices(){const e=Object.create(null,{get:{get:()=>super.get}});return n(this,void 0,void 0,(function*(){if(void 0===this.entitySet){const e=yield this.metadata();this.entitySet=e.includes('Name="RecommendedServices"')?"RecommendedServices":"Services"}const t={$count:!0,$expand:`DefaultSystem($expand=${this.entitySet})`};let r=yield this.get("/ServiceGroups",{params:t});const n=r.odata()||[];for(;r.data["@odata.nextLink"];){const o=new URL(r.data["@odata.nextLink"]);r=yield e.get.call(this,"/ServiceGroups",{params:Object.assign(Object.assign({},t),o.searchParams)}),n.push(...r.odata())}if(s.ODataRequestError.containsError(n))throw new s.ODataRequestError(n);return this.mapServices(n,this.entitySet)}))}getAnnotations(){return Promise.resolve([])}}t.V4CatalogService=V4CatalogService,V4CatalogService.PATH="/sap/opu/odata4/iwfnd/config/default/iwfnd/catalog/0002"},75082:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.TenantType=t.AppIndexService=t.AbapServiceProvider=t.LayeredRepositoryService=t.Ui5AbapRepositoryService=void 0;var i=r(17272);Object.defineProperty(t,"Ui5AbapRepositoryService",{enumerable:!0,get:function(){return i.Ui5AbapRepositoryService}});var s=r(33999);Object.defineProperty(t,"LayeredRepositoryService",{enumerable:!0,get:function(){return s.LayeredRepositoryService}});var a=r(10702);Object.defineProperty(t,"AbapServiceProvider",{enumerable:!0,get:function(){return a.AbapServiceProvider}});var c=r(49882);Object.defineProperty(t,"AppIndexService",{enumerable:!0,get:function(){return c.AppIndexService}}),o(r(42538),t),o(r(63499),t),o(r(95969),t);var l=r(12978);Object.defineProperty(t,"TenantType",{enumerable:!0,get:function(){return l.TenantType}})},33999:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LayeredRepositoryService=void 0;const o=r(94486),i=r(27715),s=r(57147),a=r(25298);function c(e){return"string"!=typeof e?`apps/${e.reference}/appVariants/${e.id}/`:e}const l="/dta_folder/";class LayeredRepositoryService extends o.Axios{mergeAppDescriptorVariant(e){return n(this,void 0,void 0,(function*(){try{const t=yield this.put("/appdescr_variant_preview/",e,{headers:{"Content-Type":"application/zip"}});return JSON.parse(t.data)}catch(e){throw(0,a.isAxiosError)(e)&&this.tryLogResponse(e.response),e}}))}isExistingVariant(e,t="CUSTOMER_BASE"){var r;return n(this,void 0,void 0,(function*(){try{const r=yield this.get(l,{params:{name:c(e),layer:t,timestamp:Date.now()}});return this.tryLogResponse(r),r}catch(e){if((0,a.isAxiosError)(e)&&(this.tryLogResponse(e.response),404===(null===(r=e.response)||void 0===r?void 0:r.status)))return e.response;throw e}}))}deploy(e,t){var r,o;return n(this,void 0,void 0,(function*(){const n=(0,s.readFileSync)(e),i=yield this.isExistingVariant(t.namespace),a={name:c(t.namespace),layer:null!==(r=t.layer)&&void 0!==r?r:"CUSTOMER_BASE"};a.package=null!==(o=t.package)&&void 0!==o?o:"$TMP","$TMP"!==a.package.toUpperCase()&&(a.changelist=t.transport);const u=yield this.request({method:200===i.status?"PUT":"POST",url:l,data:n,params:a,headers:{"Content-Type":"application/octet-stream"}});return this.tryLogResponse(u,"Deployment successful."),u}))}undeploy(e){var t;return n(this,void 0,void 0,(function*(){if(200!==(yield this.isExistingVariant(e.namespace)).status)throw new Error("Undeploy failed because the given project does not exist.");const r={name:c(e.namespace),layer:null!==(t=e.layer)&&void 0!==t?t:"CUSTOMER_BASE"};e.transport&&(r.changelist=e.transport);const n=yield this.delete(l,{params:r});return this.tryLogResponse(n,"Undeployment successful."),n}))}tryLogResponse(e,t){var r;try{const t=e.data?JSON.parse(e.data):{};t.result&&this.logMessage(t.result),(null!==(r=t.messages)&&void 0!==r?r:[]).forEach((e=>{this.logMessage(e)}))}catch(e){t&&this.log.info(t),this.log.warn("Could not parse returned messages.")}}logMessage(e){var t;const r="Error"===e.severity?i.LogLevel.Error:i.LogLevel.Info;this.log.log({level:r,message:e.text}),(null!==(t=e.details)&&void 0!==t?t:[]).forEach((e=>{this.log.log({level:r,message:e})}))}}t.LayeredRepositoryService=LayeredRepositoryService,LayeredRepositoryService.PATH="/sap/bc/lrep"},42538:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.prettyPrintTimeInMs=t.prettyPrintError=t.prettyPrintMessage=void 0;const n=r(57310);function o(e,t,r,n=!1){e?"success"===(e=e.toLowerCase())?r.info(t):("warning"===e&&(e="warn"),r[e](t)):n?r.error(t):r.info(t)}function i({host:e,path:t,log:r,isDest:o=!1}){if(e&&t){const i=new n.URL(e).origin;r.info("Please copy/paste this URL in a browser for more details:"),o&&r.info("(Note: You will need to replace the host in the URL with the internal host, if your destination is configured using an On-Premise SAP Cloud Connector)"),r.info(new n.URL(t,i).href)}}t.prettyPrintMessage=function({msg:e,log:t,host:r,isDest:n=!1}){try{const s=JSON.parse(e);t.info(s.message),i({host:r,path:s.longtext_url,log:t,isDest:n}),s.details&&s.details.forEach((e=>{o(e.severity,e.message,t)}))}catch(r){t.debug(e)}},t.prettyPrintError=function({error:e,log:t,host:r},n=!0){var s,a,c;if(e&&(n&&t.error((null===(s=e.message)||void 0===s?void 0:s.value)||"An unknown error occurred."),((null===(a=e.innererror)||void 0===a?void 0:a.errordetails)||[]).forEach((e=>{e.message.startsWith("<![CDATA")||o(e.severity,e.message,t,!0),i({host:r,path:e.longtext_url,log:t})})),n&&(null===(c=e.innererror)||void 0===c?void 0:c.Error_Resolution)))for(const r in e.innererror.Error_Resolution)t.error(`${r}: ${e.innererror.Error_Resolution[r]}`)};t.prettyPrintTimeInMs=e=>{const t=e/60/1e3|0;return t>1?`${t} minutes`:1===t?"1 minute":e/1e3+" seconds"}},36020:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalPackageText=t.TenantType=void 0,function(e){e.SAP="SAP",e.Customer="CUSTOMER"}(t.TenantType||(t.TenantType={})),t.LocalPackageText=["LOCAL_PACKAGE","LOCAL"]},12978:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(36020),t)},17272:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Ui5AbapRepositoryService=t.abapUrlReplaceMap=void 0;const o=r(42538),i=r(15995),s=r(25298);t.abapUrlReplaceMap=new Map([[/\.abap\./,".abap-web."],[/-api\.s4hana\.ondemand\.com/,".s4hana.ondemand.com"],[/-api\.saps4hanacloud\.cn/,".saps4hanacloud.cn"]]);const a={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"},c=/[<>&"']/g;function l(e){return e.replace(c,(e=>a[e]))}class Ui5AbapRepositoryService extends i.ODataService{constructor(e){var t,r;(e=null!=e?e:{}).headers=null!==(t=e.headers)&&void 0!==t?t:{},e.headers.Accept=null!==(r=e.headers.Accept)&&void 0!==r?r:"application/json,application/xml,text/plain,*/*",super(e),this.publicUrl=e.publicUrl||this.defaults.baseURL}getInfo(e){var t;return n(this,void 0,void 0,(function*(){try{return(yield this.get(`/Repositories('${encodeURIComponent(e)}')`)).odata()}catch(r){if(this.log.debug(`Retrieving application ${e}, ${r}`),(0,s.isAxiosError)(r)&&404===(null===(t=r.response)||void 0===t?void 0:t.status))return;throw r}}))}deploy({archive:e,bsp:t,testMode:r=!1,safeMode:i}){var s,a;return n(this,void 0,void 0,(function*(){const n=yield this.getInfo(t.name),c=this.createPayload(e,t.name,t.description||"Deployed with SAP Fiori tools",n?n.Package:t.package);this.log.debug(`Payload:\n${c}`);const l=this.createConfig(t.transport,r,i),u=this.getAbapFrontendUrl();try{const e=yield this.updateRepoRequest(!!n,t.name,c,l);if((null===(s=null==e?void 0:e.headers)||void 0===s?void 0:s["sap-message"])&&(0,o.prettyPrintMessage)({msg:e.headers["sap-message"],log:this.log,host:u,isDest:/\.dest\//.test(l.baseURL)}),r)(0,o.prettyPrintError)({error:this.getErrorMessageFromString(null==e?void 0:e.data),log:this.log,host:u},!1);else{const e="/sap/bc/ui5_ui5"+(t.name.startsWith("/")?"":"/sap/")+t.name.toLowerCase(),r=(null===(a=this.defaults.params)||void 0===a?void 0:a["sap-client"])?"?sap-client="+this.defaults.params["sap-client"]:"";this.log.info(`App available at ${u}${e}${r}`)}return e}catch(e){throw this.logError({error:e,host:u}),e}}))}undeploy({bsp:e,testMode:t=!1}){var r;return n(this,void 0,void 0,(function*(){const n=this.createConfig(e.transport,t),i=this.getAbapFrontendUrl(),s=yield this.getInfo(e.name);try{if(s){const t=yield this.deleteRepoRequest(e.name,n);return(null===(r=null==t?void 0:t.headers)||void 0===r?void 0:r["sap-message"])&&(0,o.prettyPrintMessage)({msg:t.headers["sap-message"],log:this.log,host:i}),t}return void this.log.warn(`Application ${e.name} not found, nothing to undeploy.`)}catch(e){throw this.logError({error:e,host:i}),e}}))}getAbapFrontendUrl(){const e=new URL(this.publicUrl);return t.abapUrlReplaceMap.forEach(((t,r)=>{e.hostname=e.hostname.replace(r,t)})),`${e.protocol}//${e.host}`}createConfig(e,t,r){const n={CodePage:"'UTF8'",CondenseMessagesInHttpResponseHeader:"X",format:"json"};e&&(n.TransportRequest=e),t&&(n.TestMode=!0),void 0!==r&&(n.SafeMode=r);return{headers:{"Content-Type":"application/atom+xml",type:"entry",charset:"UTF8"},params:n,maxBodyLength:Infinity,maxContentLength:Infinity}}createPayload(e,t,r,n){const o=e.toString("base64"),i=(new Date).toISOString(),s=l(t);return`<entry xmlns="http://www.w3.org/2005/Atom"       xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"       xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices"       xml:base="${this.publicUrl}">  <id>${this.publicUrl}/Repositories('${s}')</id>  <title type="text">Repositories('${s}')</title>  <updated>${i}</updated>  <category term="/UI5/ABAP_REPOSITORY_SRV.Repository" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme"/>  <link href="Repositories('${s}')" rel="edit" title="Repository"/>  <content type="application/xml">    <m:properties>      <d:Name>${s}</d:Name>      <d:Package>${null==n?void 0:n.toUpperCase()}</d:Package>      <d:Description>${l(r)}</d:Description>      <d:ZipArchive>${o}</d:ZipArchive>      <d:Info/>    </m:properties>  </content></entry>`}updateRepoRequest(e,t,r,o,i=1){var s,a;return n(this,void 0,void 0,(function*(){try{if(2===i&&this.log.warn("Warning: The application was deployed despite a time out response from the backend. Increasing the value of the HTML5.Timeout property for the destination may solve the issue"),1===i||e||void 0===(yield this.getInfo(t))){this.log.info(`${t} found on target system: ${e}`);return e?yield this.put(`/Repositories('${encodeURIComponent(t)}')`,r,o):yield this.post("/Repositories",r,o)}return Promise.resolve(void 0)}catch(n){if([504,408].includes(null===(s=null==n?void 0:n.response)||void 0===s?void 0:s.status)){if(i>=3)throw n;return this.updateRepoRequest(e,t,r,o,i+1)}if(null===(a=null==o?void 0:o.params)||void 0===a?void 0:a.TestMode)return n.response;throw n}}))}deleteRepoRequest(e,t,r=1){var o;return n(this,void 0,void 0,(function*(){try{return 2===r&&this.log.warn("Warning: retry undeploy to handle a backend rejection..."),yield this.delete(`/Repositories('${e}')`,t)}catch(n){if(400===(null===(o=null==n?void 0:n.response)||void 0===o?void 0:o.status)){if(r>=2)throw n;return this.deleteRepoRequest(e,t,r+1)}throw n}}))}logError({error:e,host:t}){var r,n;if(this.log.error(e.message),(0,s.isAxiosError)(e)&&(null===(r=e.response)||void 0===r?void 0:r.data)){const r=this.getErrorMessageFromString(null===(n=e.response)||void 0===n?void 0:n.data);r?(0,o.prettyPrintError)({error:r,host:t,log:this.log}):this.log.error(e.response.data.toString())}}getErrorMessageFromString(e){let t;if("string"==typeof e)try{const r=JSON.parse(e);r.error&&(t=r.error)}catch(e){}return t}}t.Ui5AbapRepositoryService=Ui5AbapRepositoryService,Ui5AbapRepositoryService.PATH="/sap/opu/odata/UI5/ABAP_REPOSITORY_SRV"},92545:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.attachConnectionHandler=t.Cookies=t.defaultTimeout=t.CSRF=void 0;const o=r(94486),i=n(r(68978));var s;!function(e){e.RequestHeaderName="X-Csrf-Token",e.RequestHeaderValue="Fetch",e.ResponseHeaderName="x-csrf-token"}(s=t.CSRF||(t.CSRF={})),t.defaultTimeout=6e4;function a(e){if(200===(null==e?void 0:e.status)&&("ICFLOGONREQUIRED"===e.headers["sap-err-id"]||function(e){return c(e)&&"string"==typeof e.data&&!!e.data.match(/log[io]n/i)}(e))){const e=new Error;throw e.response={status:401},e.isAxiosError=!0,e.toJSON=()=>({status:401}),e}}function c(e){return(t=e.headers["content-type"],r=e.data,t?t.toLowerCase():"string"==typeof r&&null!==(o=null===(n=(0,i.default)(Buffer.from(r)))||void 0===n?void 0:n.toLowerCase())&&void 0!==o?o:"").startsWith("text/html");var t,r,n,o}t.Cookies=class Cookies{constructor(){this.cookies={}}setCookies(e){var t;return(null===(t=e.headers)||void 0===t?void 0:t["set-cookie"])&&e.headers["set-cookie"].forEach((e=>this.addCookie(e))),this}addCookie(e){var t;const r=e.split(";"),[n,...o]=(null===(t=r[0])||void 0===t?void 0:t.split("="))||[],i=null==o?void 0:o.join("=");return n&&e.indexOf("Max-Age=0")>=0?delete this.cookies[n]:n&&i&&(this.cookies[n]=i),this}toString(){const e=[];return Object.keys(this.cookies).forEach((t=>{e.push(`${t}=${this.cookies[t]}`)})),e.join("; ")}},t.attachConnectionHandler=function(e){const t=e.interceptors.request.use((e=>{var t;return e.headers=null!==(t=e.headers)&&void 0!==t?t:new o.AxiosHeaders,e.headers[s.RequestHeaderName]=s.RequestHeaderValue,e})),r=e.interceptors.response.use((n=>{var o,i,l;return function(e){return 200===(null==e?void 0:e.status)&&c(e)&&"string"==typeof e.data&&!!e.data.match(/saml/i)}(n)&&"disabled"!==(null===(o=e.defaults.params)||void 0===o?void 0:o.saml2)?(e.defaults.params=null!==(i=e.defaults.params)&&void 0!==i?i:{},e.defaults.params.saml2="disabled",e.request(n.config)):(a(n),(null===(l=n.headers)||void 0===l?void 0:l[s.ResponseHeaderName])&&(e.defaults.headers.common[s.RequestHeaderName]=n.headers[s.ResponseHeaderName],e.interceptors.request.eject(t)),e.interceptors.response.eject(r),n)}),(r=>{var n;throw r.response&&((null===(n=r.response.headers)||void 0===n?void 0:n[s.ResponseHeaderName])&&(e.defaults.headers.common[s.RequestHeaderName]=r.response.headers[s.ResponseHeaderName],e.interceptors.request.eject(t)),e.cookies.setCookies(r.response)),r}));e.interceptors.request.use((t=>{var r;return t.headers=null!==(r=t.headers)&&void 0!==r?r:new o.AxiosHeaders,t.headers.cookie=e.cookies.toString(),t})),e.interceptors.response.use((t=>(e.cookies.setCookies(t),t)))}},29314:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UAATimeoutError=t.TimeoutError=t.ConnectionError=t.BaseError=void 0;class BaseError extends Error{constructor(e,t){super(e),this.cause=t,this.name=this.constructor.name}}t.BaseError=BaseError;t.ConnectionError=class ConnectionError extends BaseError{};class TimeoutError extends BaseError{}t.TimeoutError=TimeoutError;t.UAATimeoutError=class UAATimeoutError extends TimeoutError{}},87951:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getReentranceTicketAuthInterceptor=t.attachReentranceTicketAuthInterceptor=t.attachUaaAuthInterceptor=t.attachBasicAuthInterceptor=t.Uaa=void 0;const s=r(94486),a=r(31223),c=r(45279);function l({provider:e,ejectCallback:t}){return r=>i(this,void 0,void 0,(function*(){var n;const{reentranceTicket:o,apiUrl:i}=yield(0,a.getReentranceTicket)({backendUrl:e.defaults.baseURL,logger:e.log});return i&&i!=e.defaults.baseURL&&(e.log.warn(`Replacing provider's default base URL (${e.defaults.baseURL}) with API URL: ${i}`),e.defaults.baseURL=i),r.headers=null!==(n=r.headers)&&void 0!==n?n:new s.AxiosHeaders,r.headers.MYSAPSSO2=o,t(),r}))}Object.defineProperty(t,"Uaa",{enumerable:!0,get:function(){return c.Uaa}}),o(r(92545),t),o(r(29314),t),t.attachBasicAuthInterceptor=function(e){const t=e.interceptors.response.use((r=>(delete e.defaults.auth,e.interceptors.response.eject(t),r)))},t.attachUaaAuthInterceptor=function(e,t,r,n){const o=new c.Uaa(t,e.log);let a;const l=()=>i(this,void 0,void 0,(function*(){var e;return(null===(e=t.uaa)||void 0===e?void 0:e.username)?yield o.getAccessTokenWithClientCredentials():yield o.getAccessToken(r,n)}));e.user=()=>i(this,void 0,void 0,(function*(){return a=null!=a?a:yield l(),o.getUserInfo(a)}));const u=e.interceptors.request.use((t=>i(this,void 0,void 0,(function*(){var r;return a=null!=a?a:yield l(),t.headers=null!==(r=t.headers)&&void 0!==r?r:new s.AxiosHeaders,t.headers.authorization=`bearer ${a}`,e.interceptors.request.eject(u),t}))))},t.attachReentranceTicketAuthInterceptor=function({provider:e}){let t;t=e.interceptors.request.use(l({provider:e,ejectCallback:()=>e.interceptors.request.eject(t)}))},t.getReentranceTicketAuthInterceptor=l},28101:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Redirect=void 0;class Redirect{constructor(e){this.port=e}url(){return`http://localhost:${this.port}${Redirect.path}`}}t.Redirect=Redirect,Redirect.path="/oauth/client/redirect"},60991:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPSystem=void 0;t.ABAPSystem=class ABAPSystem{constructor(e){this.systemURL=new URL(e)}uiHostname(){if(!this.uiURL){this.uiURL=new URL(this.systemURL.href);const[e,...t]=this.uiURL.hostname.split(".");this.uiURL.hostname=[e.replace(/-api$/,""),...t].join(".")}return this.uiURL.origin}apiHostname(){if(!this.apiURL){this.apiURL=new URL(this.systemURL.href);const[e,...t]=this.apiURL.hostname.split(".");e.endsWith("-api")||(this.apiURL.hostname=[e+"-api",...t].join("."))}return this.apiURL.origin}logoffUrl(){return this.uiHostname()+"/sap/public/bc/icf/logoff"}}},31223:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getReentranceTicket=void 0;const o=r(16711),i=r(92545),s=r(60991),a=r(3970);t.getReentranceTicket=function({backendUrl:e,logger:t,timeout:r=i.defaultTimeout}){return n(this,void 0,void 0,(function*(){return new Promise(((n,i)=>{var c;const l=new s.ABAPSystem(e),{server:u,redirectUrl:d}=(0,a.setupRedirectHandling)({resolve:n,reject:i,timeout:r,backend:l,logger:t});u.listen();const p=u.address().port,f=`${l.uiHostname()}/sap/bc/adt/core/http/reentranceticket?redirect-url=${d(p)}`;null===(c=o(f))||void 0===c||c.catch((e=>t.error(e)))}))}))}},3970:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setupRedirectHandling=void 0;const o=n(r(13685)),i=r(29314),s=r(42538),a=r(60116);t.setupRedirectHandling=function({resolve:e,reject:t,timeout:r,backend:n,logger:c}){const l="/redirect";let u;const d=setTimeout((()=>{null==u||u.close(),t(new i.TimeoutError(`Timeout. Did not get a response within ${(0,s.prettyPrintTimeInMs)(r)}`))}),r);return u=o.default.createServer(((r,o)=>{var s;const p=new URL(r.url,`http://${r.headers.host}`);if(p.pathname===l){d&&clearTimeout(d);const l=null===(s=p.searchParams.get("reentrance-ticket"))||void 0===s?void 0:s.toString();l?(c.debug("Got reentrance ticket: "+l),o.writeHead(200,{"Content-Type":"text/html"}),o.end(Buffer.from((0,a.redirectSuccessHtml)(n.logoffUrl()))),u.close(),e({reentranceTicket:l,apiUrl:n.apiHostname()})):(c.error("Error getting reentrance ticket"),c.debug(r),o.writeHead(500,{"Content-Type":"text/html"}),o.end(Buffer.from((0,a.redirectErrorHtml)())),u.close(),t(new i.ConnectionError("Error getting reentrance ticket")))}})),{server:u,redirectUrl:e=>`http://localhost:${e}/redirect`}}},60116:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.redirectErrorHtml=t.redirectSuccessHtml=void 0;t.redirectSuccessHtml=(e,t)=>r({title:(t?t+": ":"")+"Authentication Successful",content:e?'<a class="centerLink" href="'+e+'">(Click here to log off the current user)</a>':""});function r({title:e,content:t}){return`\n<html>\n\n<head>\n    <meta http-equiv="content-type" content="text/html; charset=windows-1252">\n    <title>${e}</title>\n    <style>\n        body {\n            background: #ffffff;\n            text-align: center;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n\n        .content {\n            display: table;\n            position: absolute;\n            width: 100%;\n            height: 80%;\n        }\n\n        .valigned {\n            display: table-cell;\n            vertical-align: middle;\n        }\n\n        .lowerCenter {\n            display: table-cell;\n            vertical-align: bottom;\n        }\n\n        .footer {\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            width: 100%;\n            z-index: -1;\n        }\n\n        .footerLeft {\n            float: left;\n            margin-left: 20px;\n        }\n\n        .footerRight {\n            float: right;\n            margin-right: 20px;\n            position: absolute;\n            bottom: 0px;\n            right: 0px;\n        }\n\n        .centerText {\n            font-style: normal;\n            font-family: Arial;\n            font-size: 26px;\n            color: #444444;\n            z-index: 1;\n        }\n        .centerLink {\n            font-style: normal;\n            font-family: Arial, Helvetica, sans-serif;\n            font-size: 18px;\n            text-decoration: none;\n            color: #224679;\n        }\n\n        .errorTextHeader {\n            font-style: normal;\n            font-family: Arial;\n            font-size: 40px;\n            color: #444444;\n        }\n\n        .bottomText {\n            align: center;\n            font-style: normal;\n            font-family: Arial;\n            font-size: 14px;\n            color: #444444;\n        }\n\n        .biggerBottomText {\n            align: center;\n            font-style: normal;\n            font-family: Arial;\n            font-size: 16px;\n            color: #444444;\n        }\n\n        .detailTable {\n            align: bottom;\n            vertical-align: middle;\n            margin-left: auto;\n            margin-right: auto;\n            font-style: normal;\n            font-family: Arial;\n            font-size: 16px;\n            color: #444444;\n        }\n    </style>\n</head>\n\n<body>\n    <div class="content">\n        <div class="valigned">\n            <p class="centerText"><span class="errorTextHeader">You can close this tab now.</span></p>\n            ${t}\n        </div>\n    </div>\n    <div class="footer">\n        <div class="footerLeft"><img width='150' height='80' title='' alt='SAP logo'\n                src='data:image/png;base64,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'>\n        </div>\n        <div class="footerRight">\n            <p class="bottomText"><span class="biggerBottomText">&copy;</span>2020 SAP SE, All rights reserved.</p>\n        </div>\n    </div>\n</body>\n\n</html>\n`}t.redirectErrorHtml=e=>r({title:(e?e+": ":"")+"Authentication Successful",content:"Login failed, please check the logs in the console"})},45279:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Uaa=void 0;const i=r(16711),s=o(r(94486)),a=o(r(13685)),c=o(r(52722)),l=r(28101),u=r(42538),d=r(29314),p=r(60116),f=r(92545);t.Uaa=class Uaa{constructor(e,t){this.log=t,this.validatePropertyExists(e.uaa.clientid,"Client ID missing"),this.validatePropertyExists(e.uaa.clientsecret,"Client Secret missing"),this.validatePropertyExists(e.uaa.url,"UAA URL missing"),this.serviceInfo=e}validatePropertyExists(e,t){if(!e)throw Error(t)}get url(){return this.serviceInfo.uaa.url.replace(/\/?$/,"")}get clientid(){return this.serviceInfo.uaa.clientid}get clientsecret(){return this.serviceInfo.uaa.clientsecret}get logoutUrl(){return this.url+"/logout.do"}get systemId(){return this.serviceInfo.systemid}get username(){return this.serviceInfo.uaa.username}get password(){return this.serviceInfo.uaa.password}getAuthCodeUrl({redirectUri:e}){return this.url+"/oauth/authorize?"+c.default.stringify({response_type:"code",redirect_uri:e,client_id:this.clientid})}getTokenRequestForClientCredential(){const e=`${this.clientid}:${this.clientsecret}`;return{url:`${this.url}/oauth/token`,method:"POST",data:c.default.stringify({grant_type:"password",username:this.username,password:this.password}),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:`Basic ${Buffer.from(e).toString("base64")}`}}}getTokenRequestForAuthCode({redirectUri:e,authCode:t}){return{url:`${this.url}/oauth/token`,auth:{username:this.clientid,password:this.clientsecret},method:"POST",data:c.default.stringify({code:t,grant_type:"authorization_code",redirect_uri:e,response_type:"token"}),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}}}getTokenRequestForRefreshToken(e){return{url:`${this.url}/oauth/token`,auth:{username:this.clientid,password:this.clientsecret},method:"POST",data:c.default.stringify({grant_type:"refresh_token",refresh_token:e}),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}}}getUserInfo(e){var t,r;return n(this,void 0,void 0,(function*(){const n=yield s.default.request({url:`${this.url}/userinfo`,method:"GET",headers:{authorization:`bearer ${e}`}});return(null===(t=null==n?void 0:n.data)||void 0===t?void 0:t.email)||(null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.name)}))}getAuthCode(e=f.defaultTimeout){return n(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{var n;let o,s;const c=setTimeout((()=>{null==s||s.close(),r(new d.UAATimeoutError(`Timeout. Did not get a response within ${(0,u.prettyPrintTimeInMs)(e)}`))}),e);s=a.default.createServer(((e,r)=>{const n=new URL(e.url,`http://${e.headers.host}`);n.pathname===l.Redirect.path&&(r.writeHead(200,{"Content-Type":"text/html"}),r.end(Buffer.from((0,p.redirectSuccessHtml)(this.logoutUrl,this.systemId))),this.log.info("Got authCode"),t({authCode:n.searchParams.get("code")+"",redirect:o}),c&&clearTimeout(c),s.close())})),s.listen(),o=new l.Redirect(s.address().port);const f=this.getAuthCodeUrl({redirectUri:o.url()});null===(n=i(f))||void 0===n||n.catch((e=>this.log.error(e)))}))}))}getAccessToken(e,t){var r;return n(this,void 0,void 0,(function*(){let n,o,i=!1;if(e){this.log.info("Refresh token passed in");const t=this.getTokenRequestForRefreshToken(e);try{n=yield s.default.request(t),401===n.status||"invalid_token"===n.data.error?(i=!0,this.log.warn("Cannot use stored refresh token. Starting fresh request")):e!==n.data.refresh_token&&(this.log.info("New refresh token issued"),o=n.data.refresh_token)}catch(e){i=!0}}if(!e||i){const{authCode:e,redirect:t}=yield this.getAuthCode(),r=this.getTokenRequestForAuthCode({redirectUri:t.url(),authCode:e});n=yield s.default.request(r),this.log.info("Refresh token issued"),o=n.data.refresh_token}return o&&t&&(this.log.info("Sending notification that refresh token changed"),yield t(o)),this.log.info("Got access token successfully"),null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.access_token}))}getAccessTokenWithClientCredentials(){var e;return n(this,void 0,void 0,(function*(){const t=this.getTokenRequestForClientCredential(),r=yield s.default.request(t);return this.log.info("Got access token successfully using client credentials"),null===(e=null==r?void 0:r.data)||void 0===e?void 0:e.access_token}))}}},25298:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ODataRequestError=t.isAxiosError=void 0,t.isAxiosError=function(e){return"object"==typeof e&&null!==e&&"isAxiosError"in e};class ODataRequestError extends Error{static containsError(e){return!!(null==e?void 0:e.error)}constructor(e){const t=e.error;super(`${t.message} (${t.code})`),this.name=this.constructor.name}}t.ODataRequestError=ODataRequestError},15995:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ODataService=t.ODataVersion=void 0;const o=r(94486);function i(){const e=this.data?JSON.parse(this.data):{};return e.d?e.d.results?e.d.results:e.d:e["@odata.context"]&&e.value?e.value:e}!function(e){e.v2="2",e.v4="4"}(t.ODataVersion||(t.ODataVersion={}));class ODataService extends o.Axios{document(){return n(this,void 0,void 0,(function*(){if(!this.doc){const e=(yield this.get("/")).odata();e.EntitySets?this.doc=e:this.doc={EntitySets:e.map((e=>e.name))}}return this.doc}))}metadata(){return n(this,void 0,void 0,(function*(){if(!this.metadataDoc){const e=yield this.get("/$metadata",{headers:{Accept:"application/xml"}});this.metadataDoc=e.data}return this.metadataDoc}))}get(e,t={}){const r=Object.create(null,{get:{get:()=>super.get}});var o,s,a,c,l;return n(this,void 0,void 0,(function*(){void 0!==(null===(o=t.params)||void 0===o?void 0:o.$format)||(null===(s=t.headers)||void 0===s?void 0:s.Accept)||(t.params=null!==(a=t.params)&&void 0!==a?a:{},t.params.$format="json",t.headers=null!==(c=t.headers)&&void 0!==c?c:{},t.headers.Accept="application/json");const n=yield r.get.call(this,e,t);return n.data&&"json"===(null===(l=t.params)||void 0===l?void 0:l.$format)&&(n.odata=i.bind(n)),n}))}}t.ODataService=ODataService},31726:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceProvider=void 0;const n=r(94486),o=r(27715),i=r(15995),s=r(87951);class ServiceProvider extends n.Axios{constructor(){super(...arguments),this.log=new o.ToolsLogger,this.cookies=new s.Cookies,this.services={}}service(e){return this.services[e]||(this.services[e]=this.createService(e,i.ODataService)),this.services[e]}generateServiceConfig(e){var t,r;const n=Object.assign({},this.defaults);return Object.assign(Object.assign({},n),{baseURL:this.defaults.baseURL+e,headers:null!==(r=null===(t=this.defaults.headers)||void 0===t?void 0:t.common)&&void 0!==r?r:{}})}createService(e,t){const r=new t(Object.assign(Object.assign({},this.generateServiceConfig(e)),{publicUrl:this.publicUrl}));return r.log=this.log,r.interceptors=this.interceptors,r}get publicUrl(){return this.defaults.baseURL}}t.ServiceProvider=ServiceProvider},83117:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createServiceForUrl=t.createForDestination=t.createForAbapOnCloud=t.AbapCloudEnvironment=t.createForAbap=t.create=void 0;const s=i(r(28869)),a=r(14425),c=r(95687),l=r(87951),u=r(31726),d=r(75082),p=r(73837);function f(e,t){var r,n;const o=(0,s.default)(t);o.httpsAgent=new c.Agent({rejectUnauthorized:!o.ignoreCertErrors}),delete o.ignoreCertErrors,o.withCredentials=(null==o?void 0:o.auth)&&Object.keys(o.auth).length>0,o.validateStatus=e=>e<400;const i=new e(o);return i.defaults.headers=null!==(r=i.defaults.headers)&&void 0!==r?r:{common:{},delete:{},put:{},get:{},post:{},head:{},patch:{}},(0,l.attachConnectionHandler)(i),(null===(n=o.auth)||void 0===n?void 0:n.password)&&(0,l.attachBasicAuthInterceptor)(i),t.cookies&&t.cookies.split(";").forEach((e=>{i.cookies.addCookie(e.trim())})),i}var h;t.create=function(e){return f(u.ServiceProvider,"string"==typeof e?{baseURL:e}:e)},t.createForAbap=function(e){return f(d.AbapServiceProvider,e)},function(e){e.Standalone="Standalone",e.EmbeddedSteampunk="EmbeddedSteampunk"}(h=t.AbapCloudEnvironment||(t.AbapCloudEnvironment={})),t.createForAbapOnCloud=function(e){let t;switch(e.environment){case h.Standalone:{const{service:r,refreshToken:n,refreshTokenChangedCb:i,cookies:s}=e,a=o(e,["service","refreshToken","refreshTokenChangedCb","cookies"]);t=f(d.AbapServiceProvider,Object.assign({baseURL:r.url,cookies:s},a)),s||(0,l.attachUaaAuthInterceptor)(t,r,n,i);break}case h.EmbeddedSteampunk:{const{url:r,cookies:n}=e,i=o(e,["url","cookies"]);t=f(d.AbapServiceProvider,Object.assign({baseURL:r},i)),n||(0,l.attachReentranceTicketAuthInterceptor)({provider:t});break}default:const r=e;throw new Error(`Unknown environment type supplied: ${(0,p.inspect)(r)}`)}return t},t.createForDestination=function(e,t,r){var i;const{cookies:s}=e,c=o(e,["cookies"]),l=Object.assign(Object.assign({},c),{baseURL:(0,a.getDestinationUrlForAppStudio)(t.Name,t.Host?new URL(t.Host).pathname:void 0),cookies:s});let p;if(l.params=null!==(i=l.params)&&void 0!==i?i:{},l.params.saml2="disabled",(0,a.isAbapSystem)(t)?(p=f(d.AbapServiceProvider,l),p.publicUrl=t.Host):p=f(u.ServiceProvider,l),r){const e=p.interceptors.request.use((t=>n(this,void 0,void 0,(function*(){const n=yield(0,a.getCredentialsForDestinationService)(r);return p.defaults.headers.common[a.BAS_DEST_INSTANCE_CRED_HEADER]=n,p.interceptors.request.eject(e),t}))))}return p},t.createServiceForUrl=function(e,t={}){const r=new URL(e);return t.baseURL=r.origin,t.params=r.searchParams,f(u.ServiceProvider,t).service(r.pathname)}},8830:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isAxiosError=void 0;const i=r(25298);Object.defineProperty(t,"isAxiosError",{enumerable:!0,get:function(){return i.isAxiosError}}),o(r(15995),t),o(r(31726),t),o(r(75082),t),o(r(83117),t),o(r(87951),t)},27715:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ToolsLogger=void 0,o(r(66776),t),o(r(61863),t);var i=r(53730);Object.defineProperty(t,"ToolsLogger",{enumerable:!0,get:function(){return i.WinstonLogger}})},61863:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(61130),t)},61130:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayTransport=t.VSCodeTransport=t.StringArrayTransport=t.FileTransport=t.NullTransport=t.UI5ToolingTransport=t.ConsoleTransport=void 0;const o=n(r(2584)),i=r(66776);class ConsoleTransport extends i.Transport{constructor(e={}){return super(),ConsoleTransport.singletonInstance||(ConsoleTransport.singletonInstance=this,this.options=this.copy(e)),ConsoleTransport.singletonInstance}}t.ConsoleTransport=ConsoleTransport;class UI5ToolingTransport extends i.Transport{constructor(e){super();const t=UI5ToolingTransport.instances.get(e.moduleName);return t||(this.options=this.copy(e),UI5ToolingTransport.instances.set(e.moduleName,this),this)}}t.UI5ToolingTransport=UI5ToolingTransport,UI5ToolingTransport.instances=new Map;class NullTransport extends i.Transport{constructor(){return super(),NullTransport.singletonInstance||(NullTransport.singletonInstance=this),NullTransport.singletonInstance}}t.NullTransport=NullTransport;class FileTransport extends i.Transport{constructor(e){super(),this.options=this.copy(e)}}t.FileTransport=FileTransport;class StringArrayTransport extends i.Transport{}t.StringArrayTransport=StringArrayTransport;class VSCodeTransport extends i.Transport{constructor(e){super();const t=VSCodeTransport.instances.get(e.channelName);return t||(this.options=this.copy(e),VSCodeTransport.instances.set(e.channelName,this),this)}}t.VSCodeTransport=VSCodeTransport,VSCodeTransport.instances=new Map;class ArrayTransport extends o.default{constructor(e){super({level:"number"==typeof(null==e?void 0:e.logLevel)?i.LogLevel[e.logLevel].toLowerCase():"debug"}),this.copy=i.Transport.prototype.copy,this.logs=(null==e?void 0:e.logs)||[]}log(e,t){this.logs.push(e),t()}}t.ArrayTransport=ArrayTransport},66776:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=t.LogLevel=void 0;const o=n(r(28869));!function(e){e[e.Error=0]="Error",e[e.Warn=1]="Warn",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Debug=4]="Debug",e[e.Silly=5]="Silly"}(t.LogLevel||(t.LogLevel={}));t.Transport=class Transport{copy(e){return Object.freeze((0,o.default)(e))}}},54084:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.toWinstonTransport=t.toWinstonLogLevel=void 0;const c=r(66776),l=i(r(14503)),u=r(61863),d=r(67292),p=r(56524),f=r(73837),h=a(r(48009));function v(e){return void 0===e?void 0:c.LogLevel[e].toLowerCase()}t.toWinstonLogLevel=v;const g=e=>{const{logLevel:t}=e,r=s(e,["logLevel"]);return Object.assign({},r,{level:v(t)})},y={info:"green",warn:"yellow",error:"red",verbose:"blue",silly:"magenta",debug:"cyan"},m=()=>process.stdout.isTTY,b=e=>{try{return e?h.default.keyword(e):void 0}catch(e){return}},S=l.format.combine(l.format.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),l.format.printf((e=>{var{timestamp:t,level:r,message:n,label:o,labelColor:i}=e,a=s(e,["timestamp","level","message","label","labelColor"]);const c="string"==typeof n?n:(0,f.inspect)(n),l=(e=>{const t=e.padEnd(7);if(m()){const r=b(y[e]);if(r)return r(t)}return t})(r);return`${t} ${l} ${((e,t)=>{let r=null!=e?e:"";if(m()&&e&&"string"==typeof t){const n=b(t);n&&(r=n(e))}return r})(o,i)}: ${c} ${Object.keys(a).length?(0,f.inspect)(a):""}`})));t.toWinstonTransport=function(e){if(e instanceof u.NullTransport)return new d.NullTransport;if(e instanceof u.ConsoleTransport)return new l.default.transports.Console(Object.assign(Object.assign({},g(e.options)),{format:S}));if(e instanceof u.FileTransport)return new l.default.transports.File(g(e.options));if(e instanceof u.VSCodeTransport)return new p.VSCodeTransport(g(e.options));if(e instanceof u.UI5ToolingTransport)return new l.default.transports.Console(Object.assign(Object.assign({},g(e.options)),{format:(t=e.options.moduleName,l.format.combine(l.format.colorize(),l.format.label({label:t}),l.format.printf((({level:e,message:t,label:r})=>{let n="string"==typeof t?t:(0,f.inspect)(t);return n=n.split(/\r?\n/).join(`\n${e} ${h.default.magenta(r)} `),`${e} ${h.default.magenta(r)} ${n}`}))))}));if(e instanceof u.ArrayTransport)return e;throw new Error("Unrecognized transport type");var t}},53730:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinstonLogger=void 0;var n=r(53079);Object.defineProperty(t,"WinstonLogger",{enumerable:!0,get:function(){return n.WinstonLogger}})},53079:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WinstonLogger=void 0;const s=r(61863),a=r(66776),c=i(r(14503)),l=r(54084),u=r(61908),d=r(73837),p={transports:[new s.ConsoleTransport]};class BaseWinstonLogger{initialize({logger:e,transportMap:t,metadataOverride:r,winstonLevel:n,logPrefix:o}){this._logger=e,this.transportMap=t,this.winstonLevel=n,this.logPrefix=o,this.metadataOverride=r}info(e){this.log({level:a.LogLevel.Info,message:e})}warn(e){this.log({level:a.LogLevel.Warn,message:e})}error(e){this.log({level:a.LogLevel.Error,message:e})}debug(e){this.log({level:a.LogLevel.Debug,message:e})}log(e){var t;if(this.transportMap.size)if("string"==typeof e)this.winstonLog({level:this.winstonLevel,message:e,metadata:this.metadataOverride});else{const r=null!==(t=(0,l.toWinstonLogLevel)(e.level))&&void 0!==t?t:this._logger.level;this.winstonLog({level:r,message:e.message,metadata:this.metadataOverride})}}winstonLog({level:e,message:t,metadata:r}){const n="string"==typeof t?t:(0,d.inspect)(t);this._logger.log(e,n,r)}addToMap(e,t){const r=(0,l.toWinstonTransport)(t);if(!e.has(t))return e.set(t,r),r}add(e){const t=this.addToMap(this.transportMap,e);return t&&this._logger.add(t),this}remove(e){const t=this.transportMap.get(e);if(t)return this._logger.remove(t),this.transportMap.delete(e),this;throw new Error("Cannot remove non-existent transport")}transports(){return Array.from(this.transportMap.keys())}child({logPrefix:e}){const t=`${this.logPrefix}.${e}`,r={label:t,labelColor:(0,u.nextColor)()},n=this._logger.child(r),o=new BaseWinstonLogger;return o.initialize({logger:n,transportMap:this.transportMap,winstonLevel:this.winstonLevel,logPrefix:t,metadataOverride:r}),o}}t.WinstonLogger=class WinstonLogger extends BaseWinstonLogger{constructor({logLevel:e=a.LogLevel.Info,transports:t=[],logPrefix:r="main"}=p){super();const n=new Map;t.forEach((e=>this.addToMap(n,e)));const o=(0,l.toWinstonLogLevel)(e),i=c.default.createLogger({level:o,transports:Array.from(n.values()),format:c.format.combine(c.format.timestamp(),c.format.json()),defaultMeta:{label:r,labelColor:(0,u.nextColor)()}}),s=null!=o?o:i.level;this.initialize({logger:i,transportMap:n,winstonLevel:s,logPrefix:r})}}},67292:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NullTransport=void 0;const o=n(r(2584));class NullTransport extends o.default{log(e,t){t()}}t.NullTransport=NullTransport},61908:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.nextColor=void 0;const r=function*(){const e=["magenta","cyan","blue","yellow","green","red"];let t=0;for(;;)t===e.length&&(t=0),yield e[t++]}();t.nextColor=()=>r.next().value},56524:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeTransport=void 0;const o=n(r(2584));class VSCodeTransport extends o.default{constructor(e){super(e),this.channel=r(66828).window.createOutputChannel(e.channelName)}log(e,t){setImmediate((()=>{this.channel.appendLine(`${e.timestamp} [${e.level.toUpperCase()}] - ${e.message}`)})),t()}}t.VSCodeTransport=VSCodeTransport},97833:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Entity=void 0,function(e){e.BackendSystem="system",e.TelemetrySetting="telemetrySetting"}(t.Entity||(t.Entity={}))},62331:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getFilesystemStore=t.getFilesystemWatcherFor=t.basedir=void 0;const c=a(r(71017)),l=i(r(57147)),u=r(4528),d=r(20278),p=a(r(22037));t.basedir=({baseDirectory:e}={})=>e?c.default.isAbsolute(e)?e:c.default.join(p.default.homedir(),e):(0,d.getFioriToolsDirectory)();class FilesystemStore{constructor(e,r={}){this.logger=e,this.storeDirectory=(0,t.basedir)(r)}read({entityName:e,id:t}){return s(this,void 0,void 0,(function*(){const r=f(e);if(!r)return this.logger.debug("read: Entity Type is falsy - "+e),Promise.resolve(void 0);const{entities:n,error:o}=this._readAll(r);if(o){if("ENOENT"===o.code)return Promise.resolve(void 0);throw o}if(n)return Promise.resolve(n[t]);this.logger.debug(`read: After parsing, entities is falsy. Entity: ${r}, parsed value: ${n}`)}))}getAll({entityName:e}){return s(this,void 0,void 0,(function*(){const t=f(e);if(!t)return this.logger.debug("read: Entity Type is falsy - "+e),Promise.resolve([]);const{entities:r,error:n}=this._readAll(t);if(n){if("ENOENT"===n.code)return Promise.resolve([]);throw n}return r?Promise.resolve(Object.values(r)):(this.logger.debug(`read: After parsing, entities is falsy. Entity: ${t}, parsed value: ${r}`),Promise.resolve([]))}))}readAll({entityName:e}){return s(this,void 0,void 0,(function*(){const t=f(e);if(!t)return this.logger.debug("read: Entity Type is falsy - "+e),Promise.resolve({});const{entities:r,error:n}=this._readAll(t);if(n){if("ENOENT"===n.code)return Promise.resolve({});throw n}return r?Promise.resolve(r):(this.logger.debug(`read: After parsing, entities is falsy. Entity: ${t}, parsed value: ${r}`),Promise.resolve({}))}))}write({entityName:e,id:t,entity:r}){return s(this,void 0,void 0,(function*(){const n=f(e);if(!n)return this.logger.debug("write: Entity is falsy - "+n),Promise.resolve(void 0);const{entities:o={},error:i}=this._readAll(n);if(i&&"ENOENT"!==i.code)throw i;return o[t]=r,this.writeToFile(n,o),Promise.resolve(r)}))}del({entityName:e,id:t}){return s(this,void 0,void 0,(function*(){const r=f(e);if(!r)return this.logger.debug("delete: Entity is falsy - "+r),Promise.resolve(!1);const{entities:n={},error:o}=this._readAll(r);if(o&&"ENOENT"!==o.code)throw o;return!!n[t]?(this.logger.debug(`delete: entity found  for id - ${t}. Deleting`),delete n[t],this.writeToFile(r,n),Promise.resolve(!0)):(this.logger.debug("delete: entity not found"),Promise.resolve(!1))}))}_readAll(e){var t;let r,n;try{const t=c.default.join(this.storeDirectory,`${e}.json`);r=(0,l.existsSync)(t)?(0,l.readFileSync)(t).toString().trim():""}catch(e){const t=(0,d.errorInstance)(e);return this.logger.debug(t.message),{error:t}}if(!r)return{entities:void 0};try{n=null===(t=JSON.parse(r))||void 0===t?void 0:t[e]}catch(e){return{error:(0,d.errorInstance)(e)}}return{entities:n}}writeToFile(e,t){const r=JSON.stringify({[e]:t},null,2),n=h(e);try{(0,l.writeFileSync)(c.default.join(this.storeDirectory,n),r)}catch(e){const t=(0,d.errorInstance)(e);if("ENOENT"!==(null==t?void 0:t.code))throw e;this.logger.debug(`Base directory [${this.storeDirectory}] does not exist, trying to create it`),(0,l.mkdirSync)(this.storeDirectory,{recursive:!0}),(0,l.writeFileSync)(c.default.join(this.storeDirectory,n),r)}}}function f(e){const t=null==e?void 0:e.trim().toLowerCase();return t&&(0,u.plural)(t)}function h(e){return f(e)+".json"}t.getFilesystemWatcherFor=function(e,r,n={}){const o=c.default.join((0,t.basedir)(n),h(e));return(0,l.existsSync)(o)?l.default.watch(o,void 0,(()=>{r(e)})):void console.warn(`File Not Found: ${o}`)},t.getFilesystemStore=function(e,t){return new FilesystemStore(e,t)}},29133:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getHybridStore=void 0;const o=r(62331),i=r(20278),s=r(88515),a=r(96775),c=r(73837);function l(e){return"fiori/v2/"+e}class HybridStore{constructor(e,t={}){this.logger=e,this.filesystem=(0,o.getFilesystemStore)(this.logger,t),this.secureStore=(0,s.getSecureStore)(this.logger)}read({entityName:e,id:t}){return n(this,void 0,void 0,(function*(){const r=yield this.filesystem.read({entityName:e,id:t});r?this.logger.debug(`hybrid/read - id: [${t}], filesystem: ${(0,c.inspect)(r)}`):this.logger.debug(`hybrid/read - id: [${t}], nothing on the filesystem`);const n=yield this.secureStore.retrieve(l(e),t);return n?this.logger.debug(`hybrid/read - id: [${t}]. Found sensitive data in secure store`):this.logger.debug(`hybrid/read - id: [${t}], nothing in the secure store`),r||n?Object.assign(Object.assign({},r),n):void 0}))}getAll({entityName:e}){return n(this,void 0,void 0,(function*(){return Object.values(yield this.readAll({entityName:e}))}))}readAll({entityName:e}){return n(this,void 0,void 0,(function*(){const t={},r=(yield this.filesystem.readAll({entityName:e}))||{},n=(yield this.secureStore.getAll(l(e)))||{};for(const e of new Set([...Object.keys(r),...Object.keys(n)])){const o=Object.assign(Object.assign({},r[e]),n[e]);t[e]=o}return t}))}write({entityName:e,id:t,entity:r}){return n(this,void 0,void 0,(function*(){const n=(0,a.getSerializableProperties)(r),o=(0,a.getSensitiveDataProperties)(r);if(n.length>0&&o.length>0)for(let e=0;e<n.length;e+=1)-1!==o.indexOf(n[e])&&(this.logger.debug(`hybrid/write - [${String(n[e])}] is also marked as sensitive. Not writing to filesystem`),n.splice(e,1));const s=(0,i.pick)(r,...n);s?(this.logger.debug(`hybrid/write - writing serializable properties: ${(0,c.inspect)(s)}`),yield this.filesystem.write({entityName:e,id:t,entity:s})):this.logger.debug(`hybrid/write - no serializable properties found in ${(0,c.inspect)(s)}`);const u=(0,i.pick)(r,...o);return u?(this.logger.debug(`hybrid/write - writing sensitive properties to secure store. ID: [${t}]`),yield this.secureStore.save(l(e),t,u)):this.logger.debug(`hybrid/write - no sensitive properties found in ${(0,c.inspect)(r)}`),r}))}del({entityName:e,id:t}){return n(this,void 0,void 0,(function*(){const r=yield this.filesystem.del({entityName:e,id:t});this.logger.debug(`hybrid/del - delete result for id [${t}] on the filesystem: ${r}`);const n=yield this.secureStore.delete(l(e),t);return this.logger.debug(`hybrid/del - delete result for id [${t}] in the secure store: ${n}`),r||n}))}}t.getHybridStore=function(e,t){return new HybridStore(e,t)}},59500:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilesystemWatcherFor=void 0;var n=r(62331);Object.defineProperty(t,"getFilesystemWatcherFor",{enumerable:!0,get:function(){return n.getFilesystemWatcherFor}})},75754:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApiHubSettingsProvider=void 0;const n=r(29133),o=r(93793),i=r(49053);t.ApiHubSettingsProvider=class{constructor(e,t={}){this.entityName=o.Entities.ApiHub,this.logger=e,this.dataAccessor=(0,n.getHybridStore)(this.logger,t)}read(e){return this.dataAccessor.read({entityName:this.entityName,id:e.getId()})}write(e){return this.dataAccessor.write({entityName:this.entityName,id:i.ApiHubSettingsKey.SINGLETON,entity:e})}delete(e){return this.dataAccessor.del({entityName:this.entityName,id:i.ApiHubSettingsKey.SINGLETON})}getAll(){return this.dataAccessor.getAll({entityName:this.entityName})}}},4814:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SystemDataProvider=void 0;const o=r(29133),i=r(22348),s=r(93793);t.SystemDataProvider=class{constructor(e,t={}){this.entityName=s.Entities.BackendSystem,this.logger=e,this.dataAccessor=(0,o.getHybridStore)(this.logger,t)}read(e){return n(this,void 0,void 0,(function*(){return this.dataAccessor.read({entityName:this.entityName,id:e.getId()})}))}write(e){return n(this,void 0,void 0,(function*(){let t;return t=e instanceof i.BackendSystem?e:new i.BackendSystem(Object.assign({},e)),this.dataAccessor.write({entityName:this.entityName,id:i.BackendSystemKey.from(e).getId(),entity:t})}))}delete(e){return n(this,void 0,void 0,(function*(){return this.dataAccessor.del({entityName:this.entityName,id:i.BackendSystemKey.from(e).getId()})}))}getAll(){var e;return n(this,void 0,void 0,(function*(){const t=yield this.dataAccessor.readAll({entityName:this.entityName});for(const r of Object.keys(t)){const n=t[r];(null===(e=null==n?void 0:n.url)||void 0===e?void 0:e.trim())||(this.logger.warn(`Filtering system with ID [${r}] as it seems corrupt. Run repair`),delete t[r])}return Object.values(t)}))}}},93793:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Entities=void 0,function(e){e.BackendSystem="system",e.SystemMigrationStatus="systemMigrationStatus",e.TelemetrySetting="telemetrySetting",e.ApiHub="apiHub"}(t.Entities||(t.Entities={}))},81436:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryDataProvider=void 0;const n=r(62331),o=r(32702),i=r(93793);t.TelemetryDataProvider=class{constructor(e){this.entityName=i.Entities.TelemetrySetting,this.logger=e,this.dataAccessor=(0,n.getFilesystemStore)(this.logger)}read(e){return this.dataAccessor.read({entityName:this.entityName,id:e.getId()})}write(e){return this.dataAccessor.write({entityName:this.entityName,id:(new o.TelemetrySettingKey).getId(),entity:e})}delete(e){return this.dataAccessor.del({entityName:this.entityName,id:(new o.TelemetrySettingKey).getId()})}getAll(){return this.dataAccessor.getAll({entityName:this.entityName})}}},96775:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSensitiveDataProperties=t.sensitiveData=t.getSerializableProperties=t.serializable=void 0,r(13303);const n=Symbol("serializable");t.serializable=function(e,t){const r=Reflect.getOwnMetadata(n,e.constructor)||new Set;Reflect.defineMetadata(n,r.add(t),e.constructor)},t.getSerializableProperties=function(e){const t=Reflect.getOwnMetadata(n,e.constructor);return t&&Array.from(t.values())||[]};const o=Symbol("sensitive");t.sensitiveData=function(e,t){const r=Reflect.getOwnMetadata(o,e.constructor)||new Set;Reflect.defineMetadata(o,r.add(t),e.constructor)},t.getSensitiveDataProperties=function(e){const t=Reflect.getOwnMetadata(o,e.constructor);return t&&Array.from(t.values())||[]}},6525:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultLogger=void 0;const n=r(27715);t.getDefaultLogger=()=>new n.ToolsLogger({transports:[new n.ConsoleTransport]})},49053:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ApiHubSettingsKey=t.ApiHubSettings=void 0;const i=r(96775);class ApiHubSettings{constructor({apiKey:e}){this.apiKey=e}}n([i.sensitiveData,o("design:type",String)],ApiHubSettings.prototype,"apiKey",void 0),t.ApiHubSettings=ApiHubSettings;class ApiHubSettingsKey{getId(){return ApiHubSettingsKey.SINGLETON}}t.ApiHubSettingsKey=ApiHubSettingsKey,ApiHubSettingsKey.SINGLETON="API_HUB_API_KEY"},22348:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.BackendSystemKey=t.BackendSystem=t.AuthenticationType=void 0;const i=r(96775);!function(e){e.Basic="basic",e.ReentranceTicket="reentranceTicket",e.OAuth2RefreshToken="oauth2",e.OAuth2ClientCredential="oauth2ClientCredential"}(t.AuthenticationType||(t.AuthenticationType={}));class BackendSystem{constructor({name:e,url:t,client:r,serviceKeys:n,refreshToken:o,username:i,password:s,userDisplayName:a,authenticationType:c}){this.name=e,this.url=t,this.client=r,this.serviceKeys=n,this.refreshToken=o,this.username=i,this.password=s,this.userDisplayName=a,this.authenticationType=c}}n([i.serializable,o("design:type",String)],BackendSystem.prototype,"name",void 0),n([i.serializable,o("design:type",String)],BackendSystem.prototype,"url",void 0),n([i.serializable,o("design:type",String)],BackendSystem.prototype,"client",void 0),n([i.serializable,o("design:type",String)],BackendSystem.prototype,"userDisplayName",void 0),n([i.sensitiveData,o("design:type",Object)],BackendSystem.prototype,"serviceKeys",void 0),n([i.sensitiveData,o("design:type",String)],BackendSystem.prototype,"refreshToken",void 0),n([i.sensitiveData,o("design:type",String)],BackendSystem.prototype,"username",void 0),n([i.sensitiveData,o("design:type",String)],BackendSystem.prototype,"password",void 0),n([i.sensitiveData,o("design:type",String)],BackendSystem.prototype,"authenticationType",void 0),t.BackendSystem=BackendSystem;class BackendSystemKey{static from(e){return new BackendSystemKey({url:e.url,client:e.client})}constructor({url:e,client:t}){this.url=e.trim().replace(/\/$/,""),this.client=null==t?void 0:t.trim()}getId(){return this.url+""+(this.client?"/"+this.client:"")}}t.BackendSystemKey=BackendSystemKey},32702:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetrySettingKey=t.TelemetrySetting=void 0;const i=r(96775);class TelemetrySetting{constructor({enableTelemetry:e}){this.enableTelemetry=e}}n([i.serializable,o("design:type",Boolean)],TelemetrySetting.prototype,"enableTelemetry",void 0),t.TelemetrySetting=TelemetrySetting;t.TelemetrySettingKey=class TelemetrySettingKey{getId(){return"telemetrySetting"}}},63118:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.text=t.initI18n=void 0;const i=o(r(35107)),s=o(r(9794)),a=o(r(71017)),c=i.default.createInstance();t.initI18n=function(){return n(this,void 0,void 0,(function*(){yield c.use(s.default).init({initImmediate:!1,fallbackLng:"en",fallbackNS:"default",interpolation:{escapeValue:!1},ns:"ux-store",defaultNS:"ux-store",backend:{loadPath:a.default.join(__dirname,"./translations/{{lng}}.{{ns}}.json")}})}))},t.text=function(e,t){return c.t(e,t)}},36144:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Entity=t.getFilesystemWatcherFor=t.getService=void 0;const s=r(97833);Object.defineProperty(t,"Entity",{enumerable:!0,get:function(){return s.Entity}});const a=r(63118),c=r(82341),l=r(32614),u=r(55037),d=r(6525),p={system:c.getInstance,telemetrySetting:l.getInstance,"api-hub":u.getInstance};t.getService=function({logger:e=(0,d.getDefaultLogger)(),entityName:t,options:r={}}){return i(this,void 0,void 0,(function*(){yield(0,a.initI18n)();const n=p[t];if(n)return n(e,r);throw new Error((0,a.text)("error.unsupportedEntity",{entityName:t}))}))},o(r(83540),t),o(r(22348),t),o(r(32702),t),o(r(49053),t);var f=r(59500);Object.defineProperty(t,"getFilesystemWatcherFor",{enumerable:!0,get:function(){return f.getFilesystemWatcherFor}})},93071:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DummyStore=void 0;t.DummyStore=class DummyStore{constructor(e){this.log=e}save(e,t,n){return r(this,void 0,void 0,(function*(){return this.log.warn(`Dummy store. Trying to save for service: ${e}, key: ${t}`),Promise.resolve(!0)}))}retrieve(e,t){return r(this,void 0,void 0,(function*(){return this.log.warn(`Dummy store. Trying to retrieve for service: ${e}, key: ${t}`),Promise.resolve(void 0)}))}delete(e,t){return r(this,void 0,void 0,(function*(){return this.log.warn(`Dummy store. Trying to delete for service: ${e}, key: ${t}`),Promise.resolve(!0)}))}getAll(e){return r(this,void 0,void 0,(function*(){return this.log.warn(`Dummy store. Trying to get all values for service: [${e}]`),Promise.resolve({})}))}}},88515:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.getSecureStore=void 0;const i=r(20278),s=r(93071),a=r(769);t.getSecureStore=e=>{if((0,i.isAppStudio)())return new s.DummyStore(e);{const t=function(e){var t,n;try{return r(74602)}catch(o){let s;e.warn((0,i.errorString)(o)),e.warn("Could not \"require('keytar')\". Trying VSCode's copy");try{s=r(66828)}catch(t){return e.warn((0,i.errorString)(t)),void e.warn("Could not get hold of vscode")}try{return r(42041)(`${null===(t=null==s?void 0:s.env)||void 0===t?void 0:t.appRoot}/node_modules.asar/keytar`)}catch(t){e.warn((0,i.errorString)(t)),e.warn("Could not get keytar from vscode node_modules.asar")}try{return r(97719)(`${null===(n=null==s?void 0:s.env)||void 0===n?void 0:n.appRoot}/node_modules/keytar`)}catch(t){e.warn((0,i.errorString)(t)),e.warn("Could not get keytar from vscode node_modules")}return}}(e);return t?new a.KeytarStore(e,t):new s.DummyStore(e)}},o(r(19634),t)},769:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.KeytarStore=void 0;const o=r(20278);t.KeytarStore=class KeytarStore{constructor(e,t){this.log=e,this.keytar=t}save(e,t,r){return n(this,void 0,void 0,(function*(){try{const n=JSON.stringify(r);return yield this.keytar.setPassword(e,t,n),!0}catch(r){return this.log.error(`Error saving to secure store. Service: [${e}], key: [${t}]`),this.log.error((0,o.errorString)(r)),!1}}))}retrieve(e,t){return n(this,void 0,void 0,(function*(){try{const r=yield this.keytar.getPassword(e,t);return r&&JSON.parse(r)}catch(r){return this.log.error(`Error retrieving from secure store. Service: [${e}], key: [${t}]`),void this.log.error((0,o.errorString)(r))}}))}delete(e,t){return n(this,void 0,void 0,(function*(){try{return yield this.keytar.deletePassword(e,t)}catch(r){return this.log.error(`Error deleting from secure store. Service: [${e}], key: [${t}]`),this.log.error((0,o.errorString)(r)),!1}}))}getAll(e){return n(this,void 0,void 0,(function*(){try{return(yield this.keytar.findCredentials(e)).reduce(((e,t)=>{try{e[String(t.account)]=JSON.parse(t.password)}catch(e){this.log.error(`Error parsing credentials for [${t.account}]`)}return e}),{})}catch(t){return this.log.error(`Error getting values for service: [${e}]`),this.log.error((0,o.errorString)(t)),{}}}))}}},19634:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},55037:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(21274),t)},56665:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.migrateToLatestVersion=t.LEGACY_API_HUB_API_KEY=t.LEGACY_API_HUB_API_SERVICE=void 0;const o=r(63118),i=r(49053);t.LEGACY_API_HUB_API_SERVICE="fiori/system/apiHub",t.LEGACY_API_HUB_API_KEY="API_HUB_API_KEY",t.migrateToLatestVersion=function({dataProvider:e,secureStore:r,logger:s}){return n(this,void 0,void 0,(function*(){const n=yield r.retrieve(t.LEGACY_API_HUB_API_SERVICE,t.LEGACY_API_HUB_API_KEY);if(!n)return void s.debug((0,o.text)("info.noLegacyApiHubKeyFound"));s.info((0,o.text)("info.legacyApiHubKeyFound"));(yield e.read(new i.ApiHubSettingsKey))?s.info((0,o.text)("info.legacyApiHubKeyNotMigrated")):(yield e.write(new i.ApiHubSettings({apiKey:n})),s.info((0,o.text)("info.legacyApiHubKeyMigrated"))),yield r.delete(t.LEGACY_API_HUB_API_SERVICE,t.LEGACY_API_HUB_API_KEY),s.info((0,o.text)("info.legacyApiHubKeyDeleted"))}))}},21274:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getInstance=t.ApiHubSettingsService=void 0;const o=r(88515),i=r(75754),s=r(49053),a=r(56665);class ApiHubSettingsService{constructor(e){this.migrationDone=!1,this.key=new s.ApiHubSettingsKey,this.logger=e,this.dataProvider=new i.ApiHubSettingsProvider(this.logger)}migrate(){return n(this,void 0,void 0,(function*(){this.migrationDone||(this.secureStore||(this.secureStore=(0,o.getSecureStore)(this.logger)),yield(0,a.migrateToLatestVersion)({logger:this.logger,secureStore:this.secureStore,dataProvider:this.dataProvider}),this.migrationDone=!0)}))}partialUpdate(){return n(this,void 0,void 0,(function*(){throw yield this.migrate(),new Error("NOT IMPLEMENTED")}))}read(){return n(this,void 0,void 0,(function*(){return yield this.migrate(),this.dataProvider.read(this.key)}))}write(e){return n(this,void 0,void 0,(function*(){return yield this.migrate(),this.dataProvider.write(e)}))}delete(e){return n(this,void 0,void 0,(function*(){return yield this.migrate(),this.dataProvider.delete(e)}))}getAll(){return n(this,void 0,void 0,(function*(){return yield this.migrate(),this.dataProvider.getAll()}))}}t.ApiHubSettingsService=ApiHubSettingsService,t.getInstance=function(e){return new ApiHubSettingsService(e)}},82341:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getInstance=t.SystemService=void 0;const o=r(4814),i=r(22348),s=r(63118);class SystemService{constructor(e,t={}){this.logger=e,this.dataProvider=new o.SystemDataProvider(this.logger,t)}partialUpdate(e,t){return n(this,void 0,void 0,(function*(){this.validatePartialUpdateInput(t);const r=yield this.readOrThrow(e),n=this.mergeProperties(t,r);return this.write(n)}))}mergeProperties(e,t){const r=Object.assign({},e);delete r.url,delete r.client;const n=Object.assign(Object.assign({},t),r);return new i.BackendSystem(Object.assign({},n))}readOrThrow(e){return n(this,void 0,void 0,(function*(){const t=yield this.read(e);if(!t)throw new Error((0,s.text)("error.systemDoesNotExist",{system:e}));return t}))}validatePartialUpdateInput(e){if(!e||!Object.keys(e).length)throw new Error((0,s.text)("error.noPropertiesSpecified"))}read(e){return n(this,void 0,void 0,(function*(){return this.dataProvider.read(e)}))}write(e){return n(this,void 0,void 0,(function*(){return this.dataProvider.write(e)}))}delete(e){return n(this,void 0,void 0,(function*(){return this.dataProvider.delete(e)}))}getAll(){return n(this,void 0,void 0,(function*(){return this.dataProvider.getAll()}))}}t.SystemService=SystemService,t.getInstance=function(e,t={}){return new SystemService(e,t)}},83540:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApiHubSettingsService=t.SystemService=void 0;var n=r(82341);Object.defineProperty(t,"SystemService",{enumerable:!0,get:function(){return n.SystemService}});var o=r(55037);Object.defineProperty(t,"ApiHubSettingsService",{enumerable:!0,get:function(){return o.ApiHubSettingsService}})},32614:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getInstance=t.TelemetrySettingService=void 0;const o=r(81436);class TelemetrySettingService{constructor(e){this.logger=e,this.dataProvider=new o.TelemetryDataProvider(this.logger)}partialUpdate(){return n(this,void 0,void 0,(function*(){throw new Error("NOT IMPLEMENTED")}))}read(e){return n(this,void 0,void 0,(function*(){return this.dataProvider.read(e)}))}write(e){return n(this,void 0,void 0,(function*(){return this.dataProvider.write(e)}))}delete(e){return n(this,void 0,void 0,(function*(){return this.dataProvider.delete(e)}))}getAll(){return n(this,void 0,void 0,(function*(){return this.dataProvider.getAll()}))}}t.TelemetrySettingService=TelemetrySettingService,t.getInstance=function(e){return new TelemetrySettingService(e)}},88714:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.isAppStudio=t.ENV=void 0,function(e){e.PROXY_URL="HTTP_PROXY",e.H2O_URL="H2O_URL"}(r=t.ENV||(t.ENV={})),t.isAppStudio=function(){return!!process.env[r.H2O_URL]}},20278:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getFioriToolsDirectory=t.FioriToolsSettings=t.errorString=t.errorInstance=t.pick=void 0;const s=r(22037),a=i(r(71017));var c;t.pick=(e,...t)=>e&&(null==t?void 0:t.length)>0&&t.reduce(((t,r)=>(t[r]=e[r],t)),{})||void 0,t.errorInstance=function(e){return e instanceof Error?e:new Error(String(e))},t.errorString=function(e){return e instanceof Error?e.message:String(e)},function(e){e.dir=".fioritools"}(c=t.FioriToolsSettings||(t.FioriToolsSettings={}));t.getFioriToolsDirectory=()=>a.default.join((0,s.homedir)(),c.dir),o(r(88714),t)},31480:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ENV=void 0,function(e){e.PROXY_URL="HTTP_PROXY",e.H2O_URL="H2O_URL"}(t.ENV||(t.ENV={}))},10555:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.listDestinations=t.getDestinationUrlForAppStudio=t.getCredentialsForDestinationService=t.getAppStudioProxyURL=t.isAppStudio=t.BAS_DEST_INSTANCE_CRED_HEADER=void 0;const i=o(r(94486)),s=r(75836),a=r(31480);t.BAS_DEST_INSTANCE_CRED_HEADER="bas-destination-instance-cred",t.isAppStudio=function(){return!!process.env[a.ENV.H2O_URL]},t.getAppStudioProxyURL=function(){return process.env[a.ENV.PROXY_URL]},t.getCredentialsForDestinationService=function(e){var t,r;return n(this,void 0,void 0,(function*(){try{const n=yield(0,s.cfGetInstanceKeyParameters)(e);if(!n)throw new Error(`No destination instance ${e} found`);const o=n.credentials;if(!o)throw new Error(`No credentials for destination instance ${e} found`);const i=(null===(t=o.uaa)||void 0===t?void 0:t.clientid)||o.clientid,a=(null===(r=o.uaa)||void 0===r?void 0:r.clientsecret)||o.clientsecret;return Buffer.from(`${encodeURIComponent(i)}:${encodeURIComponent(a)}`).toString("base64")}catch(t){throw new Error(`An error occurred while retrieving service key for the destination instance ${e}: ${t}`)}}))},t.getDestinationUrlForAppStudio=function(e,t){const r=`https://${e}.dest`;return t&&t.length>1?new URL(t,r).toString():r},t.listDestinations=function(){return n(this,void 0,void 0,(function*(){const e={};yield i.default.get("/reload",{baseURL:process.env[a.ENV.PROXY_URL]});const t=yield i.default.get("/api/listDestinations",{baseURL:process.env[a.ENV.H2O_URL]});return(Array.isArray(t.data)?t.data:[]).forEach((t=>{t.WebIDEEnabled&&(e[t.Name]=t)})),e}))}},99504:(e,t)=>{var r,n;function o(e){var t;return Boolean((null===(t=e.WebIDEUsage)||void 0===t?void 0:t.includes(r.ODATA_GENERIC))&&!e.WebIDEUsage.includes(r.ODATA_ABAP))}Object.defineProperty(t,"__esModule",{value:!0}),t.isFullUrlDestination=t.isPartialUrlDestination=t.isGenericODataDestination=t.isAbapEnvironmentOnBtp=t.isAbapSystem=t.WebIDEAdditionalData=t.WebIDEUsage=void 0,function(e){e.ODATA_GENERIC="odata_gen",e.ODATA_ABAP="odata_abap",e.DEV_ABAP="dev_abap",e.ABAP_CLOUD="abap_cloud"}(r=t.WebIDEUsage||(t.WebIDEUsage={})),function(e){e.FULL_URL="full_url",e.API_MGMT="api_mgmt"}(n=t.WebIDEAdditionalData||(t.WebIDEAdditionalData={})),t.isAbapSystem=function(e){var t,r;return Boolean((null===(t=e.WebIDEUsage)||void 0===t?void 0:t.includes("abap"))||e["sap-client"]||"abap"===(null===(r=e["sap-platform"])||void 0===r?void 0:r.toLocaleLowerCase()))},t.isAbapEnvironmentOnBtp=function(e){var t,n;return Boolean((null===(t=e.WebIDEUsage)||void 0===t?void 0:t.includes(r.ABAP_CLOUD))||"abap"===(null===(n=e["sap-platform"])||void 0===n?void 0:n.toLocaleLowerCase()))},t.isGenericODataDestination=o,t.isPartialUrlDestination=function(e){var t;return Boolean(!(null===(t=e.WebIDEAdditionalData)||void 0===t?void 0:t.includes(n.FULL_URL))&&o(e))},t.isFullUrlDestination=function(e){var t;return Boolean((null===(t=e.WebIDEAdditionalData)||void 0===t?void 0:t.includes(n.FULL_URL))&&o(e))}},14425:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(10555),t),o(r(99504),t),o(r(57372),t)},57372:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},59896:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.checkCdsUi5PluginEnabled=t.enableCdsUi5Plugin=t.satisfiesMinCdsVersion=void 0;const o=r(71017),i=r(5407),s=r(84659),a=r(21832);var c=r(21832);Object.defineProperty(t,"satisfiesMinCdsVersion",{enumerable:!0,get:function(){return c.satisfiesMinCdsVersion}}),t.enableCdsUi5Plugin=function(e,t){var r;return n(this,void 0,void 0,(function*(){t||(t=(0,s.create)((0,i.create)()));const n=(0,o.join)(e,"package.json"),c=null!==(r=t.readJSON(n))&&void 0!==r?r:{};return(0,a.ensureMinCdsVersion)(c),yield(0,a.enableWorkspaces)(e,c),(0,a.addCdsPluginUi5)(c),t.writeJSON(n,c),t}))},t.checkCdsUi5PluginEnabled=function(e,t){return n(this,void 0,void 0,(function*(){t||(t=(0,s.create)((0,i.create)()));const r=(0,o.join)(e,"package.json");if(!t.exists(r))return!1;const n=t.readJSON(r),{workspaceEnabled:c}=yield(0,a.getWorkspaceInfo)(e,n);return(0,a.hasMinCdsVersion)(n)&&c&&(0,a.hasCdsPluginUi5)(n)}))}},21832:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.hasCdsPluginUi5=t.getWorkspaceInfo=t.satisfiesMinCdsVersion=t.hasMinCdsVersion=t.addCdsPluginUi5=t.enableWorkspaces=t.ensureMinCdsVersion=void 0;const o=r(76027),i=r(9949),s="6.8.2";function a(e){var t,r;return(0,o.gte)(null!==(r=(0,o.coerce)(null===(t=e.dependencies)||void 0===t?void 0:t["@sap/cds"]))&&void 0!==r?r:"0.0.0",s)}function c(e,t){var r;return n(this,void 0,void 0,(function*(){const n=yield(0,i.getCapCustomPaths)(e),o=n.app.endsWith("/")?`${n.app}*`:`${n.app}/*`;return{appWorkspace:o,workspaceEnabled:(null!==(r=l(t))&&void 0!==r?r:[]).includes(o)}}))}function l(e){var t,r;let n;return Array.isArray(e.workspaces)?n=e.workspaces:Array.isArray(null===(t=e.workspaces)||void 0===t?void 0:t.packages)&&(n=null===(r=e.workspaces)||void 0===r?void 0:r.packages),n}function u(e){var t;return!!(null===(t=e.devDependencies)||void 0===t?void 0:t["cds-plugin-ui5"])}t.ensureMinCdsVersion=function(e){var t;a(e)||(null!==(t=e.dependencies)&&void 0!==t||(e.dependencies={}),e.dependencies["@sap/cds"]="^6.8.2")},t.enableWorkspaces=function(e,t){var r;return n(this,void 0,void 0,(function*(){const{appWorkspace:n,workspaceEnabled:o}=yield c(e,t);if(o)return;let i=l(t);i||(null!==(r=t.workspaces)&&void 0!==r||(t.workspaces=[]),Array.isArray(t.workspaces)?i=t.workspaces:(t.workspaces.packages=[],i=t.workspaces.packages)),i.push(n)}))},t.addCdsPluginUi5=function(e){var t;u(e)||(null!==(t=e.devDependencies)&&void 0!==t||(e.devDependencies={}),e.devDependencies["cds-plugin-ui5"]="^0.6.13")},t.hasMinCdsVersion=a,t.satisfiesMinCdsVersion=function(e){var t,r;return a(e)||(0,o.satisfies)(s,null!==(r=null===(t=e.dependencies)||void 0===t?void 0:t["@sap/cds"])&&void 0!==r?r:"0.0.0")},t.getWorkspaceInfo=c,t.hasCdsPluginUi5=u},49339:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.satisfiesMinCdsVersion=t.enableCdsUi5Plugin=t.checkCdsUi5PluginEnabled=void 0;var n=r(59896);Object.defineProperty(t,"checkCdsUi5PluginEnabled",{enumerable:!0,get:function(){return n.checkCdsUi5PluginEnabled}}),Object.defineProperty(t,"enableCdsUi5Plugin",{enumerable:!0,get:function(){return n.enableCdsUi5Plugin}}),Object.defineProperty(t,"satisfiesMinCdsVersion",{enumerable:!0,get:function(){return n.satisfiesMinCdsVersion}})},83836:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileName=void 0,t.FileName={AdaptationConfig:"config.json",ExtConfigJson:".extconfig.json",Manifest:"manifest.json",ManifestAppDescrVar:"manifest.appdescr_variant",MtaYaml:"mta.yaml",Package:"package.json",Pom:"pom.xml",Tsconfig:"tsconfig.json",Ui5Yaml:"ui5.yaml",Ui5LocalYaml:"ui5-local.yaml",Ui5MockYaml:"ui5-mock.yaml",UI5DeployYaml:"ui5-deploy.yaml"}},29856:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.fileExists=t.readJSON=t.readFile=void 0;const o=r(57147);function i(e,t){return n(this,void 0,void 0,(function*(){return t?t.read(e):o.promises.readFile(e,{encoding:"utf8"})}))}t.readFile=i,t.readJSON=function(e,t){return n(this,void 0,void 0,(function*(){return t?t.readJSON(e):JSON.parse(yield i(e))}))},t.fileExists=function(e,t){return n(this,void 0,void 0,(function*(){try{return t?t.exists(e):(yield o.promises.access(e),!0)}catch(e){return!1}}))}},20760:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getFilePaths=t.findFileUp=t.findFilesByExtension=t.findFiles=t.findBy=void 0;const i=r(71017),s=o(r(23719)),a=r(29856),c=r(57147);function l(e){return new Promise(((t,r)=>{const n=[],o=Array.isArray(e.fileNames)?e.fileNames:[],a=Array.isArray(e.extensionNames)?e.extensionNames:[],c=Array.isArray(e.excludeFolders)?e.excludeFolders:[],l=(0,s.default)(e.root);l.on("directory",((e,t,r)=>{const n=(0,i.basename)(e);c.includes(n)&&r()})),l.on("file",(e=>{(a.includes((0,i.extname)(e))||o.includes((0,i.basename)(e)))&&n.push(e)})),l.on("end",(()=>{let r=n;if(e.memFs){const{modified:t,deleted:s}=function(e,t,r){const n=[],o=[],s=Object.keys(e).filter((e=>t.includes((0,i.basename)(e))||r.includes((0,i.extname)(e))));for(const t of s)"deleted"===e[t].state&&n.push((0,i.join)(t)),"modified"===e[t].state&&o.push((0,i.join)(t));return{deleted:n,modified:o}}(e.memFs.dump(""),o,a);r=Array.from(new Set([...n,...t])).filter((e=>!s.includes(e)))}t(r)})),l.on("error",(e=>{r(e)}))}))}t.findBy=l,t.findFiles=function(e,t,r,o){return n(this,void 0,void 0,(function*(){return(yield l({fileNames:[e],root:t,excludeFolders:r,memFs:o})).map((e=>(0,i.dirname)(e)))}))},t.findFilesByExtension=function(e,t,r,n){return l({extensionNames:[e],root:t,excludeFolders:r,memFs:n})},t.findFileUp=function e(t,r,o){return n(this,void 0,void 0,(function*(){const n=(0,i.join)(r,t);return(yield(0,a.fileExists)(n,o))?n:(0,i.dirname)(r)!==r?e(t,(0,i.dirname)(r),o):void 0}))},t.getFilePaths=function e(t){return n(this,void 0,void 0,(function*(){const r=(yield c.promises.readdir(t)).map((r=>n(this,void 0,void 0,(function*(){const n=(0,i.join)(t,r);return(yield c.promises.stat(n)).isDirectory()?e(n):n})))),o=yield Promise.all(r);return[].concat(...o)}))}},81236:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilePaths=t.findFileUp=t.findFilesByExtension=t.findFiles=t.findBy=t.readJSON=t.readFile=t.fileExists=void 0;var n=r(29856);Object.defineProperty(t,"fileExists",{enumerable:!0,get:function(){return n.fileExists}}),Object.defineProperty(t,"readFile",{enumerable:!0,get:function(){return n.readFile}}),Object.defineProperty(t,"readJSON",{enumerable:!0,get:function(){return n.readJSON}});var o=r(20760);Object.defineProperty(t,"findBy",{enumerable:!0,get:function(){return o.findBy}}),Object.defineProperty(t,"findFiles",{enumerable:!0,get:function(){return o.findFiles}}),Object.defineProperty(t,"findFilesByExtension",{enumerable:!0,get:function(){return o.findFilesByExtension}}),Object.defineProperty(t,"findFileUp",{enumerable:!0,get:function(){return o.findFileUp}}),Object.defineProperty(t,"getFilePaths",{enumerable:!0,get:function(){return o.getFilePaths}})},9949:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.getFilePaths=t.readUi5Yaml=t.readCapServiceMetadataEdmx=t.loadModuleFromProject=t.isCapNodeJsProject=t.isCapJavaProject=t.getWebappPath=t.getNodeModulesPath=t.getMtaPath=t.getCapProjectType=t.getCapModelAndServices=t.getCapEnvironment=t.getCapCustomPaths=t.getAppProgrammingLanguage=t.getAppRootFromWebappPath=t.findProjectRoot=t.findFioriArtifacts=t.findCapProjects=t.findAllApps=t.FileName=void 0;var i=r(83836);Object.defineProperty(t,"FileName",{enumerable:!0,get:function(){return i.FileName}});var s=r(9096);Object.defineProperty(t,"findAllApps",{enumerable:!0,get:function(){return s.findAllApps}}),Object.defineProperty(t,"findCapProjects",{enumerable:!0,get:function(){return s.findCapProjects}}),Object.defineProperty(t,"findFioriArtifacts",{enumerable:!0,get:function(){return s.findFioriArtifacts}}),Object.defineProperty(t,"findProjectRoot",{enumerable:!0,get:function(){return s.findProjectRoot}}),Object.defineProperty(t,"getAppRootFromWebappPath",{enumerable:!0,get:function(){return s.getAppRootFromWebappPath}}),Object.defineProperty(t,"getAppProgrammingLanguage",{enumerable:!0,get:function(){return s.getAppProgrammingLanguage}}),Object.defineProperty(t,"getCapCustomPaths",{enumerable:!0,get:function(){return s.getCapCustomPaths}}),Object.defineProperty(t,"getCapEnvironment",{enumerable:!0,get:function(){return s.getCapEnvironment}}),Object.defineProperty(t,"getCapModelAndServices",{enumerable:!0,get:function(){return s.getCapModelAndServices}}),Object.defineProperty(t,"getCapProjectType",{enumerable:!0,get:function(){return s.getCapProjectType}}),Object.defineProperty(t,"getMtaPath",{enumerable:!0,get:function(){return s.getMtaPath}}),Object.defineProperty(t,"getNodeModulesPath",{enumerable:!0,get:function(){return s.getNodeModulesPath}}),Object.defineProperty(t,"getWebappPath",{enumerable:!0,get:function(){return s.getWebappPath}}),Object.defineProperty(t,"isCapJavaProject",{enumerable:!0,get:function(){return s.isCapJavaProject}}),Object.defineProperty(t,"isCapNodeJsProject",{enumerable:!0,get:function(){return s.isCapNodeJsProject}}),Object.defineProperty(t,"loadModuleFromProject",{enumerable:!0,get:function(){return s.loadModuleFromProject}}),Object.defineProperty(t,"readCapServiceMetadataEdmx",{enumerable:!0,get:function(){return s.readCapServiceMetadataEdmx}}),Object.defineProperty(t,"readUi5Yaml",{enumerable:!0,get:function(){return s.readUi5Yaml}});var a=r(81236);Object.defineProperty(t,"getFilePaths",{enumerable:!0,get:function(){return a.getFilePaths}}),o(r(79197),t)},78932:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.toReferenceUri=t.toAbsoluteUri=t.getCapEnvironment=t.readCapServiceMetadataEdmx=t.getCapModelAndServices=t.getCapCustomPaths=t.getCapProjectType=t.isCapJavaProject=t.isCapNodeJsProject=void 0;const o=r(32081),i=r(71017),s=r(83836),a=r(81236),c=r(7313);function l(e){var t;return!(!e.cds&&!(null===(t=e.dependencies)||void 0===t?void 0:t["@sap/cds"]))}function u(e,t){var r;return n(this,void 0,void 0,(function*(){const n=null!==(r=null==t?void 0:t.srv)&&void 0!==r?r:(yield d(e)).srv;return(0,a.fileExists)((0,i.join)(e,n,"src","main","resources","application.yaml"))}))}function d(e){return n(this,void 0,void 0,(function*(){const t={app:"app/",db:"db/",srv:"srv/"};try{const r=yield h(e);r.folders&&(t.app=r.folders.app,t.db=r.folders.db,t.srv=r.folders.srv)}catch(e){}return t}))}function p(e){var t;return n(this,void 0,void 0,(function*(){const r=yield v(e),n=yield d(e),o=[(0,i.join)(e,n.app),(0,i.join)(e,n.srv),(0,i.join)(e,n.db)],s=yield r.load(o);let a=null!==(t=r.compile.to.serviceinfo(s,{root:e}))&&void 0!==t?t:[];return a.map&&(a=a.map((e=>({name:e.name,urlPath:f(e.urlPath)})))),{model:s,services:a}}))}function f(e){return e.replace(/\\/g,"/").replace(/\/\//g,"/").replace(/(?:^\/)/g,"")}function h(e){return n(this,void 0,void 0,(function*(){return(yield v(e)).env.for("cds",e)}))}function v(e){return n(this,void 0,void 0,(function*(){let t,r,i;try{t=yield(0,c.loadModuleFromProject)(e,"@sap/cds")}catch(e){r=e}if(!t)try{t=yield function(){return n(this,void 0,void 0,(function*(){if(!y){const e=yield function(e){return n(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{let n="";const i=(0,o.spawn)("cds",["--version"],{cwd:e,shell:!0});i.stdout.on("data",(e=>{n+=e.toString()})),i.on("close",(()=>{if(n){const e={};for(const t of n.split("\n").filter((e=>e))){const[r,n]=t.split(": ");e[r]=n}t(e)}else r(new Error("Module path not found"))})),i.on("error",(e=>{r(e)}))}))}))}();if(!e.home)throw Error("Can not find global installation of module @sap/cds, which should be part of @sap/cds-dk");y=e.home}return(0,c.loadModuleFromProject)(y,"@sap/cds")}))}()}catch(e){i=e}if(!t)throw Error(`Could not load cds module. Attempt to load module @sap/cds from project threw error '${r}', attempt to load module @sap/cds from @sap/cds-dk threw error '${i}'`);return"default"in t?t.default:t}))}t.isCapNodeJsProject=l,t.isCapJavaProject=u,t.getCapProjectType=function(e){return n(this,void 0,void 0,(function*(){const t=yield d(e);if(!(yield(0,a.fileExists)((0,i.join)(e,t.srv))))return;if(yield u(e,t))return"CAPJava";let r;try{r=yield(0,a.readJSON)((0,i.join)(e,s.FileName.Package))}catch(e){}return r&&l(r)?"CAPNodejs":void 0}))},t.getCapCustomPaths=d,t.getCapModelAndServices=p,t.readCapServiceMetadataEdmx=function(e,t,r="v4"){return n(this,void 0,void 0,(function*(){try{const{model:n,services:o}=yield p(e),i=function(e,t){const r=f(t).replace(/(?:^\/)|(?:\/$)/g,"");return e.find((e=>e.urlPath.replace(/(?:^\/)|(?:\/$)/g,"")===r))}(o,t);if(!i)throw Error(`Service for uri: '${t}' not found. Available services: ${JSON.stringify(o)}`);const s=yield v(e);return s.compile.to.edmx(n,{service:i.name,version:r})}catch(r){throw Error(`Error while reading CAP service metadata. Path: '${e}', service uri: '${t}', error: '${r.toString()}'}`)}}))},t.getCapEnvironment=h;t.toAbsoluteUri=(e,t)=>(0,i.join)(e,t);function g(e,t){return n(this,void 0,void 0,(function*(){let r="";try{const n=(0,i.normalize)(e+"/"+t+"/package.json"),o=yield(0,a.readFile)(n);if(o){r=JSON.parse(o).name}}catch(e){r=""}return r}))}let y;t.toReferenceUri=(e,r,o)=>n(void 0,void 0,void 0,(function*(){let s="";const a=o.lastIndexOf("node_modules");if(a>=0){const e=o.lastIndexOf(".");s=e>a+13?o.slice(a+13,e):o.slice(a+13)}else if(o.startsWith("../")||o.startsWith("..\\")){const t=yield function(e,t){return n(this,void 0,void 0,(function*(){const r=t.split(i.sep),n={packageName:"",packageFolder:t};for(let t=r.length-1;t>=0&&!n.packageName;t--){const o=r.slice(0,t).join(i.sep);n.packageName=yield g(e,o),n.packageName&&(n.packageFolder=o)}return n}))}(e,o);t.packageName&&(s=t.packageName+o.slice(t.packageFolder.length))}if(!s){const n=(0,i.dirname)((0,t.toAbsoluteUri)(e,r));s=(0,i.relative)(n,(0,t.toAbsoluteUri)(e,o)),s.startsWith(".")||(s="./"+s)}const c=s.lastIndexOf(".")>0?s.slice(s.lastIndexOf(".")+1):"";return["CDS","JSON"].includes(c.toUpperCase())&&(s=s.slice(0,s.length-c.length-1)),s.split(i.sep).join("/")}))},77031:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeModulesPath=t.hasDependency=void 0;const n=r(57147),o=r(71017),i=r(83836);t.hasDependency=(e,t)=>{var r,n;return!(!(null===(r=e.dependencies)||void 0===r?void 0:r[t])&&!(null===(n=e.devDependencies)||void 0===n?void 0:n[t]))},t.getNodeModulesPath=function(e,t){if(!(0,o.isAbsolute)(e))return;const{root:r}=(0,o.parse)(e);let s,a=e;for(;a!==r;){let e=(0,o.join)(a,"node_modules");if(t&&(e=(0,o.join)(e,t,i.FileName.Package)),(0,n.existsSync)(e)){s=a;break}a=(0,o.dirname)(a)}return s}},9096:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMtaPath=t.readUi5Yaml=t.getWebappPath=t.getAppRootFromWebappPath=t.findProjectRoot=t.findFioriArtifacts=t.findCapProjects=t.findAllApps=t.loadModuleFromProject=t.getAppProgrammingLanguage=t.getNodeModulesPath=t.readCapServiceMetadataEdmx=t.getCapEnvironment=t.isCapNodeJsProject=t.isCapJavaProject=t.getCapProjectType=t.getCapModelAndServices=t.getCapCustomPaths=void 0;var n=r(78932);Object.defineProperty(t,"getCapCustomPaths",{enumerable:!0,get:function(){return n.getCapCustomPaths}}),Object.defineProperty(t,"getCapModelAndServices",{enumerable:!0,get:function(){return n.getCapModelAndServices}}),Object.defineProperty(t,"getCapProjectType",{enumerable:!0,get:function(){return n.getCapProjectType}}),Object.defineProperty(t,"isCapJavaProject",{enumerable:!0,get:function(){return n.isCapJavaProject}}),Object.defineProperty(t,"isCapNodeJsProject",{enumerable:!0,get:function(){return n.isCapNodeJsProject}}),Object.defineProperty(t,"getCapEnvironment",{enumerable:!0,get:function(){return n.getCapEnvironment}}),Object.defineProperty(t,"readCapServiceMetadataEdmx",{enumerable:!0,get:function(){return n.readCapServiceMetadataEdmx}});var o=r(77031);Object.defineProperty(t,"getNodeModulesPath",{enumerable:!0,get:function(){return o.getNodeModulesPath}});var i=r(87429);Object.defineProperty(t,"getAppProgrammingLanguage",{enumerable:!0,get:function(){return i.getAppProgrammingLanguage}});var s=r(7313);Object.defineProperty(t,"loadModuleFromProject",{enumerable:!0,get:function(){return s.loadModuleFromProject}});var a=r(54250);Object.defineProperty(t,"findAllApps",{enumerable:!0,get:function(){return a.findAllApps}}),Object.defineProperty(t,"findCapProjects",{enumerable:!0,get:function(){return a.findCapProjects}}),Object.defineProperty(t,"findFioriArtifacts",{enumerable:!0,get:function(){return a.findFioriArtifacts}}),Object.defineProperty(t,"findProjectRoot",{enumerable:!0,get:function(){return a.findProjectRoot}}),Object.defineProperty(t,"getAppRootFromWebappPath",{enumerable:!0,get:function(){return a.getAppRootFromWebappPath}});var c=r(50616);Object.defineProperty(t,"getWebappPath",{enumerable:!0,get:function(){return c.getWebappPath}}),Object.defineProperty(t,"readUi5Yaml",{enumerable:!0,get:function(){return c.readUi5Yaml}});var l=r(71563);Object.defineProperty(t,"getMtaPath",{enumerable:!0,get:function(){return l.getMtaPath}})},87429:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getAppProgrammingLanguage=void 0;const o=r(71017),i=r(83836),s=r(81236),a=r(50616);t.getAppProgrammingLanguage=function(e,t){return n(this,void 0,void 0,(function*(){const r=["node_modules",".git"];let n="";try{const c=yield(0,a.getWebappPath)(e,t);(yield(0,s.fileExists)(c,t))&&((yield(0,s.fileExists)((0,o.join)(e,i.FileName.Tsconfig),t))&&(yield(0,s.findFilesByExtension)(".ts",c,r,t)).length>0?n="TypeScript":(yield(0,s.findFilesByExtension)(".js",c,r,t)).length>0&&(n="JavaScript"))}catch(e){}return n}))}},7313:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.loadModuleFromProject=void 0;const a=r(77031);t.loadModuleFromProject=function(e,t){return s(this,void 0,void 0,(function*(){var n;let o;try{if(!(0,a.getNodeModulesPath)(e,t))throw Error("Path to module not found.");const s=r(89324).resolve(t,{paths:[e]});o=yield(n=s,Promise.resolve().then((()=>i(r(89324)(n)))))}catch(r){throw Error(`Module '${t}' not installed in project '${e}'.\n${r.toString()}`)}return o}))}},71563:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getMtaPath=void 0;const o=r(20760),i=r(83836),s=r(71017);t.getMtaPath=function(e,t){return n(this,void 0,void 0,(function*(){const r=yield(0,o.findFileUp)(i.FileName.MtaYaml,e,t);if(r){return{mtaPath:r,hasRoot:(0,s.dirname)(r)!==e}}}))}},54250:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.findCapProjects=t.findFioriArtifacts=t.findAllApps=t.getAppRootFromWebappPath=t.findProjectRoot=void 0;const o=r(71017),i=r(83836),s=r(81236),a=r(77031),c=r(78932),l=r(50616),u={applications:i.FileName.Manifest,adaptations:i.FileName.ManifestAppDescrVar,extensions:i.FileName.ExtConfigJson,libraries:i.FileName.Manifest},d=[".git","node_modules","dist"];function p(e){let t;var r;return e&&((r=e)&&r.length>0&&void 0!==r[0].uri)?(t=[],e.filter((e=>"file"===e.uri.scheme)).forEach((e=>{t.push(e.uri.fsPath)}))):t=null!=e?e:[],t}function f(e,t=!0,r=!1){return n(this,void 0,void 0,(function*(){const n=yield(0,s.findFileUp)(i.FileName.Package,e);if(!n){if(r)return"";throw new Error(`Could not find any project root for '${e}'. Search was done for ${t?"Fiori elements":"All"} projects.`)}let a=(0,o.dirname)(n);if(t){(yield(0,s.readJSON)(n)).sapux||(a=yield f((0,o.dirname)(a),t,r))}return a}))}function h(e){return n(this,void 0,void 0,(function*(){try{const t=yield f(e,!1);if(!t)return null;const r=yield(0,s.readJSON)((0,o.join)(t,i.FileName.Package));if(r.sapux)return function(e,t,r){if("boolean"==typeof e&&!0===e)return{appRoot:r,projectRoot:r};if(Array.isArray(e)){const n=t.endsWith(o.sep)?t:t+o.sep,i=e.map((e=>(0,o.join)(...e.split(/[\\/]/)))).find((e=>n.startsWith((0,o.join)(r,e)+o.sep)));if(i)return{appRoot:(0,o.join)(r,i),projectRoot:r}}return null}(r.sapux,e,t);if(void 0!==(yield(0,c.getCapProjectType)(t)))return null;if((yield(0,s.fileExists)((0,o.join)(t,i.FileName.Ui5LocalYaml)))&&(0,a.hasDependency)(r,"@sap/ux-ui5-tooling"))return{appRoot:t,projectRoot:t};try{const{root:e}=(0,o.parse)(t);let r=(0,o.dirname)(t);for(;r!==e;){if((yield(0,c.getCapProjectType)(r))&&(0,o.join)(r,"app")!==t)return{appRoot:t,projectRoot:r};r=(0,o.dirname)(r)}}catch(e){}}catch(e){}return null}))}function v(e){return n(this,void 0,void 0,(function*(){const t={},r=function(e){const t=new Set;for(const r of e)u[r]&&t.add(u[r]);return Array.from(t)}(e.artifacts),a=p(e.wsFolders),c={};for(const e of a)try{(yield(0,s.findBy)({fileNames:r,root:e,excludeFolders:d})).forEach((e=>c[e]=null))}catch(e){}return e.artifacts.includes("applications")&&(t.applications=yield function(e){var t;return n(this,void 0,void 0,(function*(){const r=[],n=Object.keys(e).filter((e=>(0,o.basename)(e)===i.FileName.Manifest));for(const a of n)try{null!==(t=e[a])&&void 0!==t||(e[a]=yield(0,s.readJSON)(a));const n=e[a];if(!n["sap.app"]||!n["sap.app"].id||"application"!==n["sap.app"].type)continue;const c=yield h(a);c&&!(yield(0,s.fileExists)((0,o.join)(c.appRoot,".adp",i.FileName.AdaptationConfig)))&&r.push({appRoot:c.appRoot,projectRoot:c.projectRoot,manifest:n,manifestPath:a})}catch(e){}return r}))}(c)),e.artifacts.includes("adaptations")&&(t.adaptations=yield function(e){return n(this,void 0,void 0,(function*(){const t=[],r=Object.keys(e).filter((e=>e.endsWith(i.FileName.ManifestAppDescrVar)));for(const e of r){const r=yield(0,s.findFileUp)(".adp",(0,o.dirname)(e));r&&(yield(0,s.fileExists)((0,o.join)(r,i.FileName.AdaptationConfig)))&&t.push({appRoot:(0,o.dirname)(r),manifestAppdescrVariantPath:e})}return t}))}(c)),e.artifacts.includes("extensions")&&(t.extensions=yield function(e){var t;return n(this,void 0,void 0,(function*(){const r=[],n=Object.keys(e).filter((e=>(0,o.basename)(e)===i.FileName.ExtConfigJson));for(const a of n)try{let n=null,c=Object.keys(e).find((e=>e.startsWith((0,o.dirname)(a)+o.sep)&&(0,o.basename)(e)===i.FileName.Manifest));if(c)null!==(t=e[c])&&void 0!==t||(e[c]=yield(0,s.readJSON)(c)),n=e[c];else{const e=yield(0,s.findBy)({fileNames:[i.FileName.Manifest],root:(0,o.dirname)(a),excludeFolders:d});1===e.length&&([c]=e,n=yield(0,s.readJSON)(c))}c&&n&&r.push({appRoot:(0,o.dirname)(a),manifest:n,manifestPath:c})}catch(e){}return r}))}(c)),e.artifacts.includes("libraries")&&(t.libraries=yield function(e){var t;return n(this,void 0,void 0,(function*(){const r=[],n=Object.keys(e).filter((e=>(0,o.basename)(e)===i.FileName.Manifest));for(const a of n)try{null!==(t=e[a])&&void 0!==t||(e[a]=yield(0,s.readJSON)(a));const n=e[a];if(n["sap.app"]&&"library"===n["sap.app"].type){const e=yield(0,s.findFileUp)(i.FileName.Package,(0,o.dirname)(a)),t=e?(0,o.dirname)(e):null;t&&(yield(0,s.fileExists)((0,o.join)(t,i.FileName.Ui5Yaml)))&&r.push({projectRoot:t,manifestPath:a,manifest:n})}}catch(e){}return r}))}(c)),t}))}t.findProjectRoot=f,t.getAppRootFromWebappPath=function(e){return n(this,void 0,void 0,(function*(){const t=yield(0,s.findFileUp)(i.FileName.Ui5Yaml,e);let r=(0,o.dirname)(e);if(t){const n=(0,o.dirname)(t);(yield(0,l.getWebappPath)(n))===e&&(r=n)}return r}))},t.findAllApps=function(e){var t;return n(this,void 0,void 0,(function*(){const r=yield v({wsFolders:e,artifacts:["applications"]});return null!==(t=r.applications)&&void 0!==t?t:[]}))},t.findFioriArtifacts=v,t.findCapProjects=function(e){return n(this,void 0,void 0,(function*(){const t=new Set,r=["node_modules","dist","src","webapp","MDKModule","gen"],n=[i.FileName.Pom,i.FileName.Package],a=p(e.wsFolders);for(const e of a){const i=yield(0,s.findBy)({fileNames:n,root:e,excludeFolders:r}),a=Array.from(new Set(i.map((e=>(0,o.dirname)(e)))));for(const e of a)void 0!==(yield(0,c.getCapProjectType)(e))&&t.add(e)}return Array.from(t)}))}},50616:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.readUi5Yaml=t.getWebappPath=void 0;const o=r(71017),i=r(50911),s=r(83836),a=r(81236);t.getWebappPath=function(e,t){var r,c;return n(this,void 0,void 0,(function*(){let n=(0,o.join)(e,"webapp");const l=(0,o.join)(e,s.FileName.Ui5Yaml);if(yield(0,a.fileExists)(l,t)){const s=yield(0,a.readFile)(l,t),u=yield i.UI5Config.newInstance(s),d=null===(c=null===(r=u.getConfiguration())||void 0===r?void 0:r.paths)||void 0===c?void 0:c.webapp;d&&(n=(0,o.join)(e,d))}return n}))},t.readUi5Yaml=function(e,t){return n(this,void 0,void 0,(function*(){const r=(0,o.join)(e,t);if(yield(0,a.fileExists)(r)){const e=yield(0,a.readFile)(r);return yield i.UI5Config.newInstance(e)}throw Error(`File '${t}' not found in project '${e}'`)}))}},64251:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},96707:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},79197:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(64251),t),o(r(96707),t),o(r(51215),t),o(r(45952),t),o(r(28341),t),o(r(52910),t)},51215:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},45952:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},28341:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},52910:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},50911:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.YAMLError=t.yamlErrorCode=t.getTypesPackage=t.getTypesVersion=t.getEsmTypesVersion=t.mergeObjects=t.UI5Config=void 0;var n=r(41838);Object.defineProperty(t,"UI5Config",{enumerable:!0,get:function(){return n.UI5Config}});var o=r(64155);Object.defineProperty(t,"mergeObjects",{enumerable:!0,get:function(){return o.mergeObjects}}),Object.defineProperty(t,"getEsmTypesVersion",{enumerable:!0,get:function(){return o.getEsmTypesVersion}}),Object.defineProperty(t,"getTypesVersion",{enumerable:!0,get:function(){return o.getTypesVersion}}),Object.defineProperty(t,"getTypesPackage",{enumerable:!0,get:function(){return o.getTypesPackage}});var i=r(44506);Object.defineProperty(t,"yamlErrorCode",{enumerable:!0,get:function(){return i.errorCode}}),Object.defineProperty(t,"YAMLError",{enumerable:!0,get:function(){return i.YAMLError}})},70332:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMockServerMiddlewareConfig=t.getFioriToolsProxyMiddlewareConfig=t.getAppReloadMiddlewareConfig=void 0,t.getAppReloadMiddlewareConfig=function(){return{name:"fiori-tools-appreload",afterMiddleware:"compression",configuration:{port:35729,path:"webapp",delay:300}}},t.getFioriToolsProxyMiddlewareConfig=function(e,t){const r={name:"fiori-tools-proxy",afterMiddleware:"compression",configuration:{ignoreCertError:!1}};return e&&e.length>0&&(e.forEach((e=>{e.path=e.path||"/"})),r.configuration.backend=e),void 0!==t&&(r.configuration.ui5={path:t.path||["/resources","/test-resources"],url:t.url||"https://ui5.sap.com"},t.version&&(r.configuration.ui5.version=t.version),t.directLoad&&(r.configuration.ui5.directLoad=!0)),{config:r,comments:[{path:"configuration.ignoreCertError",comment:" If set to true, certificate errors will be ignored. E.g. self-signed certificates will be accepted"}]}};t.getMockServerMiddlewareConfig=e=>({name:"sap-fe-mockserver",beforeMiddleware:"csp",configuration:{mountPath:"/",services:[{urlPath:(e=null==e?void 0:e.replace(/\/$/,""))||"",metadataPath:"./webapp/localService/metadata.xml",mockdataPath:"./webapp/localService/data",generateMockData:!0}],annotations:[]}})},41838:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UI5Config=void 0;const o=r(44506),i=r(70332);class UI5Config{static newInstance(e){return n(this,void 0,void 0,(function*(){const t=new UI5Config;return t.document=yield o.YamlDocument.newInstance(e),t}))}getConfiguration(){var e;let t;try{t=this.document.getMap({path:"resources"}).toJSON()}catch(e){t={}}return null!==(e=t.configuration)&&void 0!==e?e:{}}setConfiguration(e){return this.document.setIn({path:"resources",value:{configuration:e}}),this}setMetadata(e){return this.document.setIn({path:"metadata",value:e}),this}setType(e){return this.document.setIn({path:"type",value:e}),this}addUI5Framework(e,t,r,n="sap_fiori_3"){const o=[];for(const e of r)o.push({name:e});return o.push({name:`themelib_${n.replace(/_dark$|_hcw$|_hcb$/,"")}`}),this.document.setIn({path:"framework",value:{name:e,version:t,libraries:o}}),this}addCustomTasks(e,t){for(const r of e)this.document.appendTo({path:"builder.customTasks",value:r,comments:t});return this}addCustomMiddleware(e,t){for(const r of e)this.document.appendTo({path:"server.customMiddleware",value:r,comments:t});return this}addFioriToolsAppReloadMiddleware(){return this.document.appendTo({path:"server.customMiddleware",value:(0,i.getAppReloadMiddlewareConfig)()}),this}addFioriToolsProxydMiddleware(e){const{config:t,comments:r}=(0,i.getFioriToolsProxyMiddlewareConfig)(e.backend,e.ui5);return this.document.appendTo({path:"server.customMiddleware",value:t,comments:r}),this}addBackendToFioriToolsProxydMiddleware(e){const t=this.document.getSequence({path:"server.customMiddleware"}),r=this.document.findItem(t,(e=>"fiori-tools-proxy"===e.name));if(!r)throw new Error("Could not find fiori-tools-proxy");return this.document.getMap({start:r,path:"configuration"}).set("backend",[e]),this}addUi5ToFioriToolsProxydMiddleware(e){const t=this.document.getSequence({path:"server.customMiddleware"}),r=this.document.findItem(t,(e=>"fiori-tools-proxy"===e.name));if(!r)throw new Error("Could not find fiori-tools-proxy");return this.document.getMap({start:r,path:"configuration"}).set("ui5",[e]),this}addMockServerMiddleware(e){return this.document.appendTo({path:"server.customMiddleware",value:(0,i.getMockServerMiddlewareConfig)(e)}),this}addAbapDeployTask(e,t){return this.document.appendTo({path:"builder.resources",value:{excludes:["/test/**","/localService/**"]}}),this.document.appendTo({path:"builder.customTasks",value:{name:"deploy-to-abap",afterTask:"generateCachebusterInfo",configuration:{target:e,app:t}}}),this}removeCustomMiddleware(e){return this.document.deleteAt({path:"server.customMiddleware",matcher:{key:"name",value:e}}),this}removeCustomTask(e){return this.document.deleteAt({path:"builder.customTasks",matcher:{key:"name",value:e}}),this}findCustomActivity(e,t){let r,n;try{r=this.document.getSequence({path:t})}catch(e){}return r&&(n=this.document.findItem(r,(t=>t.name===e))),n?n.toJSON():void 0}findCustomMiddleware(e){return this.findCustomActivity(e,"server.customMiddleware")}findCustomTask(e){return this.findCustomActivity(e,"builder.customTasks")}updateCustomMiddleware(e){const t=e.name;return this.findCustomMiddleware(t)?this.document.updateAt({path:"server.customMiddleware",matcher:{key:"name",value:t},value:e,mode:"overwrite"}):this.addCustomMiddleware([e]),this}toString(){return this.document.toString()}}t.UI5Config=UI5Config},64155:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getTypesPackage=t.getTypesVersion=t.getEsmTypesVersion=t.mergeObjects=void 0;const o=n(r(62910)),i=n(r(76027));t.mergeObjects=function(e,t){return(0,o.default)({},e,t,((e,t)=>e instanceof Array&&t instanceof Array?[...new Set([...e,...t])]:void 0))},t.getEsmTypesVersion=function(e){const t=i.default.coerce(e);return t?i.default.lt(t,"1.94.0")?"~1.94.0":`~${i.default.major(t)}.${i.default.minor(t)}.0`:"~1.108.0"},t.getTypesVersion=function(e){const t=i.default.coerce(e);return t?i.default.lt(t,"1.76.0")?"~1.76.0":`~${i.default.major(t)}.${i.default.minor(t)}.0`:"~1.108.0"},t.getTypesPackage=function(e){var t;const r=null!==(t=i.default.coerce(e))&&void 0!==t?t:i.default.coerce("1.108.0");return r&&i.default.lt(r,"1.113.0")?"@sapui5/ts-types-esm":"@sapui5/types"}},19664:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.YAMLError=t.errorTemplate=t.errorCode=void 0;const n=r(72956);Object.defineProperty(t,"YAMLError",{enumerable:!0,get:function(){return n.YAMLError}}),t.errorCode=Object.freeze({yamlParsing:"yamlParsing",nodeNotFound:"nodeNotFound",nodeNotFoundMatching:"nodeNotFoundMatching",nodeNotAMap:"nodeNotAMap",propertyNotFound:"propertyNotFound",pathCannotBeEmpty:"pathCannotBeEmpty",pathDoesNotExist:"pathDoesNotExist",seqDoesNotExist:"seqDoesNotExist",tryingToAppendToNonSequence:"tryingToAppendToNonSequence",startNodeMustBeCollection:"startNodeMustBeCollection",scalarValuesDoNotHaveProperties:"scalarValuesDoNotHaveProperties"}),t.errorTemplate=Object.freeze({yamlParsing:"Error parsing YAML document",nodeNotFound:"Node not found at path: [{{- path }}]",nodeNotFoundMatching:"Node not found at path: [{{- path }}, matching [{{- key }} = {{- value }}]",nodeNotAMap:"Node path: [{{- path }}, matching [{{- key }} = {{- value }}], is not a map",propertyNotFound:"Node not found at path: [{{- path }}]",pathCannotBeEmpty:"Path cannot be empty",pathDoesNotExist:"Parent node does not exist at: [{{- path }}]",seqDoesNotExist:"Sequence does not exist at: [{{- path }}]",tryingToAppendToNonSequence:"Cannot append to non-sequence at: [{{- path }}]",startNodeMustBeCollection:"Starting node must be an array or an object",scalarValuesDoNotHaveProperties:"Scalar values do not have properties"})},72956:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.YAMLError=void 0;class YAMLError extends Error{constructor(e,t){super(e),this.code=t,this.name=this.constructor.name}}t.YAMLError=YAMLError},44506:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.YAMLError=t.errorCode=t.YAMLMap=t.YAMLSeq=t.YamlDocument=void 0;var n=r(8238);Object.defineProperty(t,"YamlDocument",{enumerable:!0,get:function(){return n.YamlDocument}});var o=r(52375);Object.defineProperty(t,"YAMLSeq",{enumerable:!0,get:function(){return o.YAMLSeq}}),Object.defineProperty(t,"YAMLMap",{enumerable:!0,get:function(){return o.YAMLMap}});var i=r(19664);Object.defineProperty(t,"errorCode",{enumerable:!0,get:function(){return i.errorCode}}),Object.defineProperty(t,"YAMLError",{enumerable:!0,get:function(){return i.YAMLError}})},84010:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.interpolate=void 0,t.interpolate=function(e,t){try{return t?null==e?void 0:e.replace(/{{-?([^{}]*)}}/g,((e,r)=>{var n;const o=null==r?void 0:r.trim();return(null===(n=t[o])||void 0===n?void 0:n.toString())||e})):e}catch(e){return""}}},8238:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.YamlDocument=void 0;const c=i(r(52375)),l=a(r(9458)),u=r(19664),d=r(84010);class YamlDocument{static newInstance(e){return s(this,void 0,void 0,(function*(){return new YamlDocument(e)}))}constructor(e){this.documents=c.default.parseAllDocuments(e),0===this.documents.length&&this.documents.push(c.default.parseDocument(e));const t=this.documents.filter((e=>e.errors.length>0));if(t.length>0)throw new u.YAMLError(u.errorTemplate.yamlParsing+"\n"+t.map((e=>e.errors.map((e=>e.message)).join(""))),u.errorCode.yamlParsing)}toString(){return this.documents.map((e=>e.toString({singleQuote:!0}))).join("")}addDocumentComment({comment:e,location:t="beginning"}){switch(t){case"beginning":this.documents[0].commentBefore=e;break;case"end":this.documents[0].comment=e}return this}setIn({path:e,value:t,createIntermediateKeys:r,comment:n}){const o=this.toPathArray(e);if(o.length>1){const e=o.slice(0,-1);if(!this.documents[0].getIn(e)&&!r)throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.pathDoesNotExist,{path:e}),u.errorCode.pathDoesNotExist)}const i=this.documents[0].createNode(t);return n&&(i.commentBefore=n),this.documents[0].setIn(o,i),this}appendTo({path:e,value:t,createIntermediateKeys:r=!0,nodeComment:n,comments:o}){const i=this.toPathArray(e),s=this.documents[0].clone();let a=s.getIn(i);if(a){if(!(0,c.isSeq)(a))throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.tryingToAppendToNonSequence,{path:e}),u.errorCode.tryingToAppendToNonSequence)}else{if(!r)throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.seqDoesNotExist,{path:e}),u.errorCode.seqDoesNotExist);a=new c.YAMLSeq,s.setIn(i,a)}const l=s.createNode(t);if(n&&(l.commentBefore=n),a.items.push(l),o&&o.length>0){if("object"!=typeof t)throw new u.YAMLError(u.errorTemplate.scalarValuesDoNotHaveProperties,u.errorCode.scalarValuesDoNotHaveProperties);const e=a.items.length-1;for(const t of o){const r=this.toPathArray(t.path),n=s.getIn([...i,e,...r],!0);if(!n)throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.propertyNotFound,{path:t.path}),u.errorCode.propertyNotFound);n.comment=t.comment}}return this.documents[0]=s,this}updateAt({path:e,matcher:t,value:r,mode:n="merge"}){const o=this.toPathArray(e),i=this.documents[0].getIn(o);if(!i)throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.seqDoesNotExist,{path:e}),u.errorCode.seqDoesNotExist);const s=i.items.find((e=>e.toJSON()[t.key]===t.value));if(!s)throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.nodeNotFoundMatching,{path:e,key:t.key,value:t.value}),u.errorCode.nodeNotFoundMatching);const a="merge"===n?(0,l.default)(s.toJSON(),r):r,c=this.documents[0].createNode(a);return i.items.splice(i.items.indexOf(s),1,c),this}deleteAt({path:e,matcher:t}){const r=this.toPathArray(e),n=this.documents[0].getIn(r);if(!n||!n.items)throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.seqDoesNotExist,{path:e}),u.errorCode.seqDoesNotExist);if(!n.items.find(((e,r)=>e.toJSON()[t.key]===t.value&&(n.items.splice(r,1),!0))))throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.propertyNotFound,{path:e}),u.errorCode.propertyNotFound);return this}getNode({start:e,path:t}){if(e&&!(0,c.isSeq)(e)&&!(0,c.isMap)(e))throw new u.YAMLError(u.errorTemplate.startNodeMustBeCollection,u.errorCode.startNodeMustBeCollection);const r=this.toPathArray(t),n=e||this.documents[0],o=null==n?void 0:n.getIn(r);if(o)return o;throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.nodeNotFound,{path:t}),u.errorCode.nodeNotFound)}getSequence({start:e,path:t}){const r=this.getNode({start:e,path:t});if((0,c.isSeq)(r))return r;throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.seqDoesNotExist,{path:t}),u.errorCode.seqDoesNotExist)}getMap({start:e,path:t}){const r=this.getNode({start:e,path:t});if((0,c.isMap)(r))return r;throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.nodeNotAMap,{path:t}),u.errorCode.nodeNotAMap)}findItem(e,t){return e.items.find((e=>{return t(void 0!==(r=e)&&"function"==typeof r.toJSON&&r.toJSON.call(r)||{});var r}))}toPathArray(e){const t=null==e?void 0:e.toString().split(".").filter((e=>""!==e));if(!t||0===t.length)throw new u.YAMLError(u.errorTemplate.pathCannotBeEmpty,u.errorCode.pathCannotBeEmpty);return t}}t.YamlDocument=YamlDocument},72272:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.YAMLError=t.errorTemplate=t.errorCode=void 0;const n=r(73548);Object.defineProperty(t,"YAMLError",{enumerable:!0,get:function(){return n.YAMLError}}),t.errorCode=Object.freeze({yamlParsing:"yamlParsing",nodeNotFound:"nodeNotFound",nodeNotFoundMatching:"nodeNotFoundMatching",nodeNotAMap:"nodeNotAMap",propertyNotFound:"propertyNotFound",pathCannotBeEmpty:"pathCannotBeEmpty",pathDoesNotExist:"pathDoesNotExist",seqDoesNotExist:"seqDoesNotExist",tryingToAppendToNonSequence:"tryingToAppendToNonSequence",startNodeMustBeCollection:"startNodeMustBeCollection",scalarValuesDoNotHaveProperties:"scalarValuesDoNotHaveProperties"}),t.errorTemplate=Object.freeze({yamlParsing:"Error parsing YAML document",nodeNotFound:"Node not found at path: [{{- path }}]",nodeNotFoundMatching:"Node not found at path: [{{- path }}, matching [{{- key }} = {{- value }}]",nodeNotAMap:"Node path: [{{- path }}, matching [{{- key }} = {{- value }}], is not a map",propertyNotFound:"Node not found at path: [{{- path }}]",pathCannotBeEmpty:"Path cannot be empty",pathDoesNotExist:"Parent node does not exist at: [{{- path }}]",seqDoesNotExist:"Sequence does not exist at: [{{- path }}]",tryingToAppendToNonSequence:"Cannot append to non-sequence at: [{{- path }}]",startNodeMustBeCollection:"Starting node must be an array or an object",scalarValuesDoNotHaveProperties:"Scalar values do not have properties"})},73548:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.YAMLError=void 0;class YAMLError extends Error{constructor(e,t){super(e),this.code=t,this.name=this.constructor.name}}t.YAMLError=YAMLError},38703:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.YAMLError=t.errorCode=t.YAMLMap=t.YAMLSeq=t.YamlDocument=void 0;var n=r(13911);Object.defineProperty(t,"YamlDocument",{enumerable:!0,get:function(){return n.YamlDocument}});var o=r(52375);Object.defineProperty(t,"YAMLSeq",{enumerable:!0,get:function(){return o.YAMLSeq}}),Object.defineProperty(t,"YAMLMap",{enumerable:!0,get:function(){return o.YAMLMap}});var i=r(72272);Object.defineProperty(t,"errorCode",{enumerable:!0,get:function(){return i.errorCode}}),Object.defineProperty(t,"YAMLError",{enumerable:!0,get:function(){return i.YAMLError}})},35887:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.interpolate=void 0,t.interpolate=function(e,t){try{return t?null==e?void 0:e.replace(/{{-?([^{}]*)}}/g,((e,r)=>{var n;const o=null==r?void 0:r.trim();return(null===(n=t[o])||void 0===n?void 0:n.toString())||e})):e}catch(e){return""}}},13911:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.YamlDocument=void 0;const c=i(r(52375)),l=a(r(9458)),u=r(72272),d=r(35887);class YamlDocument{static newInstance(e){return s(this,void 0,void 0,(function*(){return new YamlDocument(e)}))}constructor(e){this.documents=c.default.parseAllDocuments(e),0===this.documents.length&&this.documents.push(c.default.parseDocument(e));const t=this.documents.filter((e=>e.errors.length>0));if(t.length>0)throw new u.YAMLError(u.errorTemplate.yamlParsing+"\n"+t.map((e=>e.errors.map((e=>e.message)).join(""))),u.errorCode.yamlParsing)}toString(){return this.documents.map((e=>e.toString({singleQuote:!0}))).join("")}addDocumentComment({comment:e,location:t="beginning"}){switch(t){case"beginning":this.documents[0].commentBefore=e;break;case"end":this.documents[0].comment=e}return this}setIn({path:e,value:t,createIntermediateKeys:r,comment:n}){const o=this.toPathArray(e);if(o.length>1){const e=o.slice(0,-1);if(!this.documents[0].getIn(e)&&!r)throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.pathDoesNotExist,{path:e}),u.errorCode.pathDoesNotExist)}const i=this.documents[0].createNode(t);return n&&(i.commentBefore=n),this.documents[0].setIn(o,i),this}appendTo({path:e,value:t,createIntermediateKeys:r=!0,nodeComment:n,comments:o}){const i=this.toPathArray(e),s=this.documents[0].clone();let a=s.getIn(i);if(a){if(!(0,c.isSeq)(a))throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.tryingToAppendToNonSequence,{path:e}),u.errorCode.tryingToAppendToNonSequence)}else{if(!r)throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.seqDoesNotExist,{path:e}),u.errorCode.seqDoesNotExist);a=new c.YAMLSeq,s.setIn(i,a)}const l=s.createNode(t);if(n&&(l.commentBefore=n),a.items.push(l),o&&o.length>0){if("object"!=typeof t)throw new u.YAMLError(u.errorTemplate.scalarValuesDoNotHaveProperties,u.errorCode.scalarValuesDoNotHaveProperties);const e=a.items.length-1;for(const t of o){const r=this.toPathArray(t.path),n=s.getIn([...i,e,...r],!0);if(!n)throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.propertyNotFound,{path:t.path}),u.errorCode.propertyNotFound);n.comment=t.comment}}return this.documents[0]=s,this}updateAt({path:e,matcher:t,value:r,mode:n="merge"}){const o=this.toPathArray(e),i=this.documents[0].getIn(o);if(!i)throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.seqDoesNotExist,{path:e}),u.errorCode.seqDoesNotExist);const s=i.items.find((e=>e.toJSON()[t.key]===t.value));if(!s)throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.nodeNotFoundMatching,{path:e,key:t.key,value:t.value}),u.errorCode.nodeNotFoundMatching);const a="merge"===n?(0,l.default)(s.toJSON(),r):r,c=this.documents[0].createNode(a);return i.items.splice(i.items.indexOf(s),1,c),this}deleteAt({path:e,matcher:t}){const r=this.toPathArray(e),n=this.documents[0].getIn(r);if(!n||!n.items)throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.seqDoesNotExist,{path:e}),u.errorCode.seqDoesNotExist);if(!n.items.find(((e,r)=>e.toJSON()[t.key]===t.value&&(n.items.splice(r,1),!0))))throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.propertyNotFound,{path:e}),u.errorCode.propertyNotFound);return this}getNode({start:e,path:t}){if(e&&!(0,c.isSeq)(e)&&!(0,c.isMap)(e))throw new u.YAMLError(u.errorTemplate.startNodeMustBeCollection,u.errorCode.startNodeMustBeCollection);const r=this.toPathArray(t),n=e||this.documents[0],o=null==n?void 0:n.getIn(r);if(o)return o;throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.nodeNotFound,{path:t}),u.errorCode.nodeNotFound)}getSequence({start:e,path:t}){const r=this.getNode({start:e,path:t});if((0,c.isSeq)(r))return r;throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.seqDoesNotExist,{path:t}),u.errorCode.seqDoesNotExist)}getMap({start:e,path:t}){const r=this.getNode({start:e,path:t});if((0,c.isMap)(r))return r;throw new u.YAMLError((0,d.interpolate)(u.errorTemplate.nodeNotAMap,{path:t}),u.errorCode.nodeNotAMap)}findItem(e,t){return e.items.find((e=>{return t(void 0!==(r=e)&&"function"==typeof r.toJSON&&r.toJSON.call(r)||{});var r}))}toPathArray(e){const t=null==e?void 0:e.toString().split(".").filter((e=>""!==e));if(!t||0===t.length)throw new u.YAMLError(u.errorTemplate.pathCannotBeEmpty,u.errorCode.pathCannotBeEmpty);return t}}t.YamlDocument=YamlDocument},10923:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AbapServiceProvider=void 0;const o=r(8982),i=r(88457),s=r(12034),a=r(66657),c=r(52800),l=r(92659),u=r(10428),d=r(98942),p=r(91578);class AbapServiceProvider extends o.ServiceProvider{user(){var e;return Promise.resolve(null===(e=this.defaults.auth)||void 0===e?void 0:e.username)}setAtoInfo(e){this.atoSettings=e}getAtoInfo(){return n(this,void 0,void 0,(function*(){if(this.atoSettings)return this.atoSettings;let e;try{e=yield this.getAdtService(p.AtoService),this.atoSettings=e?yield e.getAtoInfo():{}}catch(e){this.atoSettings={}}return this.atoSettings}))}set publicUrl(e){this._publicUrl=e}get publicUrl(){return this._publicUrl||this.defaults.baseURL}isS4Cloud(){return n(this,void 0,void 0,(function*(){if(void 0===this.s4Cloud)try{const e=yield this.getAtoInfo();this.s4Cloud=e.tenantType===d.TenantType.Customer&&"C"===e.operationsType&&!0===e.isExtensibilityDevelopmentSystem&&""!==e.developmentPrefix&&""!==e.developmentPackage}catch(e){this.log.warn("Failed to detect whether this is an SAP S/4HANA Cloud system or not."),this.s4Cloud=!1}return this.s4Cloud}))}getAdtCatalogService(){if(!this.services[u.AdtCatalogService.ADT_DISCOVERY_SERVICE_PATH]){const e=this.createService(u.AdtCatalogService.ADT_DISCOVERY_SERVICE_PATH,u.AdtCatalogService);this.services[u.AdtCatalogService.ADT_DISCOVERY_SERVICE_PATH]=e}return this.services[u.AdtCatalogService.ADT_DISCOVERY_SERVICE_PATH]}catalog(e){var t,r;let n;if(e===c.ODataVersion.v2)n=null!==(t=this.services[i.V2CatalogService.PATH])&&void 0!==t?t:this.createService(i.V2CatalogService.PATH,i.V2CatalogService);else{if(e!==c.ODataVersion.v4)throw new Error("not implemented yet");n=null!==(r=this.services[i.V4CatalogService.PATH])&&void 0!==r?r:this.createService(i.V4CatalogService.PATH,i.V4CatalogService)}return Object.defineProperty(n,"isS4Cloud",{get:this.isS4Cloud.bind(this)}),n}getUi5AbapRepository(e){const t=null!=e?e:s.Ui5AbapRepositoryService.PATH;return this.services[t]||(this.services[t]=this.createService(t,s.Ui5AbapRepositoryService)),this.services[t]}getAppIndex(){return this.services[a.AppIndexService.PATH]||(this.services[a.AppIndexService.PATH]=this.createService(a.AppIndexService.PATH,a.AppIndexService)),this.services[a.AppIndexService.PATH]}getLayeredRepository(){return this.services[l.LayeredRepositoryService.PATH]||(this.services[l.LayeredRepositoryService.PATH]=this.createService(l.LayeredRepositoryService.PATH,l.LayeredRepositoryService)),this.services[l.LayeredRepositoryService.PATH]}getAdtService(e){return n(this,void 0,void 0,(function*(){const t=e.name;if(!this.services[t]){const r=this.getAdtCatalogService(),n=yield r.getServiceDefinition(e.getAdtCatagory());if(!n)return null;this.services[t]=this.createService(n.href,e),this.services[t].attachAdtSchema(n)}return this.services[t]}))}}t.AbapServiceProvider=AbapServiceProvider},10428:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AdtCatalogService=void 0;const o=r(94486),i=r(57424),s=r(66292);class AdtCatalogService extends o.Axios{constructor(){super(...arguments),this.schemaStore=new i.AdtSchemaStore}getServiceDefinition(e){return n(this,void 0,void 0,(function*(){yield this.checkOrLoadAdtDiscoverySchema();const t=this.schemaStore.getAdtCollection(e);return this.validateServiceSchema(e,t)?t:(this.log.warn("Invalid Discovery Schema"),null)}))}validateServiceSchema(e,t){return t?!!t.href||(this.log.warn(`Empty href in schema: ${e.term} - ${e.scheme}`),!1):(this.log.warn(`Schema Not Found: ${e.term} - ${e.scheme}`),!1)}checkOrLoadAdtDiscoverySchema(){return n(this,void 0,void 0,(function*(){if(!this.schemaStore.isAdtSchemaEmpty())return;const e=yield this.get("",{headers:{Accept:"application/*"}}),t=this.parseAdtSchemaData(e.data);this.schemaStore.updateSchemaData(t)}))}parseAdtSchemaData(e){if(!0!==s.XMLValidator.validate(e))return null;const t=new s.XMLParser({attributeNamePrefix:"",ignoreAttributes:!1,ignoreNameSpace:!0,parseAttributeValue:!0,removeNSPrefix:!0}).parse(e,!0);return t.service?t:null}}t.AdtCatalogService=AdtCatalogService,AdtCatalogService.ADT_DISCOVERY_SERVICE_PATH="/sap/bc/adt/discovery"},57424:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdtSchemaStore=void 0;t.AdtSchemaStore=class AdtSchemaStore{getAdtCollection(e){if(!this.adtSchema)return null;const t=this.serializeAdtCategory(e);return this.adtSchema[t]}updateSchemaData(e){if(e){this.adtSchema={};const t=e.service.workspace;for(const e of t){const t=e.collection;if(t)if(Array.isArray(t))t.forEach((t=>{t.workspaceTitle=e.title;const r=this.serializeAdtCategory(t.category);this.adtSchema[r]=t}));else{const e=t,r=this.serializeAdtCategory(e.category);this.adtSchema[r]=t}}}}isAdtSchemaEmpty(){return!this.adtSchema}serializeAdtCategory(e){return`${e.scheme},${e.term}`}}},59554:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(10428),t),o(r(91578),t)},16167:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdtService=void 0;const n=r(94486);class AdtService extends n.Axios{static getAdtCatagory(){throw new Error("NEEDS TO BE IMPLEMENTED BY AdtService SUBCLASSES")}attachAdtSchema(e){this.serviceSchema=e}}t.AdtService=AdtService},39152:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AtoService=void 0;const o=r(16167),i=r(66292);class AtoService extends o.AdtService{static getAdtCatagory(){return AtoService.adtCategory}getAtoInfo(){return n(this,void 0,void 0,(function*(){const e=yield this.get("",{headers:{Accept:"application/*"}});return this.parseAtoResponse(e.data)}))}parseAtoResponse(e){if(!0!==i.XMLValidator.validate(e))return this.log.warn(`Invalid XML: ${e}`),{};const t=new i.XMLParser({attributeNamePrefix:"",ignoreAttributes:!1,ignoreNameSpace:!0,parseAttributeValue:!0,removeNSPrefix:!0}).parse(e,!0);return t.settings?t.settings:{}}}t.AtoService=AtoService,AtoService.adtCategory={scheme:"http://www.sap.com/adt/categories/ato",term:"settings"}},44944:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FileStoreService=void 0;const o=r(16167),i=r(66292);class FileStoreService extends o.AdtService{static getAdtCatagory(){return FileStoreService.adtCategory}getAppArchiveContent(e,t,r=""){return n(this,void 0,void 0,(function*(){const n={headers:{Accept:"application/xml","Content-Type":"folder"===e?"application/atom+xml":"application/octet-stream"}};if(r&&!r.startsWith("/"))throw new Error('Input argument "path" needs to start with /');const o=encodeURIComponent(`${t}${r}`),i=yield this.get(`/${o}/content`,n);return this.parseArchiveContentResponse(t,i.data,e)}))}parseArchiveContentResponse(e,t,r){if("file"===r)return t;if(!0!==i.XMLValidator.validate(t))throw new Error("Invalid XML content");const n=new i.XMLParser({attributeNamePrefix:"",ignoreAttributes:!1,ignoreNameSpace:!0,parseAttributeValue:!0,removeNSPrefix:!0}).parse(t,!0);let o=[];return(null==n?void 0:n.feed)&&(o=Array.isArray(n.feed.entry)?n.feed.entry:[n.feed.entry]),o.map((t=>({basename:t.title.split("/").pop(),path:t.title.substring(e.length),type:t.category.term})))}}t.FileStoreService=FileStoreService,FileStoreService.adtCategory={scheme:"http://www.sap.com/adt/categories/filestore",term:"filestore-ui5-bsp"}},91578:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileStoreService=t.ListPackageService=t.TransportRequestService=t.TransportChecksService=t.AtoService=t.AdtService=void 0;var n=r(16167);Object.defineProperty(t,"AdtService",{enumerable:!0,get:function(){return n.AdtService}});var o=r(39152);Object.defineProperty(t,"AtoService",{enumerable:!0,get:function(){return o.AtoService}});var i=r(75199);Object.defineProperty(t,"TransportChecksService",{enumerable:!0,get:function(){return i.TransportChecksService}});var s=r(52599);Object.defineProperty(t,"TransportRequestService",{enumerable:!0,get:function(){return s.TransportRequestService}});var a=r(55751);Object.defineProperty(t,"ListPackageService",{enumerable:!0,get:function(){return a.ListPackageService}});var c=r(44944);Object.defineProperty(t,"FileStoreService",{enumerable:!0,get:function(){return c.FileStoreService}})},55751:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ListPackageService=void 0;const o=r(16167),i=r(66292);class ListPackageService extends o.AdtService{static getAdtCatagory(){return ListPackageService.adtCategory}listPackages(e){return n(this,void 0,void 0,(function*(){const{maxResults:t=50,phrase:r=""}=e,n={headers:{Accept:"application/xml"},params:{operation:"quickSearch",query:`${r}*`,useSearchProvider:"X",maxResults:t,objectType:"DEVC/K"}},o=yield this.get("",n);return this.parsePackageListResponse(o.data)}))}parsePackageListResponse(e){var t;if(!0!==i.XMLValidator.validate(e))return this.log.warn(`Invalid XML: ${e}`),[];const r=new i.XMLParser({attributeNamePrefix:"",ignoreAttributes:!1,ignoreNameSpace:!0,parseAttributeValue:!0,removeNSPrefix:!0}).parse(e,!0);let n=[];return(null===(t=null==r?void 0:r.objectReferences)||void 0===t?void 0:t.objectReference)&&(n=Array.isArray(r.objectReferences.objectReference)?r.objectReferences.objectReference:[r.objectReferences.objectReference]),n.map((e=>e.name))}}t.ListPackageService=ListPackageService,ListPackageService.adtCategory={scheme:"http://www.sap.com/adt/categories/respository",term:"search"}},75199:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TransportChecksService=void 0;const a=r(16167),c=r(98942),l=r(66292),u=i(r(51484)),d=r(29294);class TransportChecksService extends a.AdtService{static getAdtCatagory(){return TransportChecksService.adtCategory}getTransportRequests(e,t){return s(this,void 0,void 0,(function*(){const r=`\n                <?xml version="1.0" encoding="UTF-8"?>\n                <asx:abap xmlns:asx="http://www.sap.com/abapxml" version="1.0">\n                    <asx:values>\n                        <DATA>\n                        <PGMID/>\n                        <OBJECT/>\n                        <OBJECTNAME/>\n                        <DEVCLASS>${e}</DEVCLASS>\n                        <SUPER_PACKAGE/>\n                        <OPERATION>I</OPERATION>\n                        <URI>/sap/bc/adt/filestore/ui5-bsp/objects/${encodeURIComponent(t)}/$create</URI>\n                        </DATA>\n                    </asx:values>\n                </asx:abap>\n            `,n=yield this.post("",r,{headers:{Accept:"application/vnd.sap.as+xml; dataname=com.sap.adt.transport.service.checkData","content-type":"application/vnd.sap.as+xml; charset=UTF-8; dataname=com.sap.adt.transport.service.checkData"}});return this.getTransportRequestList(n.data)}))}getTransportRequestList(e){var t;if(!0!==l.XMLValidator.validate(e))return this.log.warn(`Invalid XML: ${e}`),[];const r=(new d.DOMParser).parseFromString(e);return"S"===(null===(t=u.select1("//RESULT/text()",r))||void 0===t?void 0:t.toString())?this.getTransportList(r):(this.log.warn(`Error or unkown response content: ${e}`),[])}getTransportList(e){var t,r,n;const o=null===(t=u.select1("//RECORDING/text()",e))||void 0===t?void 0:t.toString(),i=null===(r=u.select1("//LOCKS",e))||void 0===r?void 0:r.textContent,s=null===(n=u.select1("//DLVUNIT/text()",e))||void 0===n?void 0:n.toString();if(o&&!i)return this.getTransportListForNewProject(e);if(i)return this.getLockedTransport(e);if(c.LocalPackageText.includes(s))return[];throw new Error("Unable to parse ADT response")}getTransportListForNewProject(e){const t=u.select("//REQ_HEADER",e),r=[];if(t&&t.length>0)for(const e of t){const t=this.convertTransportRequest(e);t&&r.push(t)}return r}getLockedTransport(e){const t=u.select1("//LOCKS//REQ_HEADER",e),r=this.convertTransportRequest(t);return r?[r]:[]}convertTransportRequest(e){var t,r,n,o,i;if(!e)return;const s=null===(t=u.select1("TRKORR/text()",e))||void 0===t?void 0:t.toString();return s?{transportNumber:s,user:null===(r=u.select1("AS4USER/text()",e))||void 0===r?void 0:r.toString(),description:null===(n=u.select1("AS4TEXT/text()",e))||void 0===n?void 0:n.toString(),client:null===(o=u.select1("CLIENT/text()",e))||void 0===o?void 0:o.toString(),targetSystem:null===(i=u.select1("TARSYSTEM/text()",e))||void 0===i?void 0:i.toString()}:void 0}}t.TransportChecksService=TransportChecksService,TransportChecksService.adtCategory={scheme:"http://www.sap.com/adt/categories/cts",term:"transportchecks"}},52599:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TransportRequestService=void 0;const o=r(16167);class TransportRequestService extends o.AdtService{static getAdtCatagory(){return TransportRequestService.adtCategory}createTransportRequest(e){return n(this,void 0,void 0,(function*(){const t=`\n                <?xml version="1.0" encoding="UTF-8"?>\n                <asx:abap xmlns:asx="http://www.sap.com/abapxml" version="1.0">\n                    <asx:values>\n                        <DATA>\n                            <OPERATION>I</OPERATION>\n                            <DEVCLASS>${e.packageName}</DEVCLASS>\n                            <REQUEST_TEXT>${e.description}</REQUEST_TEXT>\n                            <REF>/sap/bc/adt/filestore/ui5-bsp/objects/${e.ui5AppName}/$create</REF>\n                        </DATA>\n                    </asx:values>\n                </asx:abap>\n            `,r=yield this.post("",t,{headers:{Accept:"text/plain","content-type":"application/vnd.sap.as+xml; charset=UTF-8; dataname=com.sap.adt.CreateCorrectionRequest"}});return this.getTransportNumberFromResponse(r.data)}))}getTransportNumberFromResponse(e){const t="/com.sap.cts/object_record/";if(e&&e.startsWith(t)){return e.replace(t,"")}return null}}t.TransportRequestService=TransportRequestService,TransportRequestService.adtCategory={scheme:"http://www.sap.com/adt/categories/cts",term:"transports"}},66657:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AppIndexService=void 0;const o=r(94486);class AppIndexService extends o.Axios{search(e={},t){return n(this,void 0,void 0,(function*(){const r=Object.assign({},e);t&&(r.fields=t.join(","));const n=yield this.get("/",{params:r});return JSON.parse(n.data).results}))}}t.AppIndexService=AppIndexService,AppIndexService.PATH="/sap/bc/ui2/app_index"},31323:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CatalogService=void 0;const o=r(52800);class CatalogService extends o.ODataService{listServices(){return n(this,void 0,void 0,(function*(){return this.services||(this.services=yield this.fetchServices()),this.services}))}}t.CatalogService=CatalogService},88457:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(31323),t),o(r(80829),t),o(r(55825),t)},80829:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.V2CatalogService=void 0;const o=r(31323),i=r(52800),s=r(412),a="ServiceCollection",c="RecommendedServiceCollection";class V2CatalogService extends o.CatalogService{determineEntitySet(){return n(this,void 0,void 0,(function*(){const e=yield this.document();this.entitySet=e.EntitySets.includes(c)?c:a}))}mapServices(e){return e.map((e=>({id:e.ID,name:e.TechnicalServiceName,path:new URL(e.ServiceUrl).pathname,serviceVersion:e.TechnicalServiceVersion+"",odataVersion:i.ODataVersion.v2})))}fetchServices(){return n(this,void 0,void 0,(function*(){const e={$format:"json"};this.entitySet||(yield this.determineEntitySet()),this.entitySet===a&&(yield this.isS4Cloud)&&(e.$filter="((IsSapService%20eq%20true)and(ReleaseStatus%20eq%20%27RELEASED%27))or((IsSapService%20eq%20false))");const t=(yield this.get(`/${this.entitySet}`,{params:e})).odata();if(s.ODataRequestError.containsError(t))throw new s.ODataRequestError(t);return this.mapServices(t)}))}findService({title:e,path:t}){return n(this,void 0,void 0,(function*(){let r=1;if(!e){const n=t.replace(/\/$/,"").split("/").pop().split(";");if(!(e=n[0].toUpperCase()))throw new Error(`Cannot determine service title from path: ${t}`);n.slice(1).forEach((e=>{const[t,n]=e.split("=");"v"===t&&(r=parseInt(n,10))}))}const n={$format:"json",$filter:`Title eq '${e}' and TechnicalServiceVersion eq ${r}`},o=(yield this.get(`/${this.entitySet}`,{params:n})).odata();if(o.length>1){const r=o.filter((r=>{var n;return null===(n=r.ServiceUrl)||void 0===n?void 0:n.toUpperCase().includes((t||e).toUpperCase())}));if(r.length>1)this.log.warn("Service filter was not sufficient to identify one service.");else if(r.length>0)return this.log.info(`Service filter chose service: ${r[0].TechnicalServiceName}`),r[0]}return o.length>0?o[0]:void 0}))}getServiceAnnotations({id:e,title:t,path:r}){return n(this,void 0,void 0,(function*(){if(this.entitySet||(yield this.determineEntitySet()),!e){const n=yield this.findService({title:t,path:r});n&&(e=n.ID)}if(e){return(yield this.get(`/${this.entitySet}('${encodeURIComponent(e)}')/Annotations`,{params:{$format:"json"}})).odata()}return[]}))}getAnnotations({id:e,title:t,path:r}){return n(this,void 0,void 0,(function*(){if(!e&&!t&&!r)throw new Error("No filter parameters passed in");const n=yield this.getServiceAnnotations({id:e,title:t,path:r}),o=[];for(const e of n){const t=`/Annotations(TechnicalName='${encodeURIComponent(e.TechnicalName)}',Version='${e.Version}')/$value/`,r=yield this.get(t,{headers:{Accept:"application/xml"}});r.data?o.push({TechnicalName:e.TechnicalName,Version:e.Version,Definitions:r.data,Uri:this.defaults.baseURL+t}):this.log.warn(`No annotations found for TechnicalName=${e.TechnicalName}, Version=${e.Version}`)}return o}))}}t.V2CatalogService=V2CatalogService,V2CatalogService.PATH="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2"},55825:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.V4CatalogService=void 0;const o=r(31323),i=r(52800),s=r(412);class V4CatalogService extends o.CatalogService{mapServices(e,t){const r=[];return e.filter((e=>{var r,n;return(null===(n=null===(r=null==e?void 0:e.DefaultSystem)||void 0===r?void 0:r[t])||void 0===n?void 0:n.length)>0})).forEach((e=>{r.push(...e.DefaultSystem[t].map((t=>({id:t.ServiceId,group:e.GroupId,path:t.ServiceUrl.split("?").shift(),name:`${e.GroupId} > ${t.ServiceAlias||t.ServiceId}`,serviceVersion:t.ServiceVersion,odataVersion:i.ODataVersion.v4}))))})),r}fetchServices(){const e=Object.create(null,{get:{get:()=>super.get}});return n(this,void 0,void 0,(function*(){if(void 0===this.entitySet){const e=yield this.metadata();this.entitySet=e.includes('Name="RecommendedServices"')?"RecommendedServices":"Services"}const t={$count:!0,$expand:`DefaultSystem($expand=${this.entitySet})`};let r=yield this.get("/ServiceGroups",{params:t});const n=r.odata()||[];for(;r.data["@odata.nextLink"];){const o=new URL(r.data["@odata.nextLink"]);r=yield e.get.call(this,"/ServiceGroups",{params:Object.assign(Object.assign({},t),o.searchParams)}),n.push(...r.odata())}if(s.ODataRequestError.containsError(n))throw new s.ODataRequestError(n);return this.mapServices(n,this.entitySet)}))}getAnnotations(){return Promise.resolve([])}}t.V4CatalogService=V4CatalogService,V4CatalogService.PATH="/sap/opu/odata4/iwfnd/config/default/iwfnd/catalog/0002"},15297:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.TenantType=t.AppIndexService=t.AbapServiceProvider=t.LayeredRepositoryService=t.Ui5AbapRepositoryService=void 0;var i=r(12034);Object.defineProperty(t,"Ui5AbapRepositoryService",{enumerable:!0,get:function(){return i.Ui5AbapRepositoryService}});var s=r(92659);Object.defineProperty(t,"LayeredRepositoryService",{enumerable:!0,get:function(){return s.LayeredRepositoryService}});var a=r(10923);Object.defineProperty(t,"AbapServiceProvider",{enumerable:!0,get:function(){return a.AbapServiceProvider}});var c=r(66657);Object.defineProperty(t,"AppIndexService",{enumerable:!0,get:function(){return c.AppIndexService}}),o(r(16379),t),o(r(88457),t),o(r(59554),t);var l=r(98942);Object.defineProperty(t,"TenantType",{enumerable:!0,get:function(){return l.TenantType}})},92659:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LayeredRepositoryService=void 0;const o=r(94486),i=r(10030),s=r(57147),a=r(412);function c(e){return"string"!=typeof e?`apps/${e.reference}/appVariants/${e.id}/`:e}const l="/dta_folder/";class LayeredRepositoryService extends o.Axios{mergeAppDescriptorVariant(e){return n(this,void 0,void 0,(function*(){try{const t=yield this.put("/appdescr_variant_preview/",e,{headers:{"Content-Type":"application/zip"}});return JSON.parse(t.data)}catch(e){throw(0,a.isAxiosError)(e)&&this.tryLogResponse(e.response),e}}))}isExistingVariant(e,t="CUSTOMER_BASE"){var r;return n(this,void 0,void 0,(function*(){try{const r=yield this.get(l,{params:{name:c(e),layer:t,timestamp:Date.now()}});return this.tryLogResponse(r),r}catch(e){if((0,a.isAxiosError)(e)&&(this.tryLogResponse(e.response),404===(null===(r=e.response)||void 0===r?void 0:r.status)))return e.response;throw e}}))}deploy(e,t){var r,o;return n(this,void 0,void 0,(function*(){const n=(0,s.readFileSync)(e),i=yield this.isExistingVariant(t.namespace),a={name:c(t.namespace),layer:null!==(r=t.layer)&&void 0!==r?r:"CUSTOMER_BASE"};a.package=null!==(o=t.package)&&void 0!==o?o:"$TMP","$TMP"!==a.package.toUpperCase()&&(a.changelist=t.transport);const u=yield this.request({method:200===i.status?"PUT":"POST",url:l,data:n,params:a,headers:{"Content-Type":"application/octet-stream"}});return this.tryLogResponse(u,"Deployment successful."),u}))}undeploy(e){var t;return n(this,void 0,void 0,(function*(){if(200!==(yield this.isExistingVariant(e.namespace)).status)throw new Error("Undeploy failed because the given project does not exist.");const r={name:c(e.namespace),layer:null!==(t=e.layer)&&void 0!==t?t:"CUSTOMER_BASE"};e.transport&&(r.changelist=e.transport);const n=yield this.delete(l,{params:r});return this.tryLogResponse(n,"Undeployment successful."),n}))}tryLogResponse(e,t){var r;try{const t=e.data?JSON.parse(e.data):{};t.result&&this.logMessage(t.result),(null!==(r=t.messages)&&void 0!==r?r:[]).forEach((e=>{this.logMessage(e)}))}catch(e){t&&this.log.info(t),this.log.warn("Could not parse returned messages.")}}logMessage(e){var t;const r="Error"===e.severity?i.LogLevel.Error:i.LogLevel.Info;this.log.log({level:r,message:e.text}),(null!==(t=e.details)&&void 0!==t?t:[]).forEach((e=>{this.log.log({level:r,message:e})}))}}t.LayeredRepositoryService=LayeredRepositoryService,LayeredRepositoryService.PATH="/sap/bc/lrep"},16379:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.prettyPrintTimeInMs=t.prettyPrintError=t.prettyPrintMessage=void 0;const n=r(57310);function o(e,t,r,n=!1){e?"success"===(e=e.toLowerCase())?r.info(t):("warning"===e&&(e="warn"),r[e](t)):n?r.error(t):r.info(t)}function i({host:e,path:t,log:r}){if(e&&t){const o=new n.URL(e).origin;r.info("Please copy/paste this URL in a browser for more details:"),r.info(new n.URL(t,o).href)}}t.prettyPrintMessage=function({msg:e,log:t,host:r}){try{const n=JSON.parse(e);t.info(n.message),i({host:r,path:n.longtext_url,log:t}),n.details&&n.details.forEach((e=>{o(e.severity,e.message,t)}))}catch(r){t.debug(e)}},t.prettyPrintError=function({error:e,log:t,host:r},n=!0){var s,a,c;if(e&&(n&&t.error((null===(s=e.message)||void 0===s?void 0:s.value)||"An unknown error occurred."),((null===(a=e.innererror)||void 0===a?void 0:a.errordetails)||[]).forEach((e=>{e.message.startsWith("<![CDATA")||o(e.severity,e.message,t,!0),i({host:r,path:e.longtext_url,log:t})})),n&&(null===(c=e.innererror)||void 0===c?void 0:c.Error_Resolution)))for(const r in e.innererror.Error_Resolution)t.error(`${r}: ${e.innererror.Error_Resolution[r]}`)};t.prettyPrintTimeInMs=e=>{const t=e/60/1e3|0;return t>1?`${t} minutes`:1===t?"1 minute":e/1e3+" seconds"}},85875:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalPackageText=t.TenantType=void 0,function(e){e.SAP="SAP",e.Customer="CUSTOMER"}(t.TenantType||(t.TenantType={})),t.LocalPackageText=["LOCAL_PACKAGE","LOCAL"]},98942:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(85875),t)},12034:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Ui5AbapRepositoryService=t.abapUrlReplaceMap=void 0;const o=r(16379),i=r(52800),s=r(412);t.abapUrlReplaceMap=new Map([[/\.abap\./,".abap-web."],[/-api\.s4hana\.ondemand\.com/,".s4hana.ondemand.com"],[/-api\.saps4hanacloud\.cn/,".saps4hanacloud.cn"]]);const a={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"},c=/[<>&"']/g;function l(e){return e.replace(c,(e=>a[e]))}class Ui5AbapRepositoryService extends i.ODataService{constructor(e){var t,r;(e=null!=e?e:{}).headers=null!==(t=e.headers)&&void 0!==t?t:{},e.headers.Accept=null!==(r=e.headers.Accept)&&void 0!==r?r:"application/json,application/xml,text/plain,*/*",super(e),this.publicUrl=e.publicUrl||this.defaults.baseURL}getInfo(e){var t;return n(this,void 0,void 0,(function*(){try{return(yield this.get(`/Repositories('${encodeURIComponent(e)}')`)).odata()}catch(r){if(this.log.debug(`Retrieving application ${e}, ${r}`),(0,s.isAxiosError)(r)&&404===(null===(t=r.response)||void 0===t?void 0:t.status))return;throw r}}))}deploy({archive:e,bsp:t,testMode:r=!1,safeMode:i}){var s,a;return n(this,void 0,void 0,(function*(){const n=yield this.getInfo(t.name),c=this.createPayload(e,t.name,t.description||"Deployed with SAP Fiori tools",n?n.Package:t.package);this.log.debug(`Payload:\n${c}`);const l=this.createConfig(t.transport,r,i),u=this.getAbapFrontendUrl();try{const e=yield this.updateRepoRequest(!!n,t.name,c,l);if((null===(s=null==e?void 0:e.headers)||void 0===s?void 0:s["sap-message"])&&(0,o.prettyPrintMessage)({msg:e.headers["sap-message"],log:this.log,host:u}),r)(0,o.prettyPrintError)({error:this.getErrorMessageFromString(null==e?void 0:e.data),log:this.log,host:u},!1);else{const e="/sap/bc/ui5_ui5"+(t.name.startsWith("/")?"":"/sap/")+t.name.toLowerCase(),r=(null===(a=this.defaults.params)||void 0===a?void 0:a["sap-client"])?"?sap-client="+this.defaults.params["sap-client"]:"";this.log.info(`App available at ${u}${e}${r}`)}return e}catch(e){throw this.logError({error:e,host:u}),e}}))}undeploy({bsp:e,testMode:t=!1}){var r;return n(this,void 0,void 0,(function*(){const n=this.createConfig(e.transport,t),i=this.getAbapFrontendUrl(),s=yield this.getInfo(e.name);try{if(s){const t=yield this.deleteRepoRequest(e.name,n);return(null===(r=null==t?void 0:t.headers)||void 0===r?void 0:r["sap-message"])&&(0,o.prettyPrintMessage)({msg:t.headers["sap-message"],log:this.log,host:i}),t}return void this.log.warn(`Application ${e.name} not found, nothing to undeploy.`)}catch(e){throw this.logError({error:e,host:i}),e}}))}getAbapFrontendUrl(){const e=new URL(this.publicUrl);return t.abapUrlReplaceMap.forEach(((t,r)=>{e.hostname=e.hostname.replace(r,t)})),`${e.protocol}//${e.host}`}createConfig(e,t,r){const n={CodePage:"'UTF8'",CondenseMessagesInHttpResponseHeader:"X",format:"json"};e&&(n.TransportRequest=e),t&&(n.TestMode=!0),void 0!==r&&(n.SafeMode=r);return{headers:{"Content-Type":"application/atom+xml",type:"entry",charset:"UTF8"},params:n,maxBodyLength:Infinity,maxContentLength:Infinity}}createPayload(e,t,r,n){const o=e.toString("base64"),i=(new Date).toISOString(),s=l(t);return`<entry xmlns="http://www.w3.org/2005/Atom"       xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"       xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices"       xml:base="${this.publicUrl}">  <id>${this.publicUrl}/Repositories('${s}')</id>  <title type="text">Repositories('${s}')</title>  <updated>${i}</updated>  <category term="/UI5/ABAP_REPOSITORY_SRV.Repository" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme"/>  <link href="Repositories('${s}')" rel="edit" title="Repository"/>  <content type="application/xml">    <m:properties>      <d:Name>${s}</d:Name>      <d:Package>${null==n?void 0:n.toUpperCase()}</d:Package>      <d:Description>${l(r)}</d:Description>      <d:ZipArchive>${o}</d:ZipArchive>      <d:Info/>    </m:properties>  </content></entry>`}updateRepoRequest(e,t,r,o,i=1){var s,a;return n(this,void 0,void 0,(function*(){try{if(2===i&&this.log.warn("Warning: The application was deployed despite a time out response from the backend. Increasing the value of the HTML5.Timeout property for the destination may solve the issue"),1===i||e||void 0===(yield this.getInfo(t))){this.log.info(`${t} found on target system: ${e}`);return e?yield this.put(`/Repositories('${encodeURIComponent(t)}')`,r,o):yield this.post("/Repositories",r,o)}return Promise.resolve(void 0)}catch(n){if([504,408].includes(null===(s=null==n?void 0:n.response)||void 0===s?void 0:s.status)){if(i>=3)throw n;return this.updateRepoRequest(e,t,r,o,i+1)}if(null===(a=null==o?void 0:o.params)||void 0===a?void 0:a.TestMode)return n.response;throw n}}))}deleteRepoRequest(e,t,r=1){var o;return n(this,void 0,void 0,(function*(){try{return 2===r&&this.log.warn("Warning: retry undeploy to handle a backend rejection..."),yield this.delete(`/Repositories('${e}')`,t)}catch(n){if(400===(null===(o=null==n?void 0:n.response)||void 0===o?void 0:o.status)){if(r>=2)throw n;return this.deleteRepoRequest(e,t,r+1)}throw n}}))}logError({error:e,host:t}){var r,n;if(this.log.error(e.message),(0,s.isAxiosError)(e)&&(null===(r=e.response)||void 0===r?void 0:r.data)){const r=this.getErrorMessageFromString(null===(n=e.response)||void 0===n?void 0:n.data);r?(0,o.prettyPrintError)({error:r,host:t,log:this.log}):this.log.error(e.response.data.toString())}}getErrorMessageFromString(e){let t;if("string"==typeof e)try{const r=JSON.parse(e);r.error&&(t=r.error)}catch(e){}return t}}t.Ui5AbapRepositoryService=Ui5AbapRepositoryService,Ui5AbapRepositoryService.PATH="/sap/opu/odata/UI5/ABAP_REPOSITORY_SRV"},8786:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.attachConnectionHandler=t.Cookies=t.defaultTimeout=t.CSRF=void 0;const o=r(94486),i=n(r(68978));var s;!function(e){e.RequestHeaderName="X-Csrf-Token",e.RequestHeaderValue="Fetch",e.ResponseHeaderName="x-csrf-token"}(s=t.CSRF||(t.CSRF={})),t.defaultTimeout=6e4;function a(e){if(200===(null==e?void 0:e.status)&&("ICFLOGONREQUIRED"===e.headers["sap-err-id"]||function(e){return c(e)&&"string"==typeof e.data&&!!e.data.match(/log[io]n/i)}(e))){const e=new Error;throw e.response={status:401},e.isAxiosError=!0,e.toJSON=()=>({status:401}),e}}function c(e){return(t=e.headers["content-type"],r=e.data,t?t.toLowerCase():"string"==typeof r&&null!==(o=null===(n=(0,i.default)(Buffer.from(r)))||void 0===n?void 0:n.toLowerCase())&&void 0!==o?o:"").startsWith("text/html");var t,r,n,o}t.Cookies=class Cookies{constructor(){this.cookies={}}setCookies(e){var t;return(null===(t=e.headers)||void 0===t?void 0:t["set-cookie"])&&e.headers["set-cookie"].forEach((e=>this.addCookie(e))),this}addCookie(e){var t;const r=e.split(";"),[n,...o]=(null===(t=r[0])||void 0===t?void 0:t.split("="))||[],i=null==o?void 0:o.join("=");return n&&e.indexOf("Max-Age=0")>=0?delete this.cookies[n]:n&&i&&(this.cookies[n]=i),this}toString(){const e=[];return Object.keys(this.cookies).forEach((t=>{e.push(`${t}=${this.cookies[t]}`)})),e.join("; ")}},t.attachConnectionHandler=function(e){const t=e.interceptors.request.use((e=>{var t;return e.headers=null!==(t=e.headers)&&void 0!==t?t:new o.AxiosHeaders,e.headers[s.RequestHeaderName]=s.RequestHeaderValue,e})),r=e.interceptors.response.use((n=>{var o,i,l;return function(e){return 200===(null==e?void 0:e.status)&&c(e)&&"string"==typeof e.data&&!!e.data.match(/saml/i)}(n)&&"disabled"!==(null===(o=e.defaults.params)||void 0===o?void 0:o.saml2)?(e.defaults.params=null!==(i=e.defaults.params)&&void 0!==i?i:{},e.defaults.params.saml2="disabled",e.request(n.config)):(a(n),(null===(l=n.headers)||void 0===l?void 0:l[s.ResponseHeaderName])&&(e.defaults.headers.common[s.RequestHeaderName]=n.headers[s.ResponseHeaderName],e.interceptors.request.eject(t)),e.interceptors.response.eject(r),n)}),(r=>{var n;throw r.response&&((null===(n=r.response.headers)||void 0===n?void 0:n[s.ResponseHeaderName])&&(e.defaults.headers.common[s.RequestHeaderName]=r.response.headers[s.ResponseHeaderName],e.interceptors.request.eject(t)),e.cookies.setCookies(r.response)),r}));e.interceptors.request.use((t=>{var r;return t.headers=null!==(r=t.headers)&&void 0!==r?r:new o.AxiosHeaders,t.headers.cookie=e.cookies.toString(),t})),e.interceptors.response.use((t=>(e.cookies.setCookies(t),t)))}},29629:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UAATimeoutError=t.TimeoutError=t.ConnectionError=t.BaseError=void 0;class BaseError extends Error{constructor(e,t){super(e),this.cause=t,this.name=this.constructor.name}}t.BaseError=BaseError;t.ConnectionError=class ConnectionError extends BaseError{};class TimeoutError extends BaseError{}t.TimeoutError=TimeoutError;t.UAATimeoutError=class UAATimeoutError extends TimeoutError{}},73433:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getReentranceTicketAuthInterceptor=t.attachReentranceTicketAuthInterceptor=t.attachUaaAuthInterceptor=t.attachBasicAuthInterceptor=t.Uaa=void 0;const s=r(94486),a=r(73670),c=r(22260);function l({provider:e,ejectCallback:t}){return r=>i(this,void 0,void 0,(function*(){var n;const{reentranceTicket:o,apiUrl:i}=yield(0,a.getReentranceTicket)({backendUrl:e.defaults.baseURL,logger:e.log});return i&&i!=e.defaults.baseURL&&(e.log.warn(`Replacing provider's default base URL (${e.defaults.baseURL}) with API URL: ${i}`),e.defaults.baseURL=i),r.headers=null!==(n=r.headers)&&void 0!==n?n:new s.AxiosHeaders,r.headers.MYSAPSSO2=o,t(),r}))}Object.defineProperty(t,"Uaa",{enumerable:!0,get:function(){return c.Uaa}}),o(r(8786),t),o(r(29629),t),t.attachBasicAuthInterceptor=function(e){const t=e.interceptors.response.use((r=>(delete e.defaults.auth,e.interceptors.response.eject(t),r)))},t.attachUaaAuthInterceptor=function(e,t,r,n){const o=new c.Uaa(t,e.log);let a;const l=()=>i(this,void 0,void 0,(function*(){var e;return(null===(e=t.uaa)||void 0===e?void 0:e.username)?yield o.getAccessTokenWithClientCredentials():yield o.getAccessToken(r,n)}));e.user=()=>i(this,void 0,void 0,(function*(){return a=null!=a?a:yield l(),o.getUserInfo(a)}));const u=e.interceptors.request.use((t=>i(this,void 0,void 0,(function*(){var i;return a=null!=a?a:yield o.getAccessToken(r,n),t.headers=null!==(i=t.headers)&&void 0!==i?i:new s.AxiosHeaders,t.headers.authorization=`bearer ${a}`,e.interceptors.request.eject(u),t}))))},t.attachReentranceTicketAuthInterceptor=function({provider:e}){let t;t=e.interceptors.request.use(l({provider:e,ejectCallback:()=>e.interceptors.request.eject(t)}))},t.getReentranceTicketAuthInterceptor=l},36189:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Redirect=void 0;class Redirect{constructor(e){this.port=e}url(){return`http://localhost:${this.port}${Redirect.path}`}}t.Redirect=Redirect,Redirect.path="/oauth/client/redirect"},99897:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPSystem=void 0;t.ABAPSystem=class ABAPSystem{constructor(e){this.systemURL=new URL(e)}uiHostname(){if(!this.uiURL){this.uiURL=new URL(this.systemURL.href);const[e,...t]=this.uiURL.hostname.split(".");this.uiURL.hostname=[e.replace(/-api$/,""),...t].join(".")}return this.uiURL.origin}apiHostname(){if(!this.apiURL){this.apiURL=new URL(this.systemURL.href);const[e,...t]=this.apiURL.hostname.split(".");e.endsWith("-api")||(this.apiURL.hostname=[e+"-api",...t].join("."))}return this.apiURL.origin}logoffUrl(){return this.uiHostname()+"/sap/public/bc/icf/logoff"}}},73670:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getReentranceTicket=void 0;const o=r(16711),i=r(8786),s=r(99897),a=r(9601);t.getReentranceTicket=function({backendUrl:e,logger:t,timeout:r=i.defaultTimeout}){return n(this,void 0,void 0,(function*(){return new Promise(((n,i)=>{var c;const l=new s.ABAPSystem(e),{server:u,redirectUrl:d}=(0,a.setupRedirectHandling)({resolve:n,reject:i,timeout:r,backend:l,logger:t});u.listen();const p=u.address().port,f=`${l.uiHostname()}/sap/bc/adt/core/http/reentranceticket?redirect-url=${d(p)}`;null===(c=o(f))||void 0===c||c.catch((e=>t.error(e)))}))}))}},9601:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setupRedirectHandling=void 0;const o=n(r(13685)),i=r(29629),s=r(16379),a=r(91913);t.setupRedirectHandling=function({resolve:e,reject:t,timeout:r,backend:n,logger:c}){const l="/redirect";let u;const d=setTimeout((()=>{null==u||u.close(),t(new i.TimeoutError(`Timeout. Did not get a response within ${(0,s.prettyPrintTimeInMs)(r)}`))}),r);return u=o.default.createServer(((r,o)=>{var s;const p=new URL(r.url,`http://${r.headers.host}`);if(p.pathname===l){d&&clearTimeout(d);const l=null===(s=p.searchParams.get("reentrance-ticket"))||void 0===s?void 0:s.toString();l?(c.debug("Got reentrance ticket: "+l),o.writeHead(200,{"Content-Type":"text/html"}),o.end(Buffer.from((0,a.redirectSuccessHtml)(n.logoffUrl()))),u.close(),e({reentranceTicket:l,apiUrl:n.apiHostname()})):(c.error("Error getting reentrance ticket"),c.debug(r),o.writeHead(500,{"Content-Type":"text/html"}),o.end(Buffer.from((0,a.redirectErrorHtml)())),u.close(),t(new i.ConnectionError("Error getting reentrance ticket")))}})),{server:u,redirectUrl:e=>`http://localhost:${e}/redirect`}}},91913:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.redirectErrorHtml=t.redirectSuccessHtml=void 0;t.redirectSuccessHtml=(e,t)=>r({title:(t?t+": ":"")+"Authentication Successful",content:e?'<a class="centerLink" href="'+e+'">(Click here to log off the current user)</a>':""});function r({title:e,content:t}){return`\n<html>\n\n<head>\n    <meta http-equiv="content-type" content="text/html; charset=windows-1252">\n    <title>${e}</title>\n    <style>\n        body {\n            background: #ffffff;\n            text-align: center;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n\n        .content {\n            display: table;\n            position: absolute;\n            width: 100%;\n            height: 80%;\n        }\n\n        .valigned {\n            display: table-cell;\n            vertical-align: middle;\n        }\n\n        .lowerCenter {\n            display: table-cell;\n            vertical-align: bottom;\n        }\n\n        .footer {\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            width: 100%;\n            z-index: -1;\n        }\n\n        .footerLeft {\n            float: left;\n            margin-left: 20px;\n        }\n\n        .footerRight {\n            float: right;\n            margin-right: 20px;\n            position: absolute;\n            bottom: 0px;\n            right: 0px;\n        }\n\n        .centerText {\n            font-style: normal;\n            font-family: Arial;\n            font-size: 26px;\n            color: #444444;\n            z-index: 1;\n        }\n        .centerLink {\n            font-style: normal;\n            font-family: Arial, Helvetica, sans-serif;\n            font-size: 18px;\n            text-decoration: none;\n            color: #224679;\n        }\n\n        .errorTextHeader {\n            font-style: normal;\n            font-family: Arial;\n            font-size: 40px;\n            color: #444444;\n        }\n\n        .bottomText {\n            align: center;\n            font-style: normal;\n            font-family: Arial;\n            font-size: 14px;\n            color: #444444;\n        }\n\n        .biggerBottomText {\n            align: center;\n            font-style: normal;\n            font-family: Arial;\n            font-size: 16px;\n            color: #444444;\n        }\n\n        .detailTable {\n            align: bottom;\n            vertical-align: middle;\n            margin-left: auto;\n            margin-right: auto;\n            font-style: normal;\n            font-family: Arial;\n            font-size: 16px;\n            color: #444444;\n        }\n    </style>\n</head>\n\n<body>\n    <div class="content">\n        <div class="valigned">\n            <p class="centerText"><span class="errorTextHeader">You can close this tab now.</span></p>\n            ${t}\n        </div>\n    </div>\n    <div class="footer">\n        <div class="footerLeft"><img width='150' height='80' title='' alt='SAP logo'\n                src='data:image/png;base64,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'>\n        </div>\n        <div class="footerRight">\n            <p class="bottomText"><span class="biggerBottomText">&copy;</span>2020 SAP SE, All rights reserved.</p>\n        </div>\n    </div>\n</body>\n\n</html>\n`}t.redirectErrorHtml=e=>r({title:(e?e+": ":"")+"Authentication Successful",content:"Login failed, please check the logs in the console"})},22260:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Uaa=void 0;const i=r(16711),s=o(r(94486)),a=o(r(13685)),c=o(r(52722)),l=r(36189),u=r(16379),d=r(29629),p=r(91913),f=r(8786);t.Uaa=class Uaa{constructor(e,t){this.log=t,this.validatePropertyExists(e.uaa.clientid,"Client ID missing"),this.validatePropertyExists(e.uaa.clientsecret,"Client Secret missing"),this.validatePropertyExists(e.uaa.url,"UAA URL missing"),this.serviceInfo=e}validatePropertyExists(e,t){if(!e)throw Error(t)}get url(){return this.serviceInfo.uaa.url.replace(/\/?$/,"")}get clientid(){return this.serviceInfo.uaa.clientid}get clientsecret(){return this.serviceInfo.uaa.clientsecret}get logoutUrl(){return this.url+"/logout.do"}get systemId(){return this.serviceInfo.systemid}get username(){return this.serviceInfo.uaa.username}get password(){return this.serviceInfo.uaa.password}getAuthCodeUrl({redirectUri:e}){return this.url+"/oauth/authorize?"+c.default.stringify({response_type:"code",redirect_uri:e,client_id:this.clientid})}getTokenRequestForClientCredential(){const e=`${this.clientid}:${this.clientsecret}`;return{url:`${this.url}/oauth/token`,method:"POST",data:c.default.stringify({grant_type:"password",username:this.username,password:this.password}),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:`Basic ${Buffer.from(e).toString("base64")}`}}}getTokenRequestForAuthCode({redirectUri:e,authCode:t}){return{url:`${this.url}/oauth/token`,auth:{username:this.clientid,password:this.clientsecret},method:"POST",data:c.default.stringify({code:t,grant_type:"authorization_code",redirect_uri:e,response_type:"token"}),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}}}getTokenRequestForRefreshToken(e){return{url:`${this.url}/oauth/token`,auth:{username:this.clientid,password:this.clientsecret},method:"POST",data:c.default.stringify({grant_type:"refresh_token",refresh_token:e}),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}}}getUserInfo(e){var t,r;return n(this,void 0,void 0,(function*(){const n=yield s.default.request({url:`${this.url}/userinfo`,method:"GET",headers:{authorization:`bearer ${e}`}});return(null===(t=null==n?void 0:n.data)||void 0===t?void 0:t.email)||(null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.name)}))}getAuthCode(e=f.defaultTimeout){return n(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{var n;let o,s;const c=setTimeout((()=>{null==s||s.close(),r(new d.UAATimeoutError(`Timeout. Did not get a response within ${(0,u.prettyPrintTimeInMs)(e)}`))}),e);s=a.default.createServer(((e,r)=>{const n=new URL(e.url,`http://${e.headers.host}`);n.pathname===l.Redirect.path&&(r.writeHead(200,{"Content-Type":"text/html"}),r.end(Buffer.from((0,p.redirectSuccessHtml)(this.logoutUrl,this.systemId))),this.log.info("Got authCode"),t({authCode:n.searchParams.get("code")+"",redirect:o}),c&&clearTimeout(c),s.close())})),s.listen(),o=new l.Redirect(s.address().port);const f=this.getAuthCodeUrl({redirectUri:o.url()});null===(n=i(f))||void 0===n||n.catch((e=>this.log.error(e)))}))}))}getAccessToken(e,t){var r;return n(this,void 0,void 0,(function*(){let n,o,i=!1;if(e){this.log.info("Refresh token passed in");const t=this.getTokenRequestForRefreshToken(e);try{n=yield s.default.request(t),401===n.status||"invalid_token"===n.data.error?(i=!0,this.log.warn("Cannot use stored refresh token. Starting fresh request")):e!==n.data.refresh_token&&(this.log.info("New refresh token issued"),o=n.data.refresh_token)}catch(e){i=!0}}if(!e||i){const{authCode:e,redirect:t}=yield this.getAuthCode(),r=this.getTokenRequestForAuthCode({redirectUri:t.url(),authCode:e});n=yield s.default.request(r),this.log.info("Refresh token issued"),o=n.data.refresh_token}return o&&t&&(this.log.info("Sending notification that refresh token changed"),yield t(o)),this.log.info("Got access token successfully"),null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.access_token}))}getAccessTokenWithClientCredentials(){var e;return n(this,void 0,void 0,(function*(){const t=this.getTokenRequestForClientCredential(),r=yield s.default.request(t);return this.log.info("Got access token successfully using client credentials"),null===(e=null==r?void 0:r.data)||void 0===e?void 0:e.access_token}))}}},412:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ODataRequestError=t.isAxiosError=void 0,t.isAxiosError=function(e){return"object"==typeof e&&null!==e&&"isAxiosError"in e};class ODataRequestError extends Error{static containsError(e){return!!(null==e?void 0:e.error)}constructor(e){const t=e.error;super(`${t.message} (${t.code})`),this.name=this.constructor.name}}t.ODataRequestError=ODataRequestError},52800:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ODataService=t.ODataVersion=void 0;const o=r(94486);function i(){const e=this.data?JSON.parse(this.data):{};return e.d?e.d.results?e.d.results:e.d:e["@odata.context"]&&e.value?e.value:e}!function(e){e.v2="2",e.v4="4"}(t.ODataVersion||(t.ODataVersion={}));class ODataService extends o.Axios{document(){return n(this,void 0,void 0,(function*(){if(!this.doc){const e=(yield this.get("/")).odata();e.EntitySets?this.doc=e:this.doc={EntitySets:e.map((e=>e.name))}}return this.doc}))}metadata(){return n(this,void 0,void 0,(function*(){if(!this.metadataDoc){const e=yield this.get("/$metadata",{headers:{Accept:"application/xml"}});this.metadataDoc=e.data}return this.metadataDoc}))}get(e,t={}){const r=Object.create(null,{get:{get:()=>super.get}});var o,s,a,c,l;return n(this,void 0,void 0,(function*(){void 0!==(null===(o=t.params)||void 0===o?void 0:o.$format)||(null===(s=t.headers)||void 0===s?void 0:s.Accept)||(t.params=null!==(a=t.params)&&void 0!==a?a:{},t.params.$format="json",t.headers=null!==(c=t.headers)&&void 0!==c?c:{},t.headers.Accept="application/json");const n=yield r.get.call(this,e,t);return n.data&&"json"===(null===(l=t.params)||void 0===l?void 0:l.$format)&&(n.odata=i.bind(n)),n}))}}t.ODataService=ODataService},8982:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceProvider=void 0;const n=r(94486),o=r(10030),i=r(52800),s=r(73433);class ServiceProvider extends n.Axios{constructor(){super(...arguments),this.log=new o.ToolsLogger,this.cookies=new s.Cookies,this.services={}}service(e){return this.services[e]||(this.services[e]=this.createService(e,i.ODataService)),this.services[e]}generateServiceConfig(e){var t,r;const n=Object.assign({},this.defaults);return Object.assign(Object.assign({},n),{baseURL:this.defaults.baseURL+e,headers:null!==(r=null===(t=this.defaults.headers)||void 0===t?void 0:t.common)&&void 0!==r?r:{}})}createService(e,t){const r=new t(Object.assign(Object.assign({},this.generateServiceConfig(e)),{publicUrl:this.publicUrl}));return r.log=this.log,r.interceptors=this.interceptors,r}get publicUrl(){return this.defaults.baseURL}}t.ServiceProvider=ServiceProvider},59920:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createServiceForUrl=t.createForDestination=t.createForAbapOnCloud=t.AbapCloudEnvironment=t.createForAbap=t.create=void 0;const s=i(r(28869)),a=r(1851),c=r(95687),l=r(73433),u=r(8982),d=r(15297),p=r(73837);function f(e,t){var r,n;const o=(0,s.default)(t);o.httpsAgent=new c.Agent({rejectUnauthorized:!o.ignoreCertErrors}),delete o.ignoreCertErrors,o.withCredentials=(null==o?void 0:o.auth)&&Object.keys(o.auth).length>0,o.validateStatus=e=>e<400;const i=new e(o);return i.defaults.headers=null!==(r=i.defaults.headers)&&void 0!==r?r:{common:{},delete:{},put:{},get:{},post:{},head:{},patch:{}},(0,l.attachConnectionHandler)(i),(null===(n=o.auth)||void 0===n?void 0:n.password)&&(0,l.attachBasicAuthInterceptor)(i),t.cookies&&t.cookies.split(";").forEach((e=>{i.cookies.addCookie(e.trim())})),i}var h;t.create=function(e){return f(u.ServiceProvider,"string"==typeof e?{baseURL:e}:e)},t.createForAbap=function(e){return f(d.AbapServiceProvider,e)},function(e){e.Standalone="Standalone",e.EmbeddedSteampunk="EmbeddedSteampunk"}(h=t.AbapCloudEnvironment||(t.AbapCloudEnvironment={})),t.createForAbapOnCloud=function(e){let t;switch(e.environment){case h.Standalone:{const{service:r,refreshToken:n,refreshTokenChangedCb:i,cookies:s}=e,a=o(e,["service","refreshToken","refreshTokenChangedCb","cookies"]);t=f(d.AbapServiceProvider,Object.assign({baseURL:r.url,cookies:s},a)),s||(0,l.attachUaaAuthInterceptor)(t,r,n,i);break}case h.EmbeddedSteampunk:{const{url:r,cookies:n}=e,i=o(e,["url","cookies"]);t=f(d.AbapServiceProvider,Object.assign({baseURL:r},i)),n||(0,l.attachReentranceTicketAuthInterceptor)({provider:t});break}default:const r=e;throw new Error(`Unknown environment type supplied: ${(0,p.inspect)(r)}`)}return t},t.createForDestination=function(e,t,r){var i;const{cookies:s}=e,c=o(e,["cookies"]),l=Object.assign(Object.assign({},c),{baseURL:(0,a.getDestinationUrlForAppStudio)(t.Name,t.Host?new URL(t.Host).pathname:void 0),cookies:s});let p;if(l.params=null!==(i=l.params)&&void 0!==i?i:{},l.params.saml2="disabled",(0,a.isAbapSystem)(t)?(p=f(d.AbapServiceProvider,l),p.publicUrl=t.Host):p=f(u.ServiceProvider,l),r){const e=p.interceptors.request.use((t=>n(this,void 0,void 0,(function*(){const n=yield(0,a.getCredentialsForDestinationService)(r);return p.defaults.headers.common[a.BAS_DEST_INSTANCE_CRED_HEADER]=n,p.interceptors.request.eject(e),t}))))}return p},t.createServiceForUrl=function(e,t={}){const r=new URL(e);return t.baseURL=r.origin,t.params=r.searchParams,f(u.ServiceProvider,t).service(r.pathname)}},57516:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isAxiosError=void 0;const i=r(412);Object.defineProperty(t,"isAxiosError",{enumerable:!0,get:function(){return i.isAxiosError}}),o(r(52800),t),o(r(8982),t),o(r(15297),t),o(r(59920),t),o(r(73433),t)},12904:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ENV=void 0,function(e){e.PROXY_URL="HTTP_PROXY",e.H2O_URL="H2O_URL"}(t.ENV||(t.ENV={}))},47686:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.listDestinations=t.getDestinationUrlForAppStudio=t.getCredentialsForDestinationService=t.getAppStudioProxyURL=t.isAppStudio=t.BAS_DEST_INSTANCE_CRED_HEADER=void 0;const i=o(r(94486)),s=r(75836),a=r(12904);t.BAS_DEST_INSTANCE_CRED_HEADER="bas-destination-instance-cred",t.isAppStudio=function(){return!!process.env[a.ENV.H2O_URL]},t.getAppStudioProxyURL=function(){return process.env[a.ENV.PROXY_URL]},t.getCredentialsForDestinationService=function(e){var t,r;return n(this,void 0,void 0,(function*(){try{const n=yield(0,s.cfGetInstanceKeyParameters)(e);if(!n)throw new Error(`No destination instance ${e} found`);const o=n.credentials;if(!o)throw new Error(`No credentials for destination instance ${e} found`);const i=(null===(t=o.uaa)||void 0===t?void 0:t.clientid)||o.clientid,a=(null===(r=o.uaa)||void 0===r?void 0:r.clientsecret)||o.clientsecret;return Buffer.from(`${encodeURIComponent(i)}:${encodeURIComponent(a)}`).toString("base64")}catch(t){throw new Error(`An error occurred while retrieving service key for the destination instance ${e}: ${t}`)}}))},t.getDestinationUrlForAppStudio=function(e,t){const r=`https://${e}.dest`;return t&&t.length>1?new URL(t,r).toString():r},t.listDestinations=function(){return n(this,void 0,void 0,(function*(){const e={};yield i.default.get("/reload",{baseURL:process.env[a.ENV.PROXY_URL]});const t=yield i.default.get("/api/listDestinations",{baseURL:process.env[a.ENV.H2O_URL]});return(Array.isArray(t.data)?t.data:[]).forEach((t=>{t.WebIDEEnabled&&(e[t.Name]=t)})),e}))}},27297:(e,t)=>{var r,n;function o(e){var t;return Boolean((null===(t=e.WebIDEUsage)||void 0===t?void 0:t.includes(r.ODATA_GENERIC))&&!e.WebIDEUsage.includes(r.ODATA_ABAP))}Object.defineProperty(t,"__esModule",{value:!0}),t.isFullUrlDestination=t.isPartialUrlDestination=t.isGenericODataDestination=t.isAbapEnvironmentOnBtp=t.isAbapSystem=t.WebIDEAdditionalData=t.WebIDEUsage=void 0,function(e){e.ODATA_GENERIC="odata_gen",e.ODATA_ABAP="odata_abap",e.DEV_ABAP="dev_abap",e.ABAP_CLOUD="abap_cloud"}(r=t.WebIDEUsage||(t.WebIDEUsage={})),function(e){e.FULL_URL="full_url",e.API_MGMT="api_mgmt"}(n=t.WebIDEAdditionalData||(t.WebIDEAdditionalData={})),t.isAbapSystem=function(e){var t,r;return Boolean((null===(t=e.WebIDEUsage)||void 0===t?void 0:t.includes("abap"))||e["sap-client"]||"abap"===(null===(r=e["sap-platform"])||void 0===r?void 0:r.toLocaleLowerCase()))},t.isAbapEnvironmentOnBtp=function(e){var t,n;return Boolean((null===(t=e.WebIDEUsage)||void 0===t?void 0:t.includes(r.ABAP_CLOUD))||"abap"===(null===(n=e["sap-platform"])||void 0===n?void 0:n.toLocaleLowerCase()))},t.isGenericODataDestination=o,t.isPartialUrlDestination=function(e){var t;return Boolean(!(null===(t=e.WebIDEAdditionalData)||void 0===t?void 0:t.includes(n.FULL_URL))&&o(e))},t.isFullUrlDestination=function(e){var t;return Boolean((null===(t=e.WebIDEAdditionalData)||void 0===t?void 0:t.includes(n.FULL_URL))&&o(e))}},1851:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(47686),t),o(r(27297),t),o(r(59618),t)},59618:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},77068:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ENV=void 0,function(e){e.PROXY_URL="HTTP_PROXY",e.H2O_URL="H2O_URL"}(t.ENV||(t.ENV={}))},14205:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.listDestinations=t.getDestinationUrlForAppStudio=t.getCredentialsForDestinationService=t.getAppStudioProxyURL=t.isAppStudio=t.BAS_DEST_INSTANCE_CRED_HEADER=void 0;const i=o(r(94486)),s=r(75836),a=r(77068);t.BAS_DEST_INSTANCE_CRED_HEADER="bas-destination-instance-cred",t.isAppStudio=function(){return!!process.env[a.ENV.H2O_URL]},t.getAppStudioProxyURL=function(){return process.env[a.ENV.PROXY_URL]},t.getCredentialsForDestinationService=function(e){var t,r;return n(this,void 0,void 0,(function*(){try{const n=yield s.cfGetInstanceKeyParameters(e);if(!n)throw new Error(`No destination instance ${e} found`);const o=n.credentials;if(!o)throw new Error(`No credentials for destination instance ${e} found`);const i=(null===(t=o.uaa)||void 0===t?void 0:t.clientid)||o.clientid,a=(null===(r=o.uaa)||void 0===r?void 0:r.clientsecret)||o.clientsecret;return Buffer.from(`${encodeURIComponent(i)}:${encodeURIComponent(a)}`).toString("base64")}catch(t){throw new Error(`An error occurred while retrieving service key for the destination instance ${e}: ${t}`)}}))},t.getDestinationUrlForAppStudio=function(e,t){const r=`https://${e}.dest`;return t&&t.length>1?new URL(t,r).toString():r},t.listDestinations=function(){return n(this,void 0,void 0,(function*(){const e={};yield i.default.get("/reload",{baseURL:process.env[a.ENV.PROXY_URL]});const t=yield i.default.get("/api/listDestinations",{baseURL:process.env[a.ENV.H2O_URL]});return(Array.isArray(t.data)?t.data:[]).forEach((t=>{t.WebIDEEnabled&&(e[t.Name]=t)})),e}))}},92086:(e,t)=>{var r,n;function o(e){var t;return Boolean((null===(t=e.WebIDEUsage)||void 0===t?void 0:t.includes(r.ODATA_GENERIC))&&!e.WebIDEUsage.includes(r.ODATA_ABAP))}Object.defineProperty(t,"__esModule",{value:!0}),t.isFullUrlDestination=t.isPartialUrlDestination=t.isGenericODataDestination=t.isAbapEnvironmentOnBtp=t.isAbapSystem=t.WebIDEAdditionalData=t.WebIDEUsage=void 0,function(e){e.ODATA_GENERIC="odata_gen",e.ODATA_ABAP="odata_abap",e.DEV_ABAP="dev_abap",e.ABAP_CLOUD="abap_cloud"}(r=t.WebIDEUsage||(t.WebIDEUsage={})),function(e){e.FULL_URL="full_url",e.API_MGMT="api_mgmt"}(n=t.WebIDEAdditionalData||(t.WebIDEAdditionalData={})),t.isAbapSystem=function(e){var t,r;return Boolean((null===(t=e.WebIDEUsage)||void 0===t?void 0:t.includes("abap"))||e["sap-client"]||"abap"===(null===(r=e["sap-platform"])||void 0===r?void 0:r.toLocaleLowerCase()))},t.isAbapEnvironmentOnBtp=function(e){var t,n;return Boolean((null===(t=e.WebIDEUsage)||void 0===t?void 0:t.includes(r.ABAP_CLOUD))||"abap"===(null===(n=e["sap-platform"])||void 0===n?void 0:n.toLocaleLowerCase()))},t.isGenericODataDestination=o,t.isPartialUrlDestination=function(e){var t;return Boolean(!(null===(t=e.WebIDEAdditionalData)||void 0===t?void 0:t.includes(n.FULL_URL))&&o(e))},t.isFullUrlDestination=function(e){var t;return Boolean((null===(t=e.WebIDEAdditionalData)||void 0===t?void 0:t.includes(n.FULL_URL))&&o(e))}},2579:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(14205),t),o(r(92086),t),o(r(41583),t)},41583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},10030:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ToolsLogger=void 0,o(r(85621),t),o(r(8881),t);var i=r(846);Object.defineProperty(t,"ToolsLogger",{enumerable:!0,get:function(){return i.WinstonLogger}})},8881:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(24213),t)},24213:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayTransport=t.VSCodeTransport=t.StringArrayTransport=t.FileTransport=t.NullTransport=t.UI5ToolingTransport=t.ConsoleTransport=void 0;const o=n(r(2584)),i=r(85621);class ConsoleTransport extends i.Transport{constructor(e={}){return super(),ConsoleTransport.singletonInstance||(ConsoleTransport.singletonInstance=this,this.options=this.copy(e)),ConsoleTransport.singletonInstance}}t.ConsoleTransport=ConsoleTransport;class UI5ToolingTransport extends i.Transport{constructor(e){super();const t=UI5ToolingTransport.instances.get(e.moduleName);return t||(this.options=this.copy(e),UI5ToolingTransport.instances.set(e.moduleName,this),this)}}t.UI5ToolingTransport=UI5ToolingTransport,UI5ToolingTransport.instances=new Map;class NullTransport extends i.Transport{constructor(){return super(),NullTransport.singletonInstance||(NullTransport.singletonInstance=this),NullTransport.singletonInstance}}t.NullTransport=NullTransport;class FileTransport extends i.Transport{constructor(e){super(),this.options=this.copy(e)}}t.FileTransport=FileTransport;class StringArrayTransport extends i.Transport{}t.StringArrayTransport=StringArrayTransport;class VSCodeTransport extends i.Transport{constructor(e){super();const t=VSCodeTransport.instances.get(e.channelName);return t||(this.options=this.copy(e),VSCodeTransport.instances.set(e.channelName,this),this)}}t.VSCodeTransport=VSCodeTransport,VSCodeTransport.instances=new Map;class ArrayTransport extends o.default{constructor(e){super({level:"number"==typeof(null==e?void 0:e.logLevel)?i.LogLevel[e.logLevel].toLowerCase():"debug"}),this.copy=i.Transport.prototype.copy,this.logs=(null==e?void 0:e.logs)||[]}log(e,t){this.logs.push(e),t()}}t.ArrayTransport=ArrayTransport},85621:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=t.LogLevel=void 0;const o=n(r(28869));!function(e){e[e.Error=0]="Error",e[e.Warn=1]="Warn",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Debug=4]="Debug",e[e.Silly=5]="Silly"}(t.LogLevel||(t.LogLevel={}));t.Transport=class Transport{copy(e){return Object.freeze((0,o.default)(e))}}},75146:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.toWinstonTransport=t.toWinstonLogLevel=void 0;const c=r(85621),l=i(r(14503)),u=r(8881),d=r(53949),p=r(9753),f=r(73837),h=a(r(1810));function v(e){return void 0===e?void 0:c.LogLevel[e].toLowerCase()}t.toWinstonLogLevel=v;const g=e=>{const{logLevel:t}=e,r=s(e,["logLevel"]);return Object.assign({},r,{level:v(t)})},y={info:"green",warn:"yellow",error:"red",verbose:"blue",silly:"magenta",debug:"cyan"},m=()=>process.stdout.isTTY,b=e=>{try{return e?h.default.keyword(e):void 0}catch(e){return}},S=l.format.combine(l.format.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),l.format.printf((e=>{var{timestamp:t,level:r,message:n,label:o,labelColor:i}=e,a=s(e,["timestamp","level","message","label","labelColor"]);const c="string"==typeof n?n:(0,f.inspect)(n),l=(e=>{const t=e.padEnd(7);if(m()){const r=b(y[e]);if(r)return r(t)}return t})(r);return`${t} ${l} ${((e,t)=>{let r=null!=e?e:"";if(m()&&e&&"string"==typeof t){const n=b(t);n&&(r=n(e))}return r})(o,i)}: ${c} ${Object.keys(a).length?(0,f.inspect)(a):""}`})));t.toWinstonTransport=function(e){if(e instanceof u.NullTransport)return new d.NullTransport;if(e instanceof u.ConsoleTransport)return new l.default.transports.Console(Object.assign(Object.assign({},g(e.options)),{format:S}));if(e instanceof u.FileTransport)return new l.default.transports.File(g(e.options));if(e instanceof u.VSCodeTransport)return new p.VSCodeTransport(g(e.options));if(e instanceof u.UI5ToolingTransport)return new l.default.transports.Console(Object.assign(Object.assign({},g(e.options)),{format:(t=e.options.moduleName,l.format.combine(l.format.colorize(),l.format.label({label:t}),l.format.printf((({level:e,message:t,label:r})=>{let n="string"==typeof t?t:(0,f.inspect)(t);return n=n.split(/\r?\n/).join(`\n${e} ${h.default.magenta(r)} `),`${e} ${h.default.magenta(r)} ${n}`}))))}));if(e instanceof u.ArrayTransport)return e;throw new Error("Unrecognized transport type");var t}},846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinstonLogger=void 0;var n=r(75900);Object.defineProperty(t,"WinstonLogger",{enumerable:!0,get:function(){return n.WinstonLogger}})},75900:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WinstonLogger=void 0;const s=r(8881),a=r(85621),c=i(r(14503)),l=r(75146),u=r(82290),d=r(73837),p={transports:[new s.ConsoleTransport]};class BaseWinstonLogger{initialize({logger:e,transportMap:t,metadataOverride:r,winstonLevel:n,logPrefix:o}){this._logger=e,this.transportMap=t,this.winstonLevel=n,this.logPrefix=o,this.metadataOverride=r}info(e){this.log({level:a.LogLevel.Info,message:e})}warn(e){this.log({level:a.LogLevel.Warn,message:e})}error(e){this.log({level:a.LogLevel.Error,message:e})}debug(e){this.log({level:a.LogLevel.Debug,message:e})}log(e){var t;if(this.transportMap.size)if("string"==typeof e)this.winstonLog({level:this.winstonLevel,message:e,metadata:this.metadataOverride});else{const r=null!==(t=(0,l.toWinstonLogLevel)(e.level))&&void 0!==t?t:this._logger.level;this.winstonLog({level:r,message:e.message,metadata:this.metadataOverride})}}winstonLog({level:e,message:t,metadata:r}){const n="string"==typeof t?t:(0,d.inspect)(t);this._logger.log(e,n,r)}addToMap(e,t){const r=(0,l.toWinstonTransport)(t);if(!e.has(t))return e.set(t,r),r}add(e){const t=this.addToMap(this.transportMap,e);return t&&this._logger.add(t),this}remove(e){const t=this.transportMap.get(e);if(t)return this._logger.remove(t),this.transportMap.delete(e),this;throw new Error("Cannot remove non-existent transport")}transports(){return Array.from(this.transportMap.keys())}child({logPrefix:e}){const t=`${this.logPrefix}.${e}`,r={label:t,labelColor:(0,u.nextColor)()},n=this._logger.child(r),o=new BaseWinstonLogger;return o.initialize({logger:n,transportMap:this.transportMap,winstonLevel:this.winstonLevel,logPrefix:t,metadataOverride:r}),o}}t.WinstonLogger=class WinstonLogger extends BaseWinstonLogger{constructor({logLevel:e=a.LogLevel.Info,transports:t=[],logPrefix:r="main"}=p){super();const n=new Map;t.forEach((e=>this.addToMap(n,e)));const o=(0,l.toWinstonLogLevel)(e),i=c.default.createLogger({level:o,transports:Array.from(n.values()),format:c.format.combine(c.format.timestamp(),c.format.json()),defaultMeta:{label:r,labelColor:(0,u.nextColor)()}}),s=null!=o?o:i.level;this.initialize({logger:i,transportMap:n,winstonLevel:s,logPrefix:r})}}},53949:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NullTransport=void 0;const o=n(r(2584));class NullTransport extends o.default{log(e,t){t()}}t.NullTransport=NullTransport},82290:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.nextColor=void 0;const r=function*(){const e=["magenta","cyan","blue","yellow","green","red"];let t=0;for(;;)t===e.length&&(t=0),yield e[t++]}();t.nextColor=()=>r.next().value},9753:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeTransport=void 0;const o=n(r(2584));class VSCodeTransport extends o.default{constructor(e){super(e),this.channel=r(66828).window.createOutputChannel(e.channelName)}log(e,t){setImmediate((()=>{this.channel.appendLine(`${e.timestamp} [${e.level.toUpperCase()}] - ${e.message}`)})),t()}}t.VSCodeTransport=VSCodeTransport},1584:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ToolsLogger=void 0,o(r(69920),t),o(r(12790),t);var i=r(39466);Object.defineProperty(t,"ToolsLogger",{enumerable:!0,get:function(){return i.WinstonLogger}})},12790:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(60762),t)},60762:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayTransport=t.VSCodeTransport=t.StringArrayTransport=t.FileTransport=t.NullTransport=t.UI5ToolingTransport=t.ConsoleTransport=void 0;const o=n(r(2584)),i=r(69920);class ConsoleTransport extends i.Transport{constructor(e={}){return super(),ConsoleTransport.singletonInstance||(ConsoleTransport.singletonInstance=this,this.options=this.copy(e)),ConsoleTransport.singletonInstance}}t.ConsoleTransport=ConsoleTransport;class UI5ToolingTransport extends i.Transport{constructor(e){super();const t=UI5ToolingTransport.instances.get(e.moduleName);return t||(this.options=this.copy(e),UI5ToolingTransport.instances.set(e.moduleName,this),this)}}t.UI5ToolingTransport=UI5ToolingTransport,UI5ToolingTransport.instances=new Map;class NullTransport extends i.Transport{constructor(){return super(),NullTransport.singletonInstance||(NullTransport.singletonInstance=this),NullTransport.singletonInstance}}t.NullTransport=NullTransport;class FileTransport extends i.Transport{constructor(e){super(),this.options=this.copy(e)}}t.FileTransport=FileTransport;class StringArrayTransport extends i.Transport{}t.StringArrayTransport=StringArrayTransport;class VSCodeTransport extends i.Transport{constructor(e){super();const t=VSCodeTransport.instances.get(e.channelName);return t||(this.options=this.copy(e),VSCodeTransport.instances.set(e.channelName,this),this)}}t.VSCodeTransport=VSCodeTransport,VSCodeTransport.instances=new Map;class ArrayTransport extends o.default{constructor(e){super({level:"number"==typeof(null==e?void 0:e.logLevel)?i.LogLevel[e.logLevel].toLowerCase():"debug"}),this.copy=i.Transport.prototype.copy,this.logs=(null==e?void 0:e.logs)||[]}log(e,t){this.logs.push(e),t()}}t.ArrayTransport=ArrayTransport},69920:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=t.LogLevel=void 0;const o=n(r(28869));!function(e){e[e.Error=0]="Error",e[e.Warn=1]="Warn",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Debug=4]="Debug",e[e.Silly=5]="Silly"}(t.LogLevel||(t.LogLevel={}));t.Transport=class Transport{copy(e){return Object.freeze(o.default(e))}}},98329:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.toWinstonTransport=t.toWinstonLogLevel=void 0;const c=r(69920),l=i(r(14503)),u=r(12790),d=r(7228),p=r(45217),f=r(73837),h=a(r(12806));function v(e){return void 0===e?void 0:c.LogLevel[e].toLowerCase()}t.toWinstonLogLevel=v;const g=e=>{const{logLevel:t}=e,r=s(e,["logLevel"]);return Object.assign({},r,{level:v(t)})},y={info:"green",warn:"yellow",error:"red",verbose:"blue",silly:"magenta",debug:"cyan"},m=()=>process.stdout.isTTY,b=e=>{try{return e?h.default.keyword(e):void 0}catch(e){return}},S=l.format.combine(l.format.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),l.format.printf((e=>{var{timestamp:t,level:r,message:n,label:o,labelColor:i}=e,a=s(e,["timestamp","level","message","label","labelColor"]);const c="string"==typeof n?n:f.inspect(n),l=(e=>{const t=e.padEnd(7);if(m()){const r=b(y[e]);if(r)return r(t)}return t})(r);return`${t} ${l} ${((e,t)=>{let r=null!=e?e:"";if(m()&&e&&"string"==typeof t){const n=b(t);n&&(r=n(e))}return r})(o,i)}: ${c} ${Object.keys(a).length?f.inspect(a):""}`})));t.toWinstonTransport=function(e){if(e instanceof u.NullTransport)return new d.NullTransport;if(e instanceof u.ConsoleTransport)return new l.default.transports.Console(Object.assign(Object.assign({},g(e.options)),{format:S}));if(e instanceof u.FileTransport)return new l.default.transports.File(g(e.options));if(e instanceof u.VSCodeTransport)return new p.VSCodeTransport(g(e.options));if(e instanceof u.UI5ToolingTransport)return new l.default.transports.Console(Object.assign(Object.assign({},g(e.options)),{format:(t=e.options.moduleName,l.format.combine(l.format.colorize(),l.format.label({label:t}),l.format.printf((({level:e,message:t,label:r})=>{let n="string"==typeof t?t:f.inspect(t);return n=n.split(/\r?\n/).join(`\n${e} ${h.default.magenta(r)} `),`${e} ${h.default.magenta(r)} ${n}`}))))}));if(e instanceof u.ArrayTransport)return e;throw new Error("Unrecognized transport type");var t}},39466:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinstonLogger=void 0;var n=r(86062);Object.defineProperty(t,"WinstonLogger",{enumerable:!0,get:function(){return n.WinstonLogger}})},86062:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WinstonLogger=void 0;const s=r(12790),a=r(69920),c=i(r(14503)),l=r(98329),u=r(47919),d=r(73837),p={transports:[new s.ConsoleTransport]};class BaseWinstonLogger{initialize({logger:e,transportMap:t,metadataOverride:r,winstonLevel:n,logPrefix:o}){this._logger=e,this.transportMap=t,this.winstonLevel=n,this.logPrefix=o,this.metadataOverride=r}info(e){this.log({level:a.LogLevel.Info,message:e})}warn(e){this.log({level:a.LogLevel.Warn,message:e})}error(e){this.log({level:a.LogLevel.Error,message:e})}debug(e){this.log({level:a.LogLevel.Debug,message:e})}log(e){var t;if(this.transportMap.size)if("string"==typeof e)this.winstonLog({level:this.winstonLevel,message:e,metadata:this.metadataOverride});else{const r=null!==(t=l.toWinstonLogLevel(e.level))&&void 0!==t?t:this._logger.level;this.winstonLog({level:r,message:e.message,metadata:this.metadataOverride})}}winstonLog({level:e,message:t,metadata:r}){const n="string"==typeof t?t:d.inspect(t);this._logger.log(e,n,r)}addToMap(e,t){const r=l.toWinstonTransport(t);if(!e.has(t))return e.set(t,r),r}add(e){const t=this.addToMap(this.transportMap,e);return t&&this._logger.add(t),this}remove(e){const t=this.transportMap.get(e);if(t)return this._logger.remove(t),this.transportMap.delete(e),this;throw new Error("Cannot remove non-existent transport")}transports(){return Array.from(this.transportMap.keys())}child({logPrefix:e}){const t=`${this.logPrefix}.${e}`,r={label:t,labelColor:u.nextColor()},n=this._logger.child(r),o=new BaseWinstonLogger;return o.initialize({logger:n,transportMap:this.transportMap,winstonLevel:this.winstonLevel,logPrefix:t,metadataOverride:r}),o}}t.WinstonLogger=class WinstonLogger extends BaseWinstonLogger{constructor({logLevel:e=a.LogLevel.Info,transports:t=[],logPrefix:r="main"}=p){super();const n=new Map;t.forEach((e=>this.addToMap(n,e)));const o=l.toWinstonLogLevel(e),i=c.default.createLogger({level:o,transports:Array.from(n.values()),format:c.format.combine(c.format.timestamp(),c.format.json()),defaultMeta:{label:r,labelColor:u.nextColor()}}),s=null!=o?o:i.level;this.initialize({logger:i,transportMap:n,winstonLevel:s,logPrefix:r})}}},7228:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NullTransport=void 0;const o=n(r(2584));class NullTransport extends o.default{log(e,t){t()}}t.NullTransport=NullTransport},47919:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.nextColor=void 0;const r=function*(){const e=["magenta","cyan","blue","yellow","green","red"];let t=0;for(;;)t===e.length&&(t=0),yield e[t++]}();t.nextColor=()=>r.next().value},45217:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeTransport=void 0;const o=n(r(2584));class VSCodeTransport extends o.default{constructor(e){super(e),this.channel=r(66828).window.createOutputChannel(e.channelName)}log(e,t){setImmediate((()=>{this.channel.appendLine(`${e.timestamp} [${e.level.toUpperCase()}] - ${e.message}`)})),t()}}t.VSCodeTransport=VSCodeTransport},10236:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Entity=void 0,function(e){e.BackendSystem="system",e.TelemetrySetting="telemetrySetting"}(t.Entity||(t.Entity={}))},46477:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getFilesystemStore=t.getFilesystemWatcherFor=t.basedir=void 0;const c=a(r(71017)),l=i(r(57147)),u=r(4528),d=r(97520),p=a(r(22037));t.basedir=({baseDirectory:e}={})=>e?c.default.isAbsolute(e)?e:c.default.join(p.default.homedir(),e):d.getFioriToolsDirectory();class FilesystemStore{constructor(e,r={}){this.logger=e,this.storeDirectory=t.basedir(r)}read({entityName:e,id:t}){return s(this,void 0,void 0,(function*(){const r=f(e);if(!r)return this.logger.debug("read: Entity Type is falsy - "+e),Promise.resolve(void 0);const{entities:n,error:o}=this._readAll(r);if(o){if("ENOENT"===o.code)return Promise.resolve(void 0);throw o}if(n)return Promise.resolve(n[t]);this.logger.debug(`read: After parsing, entities is falsy. Entity: ${r}, parsed value: ${n}`)}))}getAll({entityName:e}){return s(this,void 0,void 0,(function*(){const t=f(e);if(!t)return this.logger.debug("read: Entity Type is falsy - "+e),Promise.resolve([]);const{entities:r,error:n}=this._readAll(t);if(n){if("ENOENT"===n.code)return Promise.resolve([]);throw n}return r?Promise.resolve(Object.values(r)):(this.logger.debug(`read: After parsing, entities is falsy. Entity: ${t}, parsed value: ${r}`),Promise.resolve([]))}))}readAll({entityName:e}){return s(this,void 0,void 0,(function*(){const t=f(e);if(!t)return this.logger.debug("read: Entity Type is falsy - "+e),Promise.resolve({});const{entities:r,error:n}=this._readAll(t);if(n){if("ENOENT"===n.code)return Promise.resolve({});throw n}return r?Promise.resolve(r):(this.logger.debug(`read: After parsing, entities is falsy. Entity: ${t}, parsed value: ${r}`),Promise.resolve({}))}))}write({entityName:e,id:t,entity:r}){return s(this,void 0,void 0,(function*(){const n=f(e);if(!n)return this.logger.debug("write: Entity is falsy - "+n),Promise.resolve(void 0);const{entities:o={},error:i}=this._readAll(n);if(i&&"ENOENT"!==i.code)throw i;return o[t]=r,this.writeToFile(n,o),Promise.resolve(r)}))}del({entityName:e,id:t}){return s(this,void 0,void 0,(function*(){const r=f(e);if(!r)return this.logger.debug("delete: Entity is falsy - "+r),Promise.resolve(!1);const{entities:n={},error:o}=this._readAll(r);if(o&&"ENOENT"!==o.code)throw o;return!!n[t]?(this.logger.debug(`delete: entity found  for id - ${t}. Deleting`),delete n[t],this.writeToFile(r,n),Promise.resolve(!0)):(this.logger.debug("delete: entity not found"),Promise.resolve(!1))}))}_readAll(e){var t;let r,n;try{const t=c.default.join(this.storeDirectory,`${e}.json`);r=l.existsSync(t)?l.readFileSync(t).toString().trim():""}catch(e){const t=d.errorInstance(e);return this.logger.debug(t.message),{error:t}}if(!r)return{entities:void 0};try{n=null===(t=JSON.parse(r))||void 0===t?void 0:t[e]}catch(e){return{error:d.errorInstance(e)}}return{entities:n}}writeToFile(e,t){const r=JSON.stringify({[e]:t},null,2),n=h(e);try{l.writeFileSync(c.default.join(this.storeDirectory,n),r)}catch(e){const t=d.errorInstance(e);if("ENOENT"!==(null==t?void 0:t.code))throw e;this.logger.debug(`Base directory [${this.storeDirectory}] does not exist, trying to create it`),l.mkdirSync(this.storeDirectory,{recursive:!0}),l.writeFileSync(c.default.join(this.storeDirectory,n),r)}}}function f(e){const t=null==e?void 0:e.trim().toLowerCase();return t&&u.plural(t)}function h(e){return f(e)+".json"}t.getFilesystemWatcherFor=function(e,r,n={}){const o=c.default.join(t.basedir(n),h(e));return l.existsSync(o)?l.default.watch(o,void 0,(()=>{r(e)})):void console.warn(`File Not Found: ${o}`)},t.getFilesystemStore=function(e,t){return new FilesystemStore(e,t)}},75111:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getHybridStore=void 0;const o=r(46477),i=r(97520),s=r(2844),a=r(38744),c=r(73837);function l(e){return"fiori/v2/"+e}class HybridStore{constructor(e,t={}){this.logger=e,this.filesystem=o.getFilesystemStore(this.logger,t),this.secureStore=s.getSecureStore(this.logger)}read({entityName:e,id:t}){return n(this,void 0,void 0,(function*(){const r=yield this.filesystem.read({entityName:e,id:t});r?this.logger.debug(`hybrid/read - id: [${t}], filesystem: ${c.inspect(r)}`):this.logger.debug(`hybrid/read - id: [${t}], nothing on the filesystem`);const n=yield this.secureStore.retrieve(l(e),t);return n?this.logger.debug(`hybrid/read - id: [${t}]. Found sensitive data in secure store`):this.logger.debug(`hybrid/read - id: [${t}], nothing in the secure store`),r||n?Object.assign(Object.assign({},r),n):void 0}))}getAll({entityName:e}){return n(this,void 0,void 0,(function*(){return Object.values(yield this.readAll({entityName:e}))}))}readAll({entityName:e}){return n(this,void 0,void 0,(function*(){const t={},r=(yield this.filesystem.readAll({entityName:e}))||{},n=(yield this.secureStore.getAll(l(e)))||{};for(const e of new Set([...Object.keys(r),...Object.keys(n)])){const o=Object.assign(Object.assign({},r[e]),n[e]);t[e]=o}return t}))}write({entityName:e,id:t,entity:r}){return n(this,void 0,void 0,(function*(){const n=a.getSerializableProperties(r),o=a.getSensitiveDataProperties(r);if(n.length>0&&o.length>0)for(let e=0;e<n.length;e+=1)-1!==o.indexOf(n[e])&&(this.logger.debug(`hybrid/write - [${n[e]}] is also marked as sensitive. Not writing to filesystem`),n.splice(e,1));const s=i.pick(r,...n);s?(this.logger.debug(`hybrid/write - writing serializable properties: ${c.inspect(s)}`),yield this.filesystem.write({entityName:e,id:t,entity:s})):this.logger.debug(`hybrid/write - no serializable properties found in ${c.inspect(s)}`);const u=i.pick(r,...o);return u?(this.logger.debug(`hybrid/write - writing sensitive properties to secure store. ID: [${t}]`),yield this.secureStore.save(l(e),t,u)):this.logger.debug(`hybrid/write - no sensitive properties found in ${c.inspect(r)}`),r}))}del({entityName:e,id:t}){return n(this,void 0,void 0,(function*(){const r=yield this.filesystem.del({entityName:e,id:t});this.logger.debug(`hybrid/del - delete result for id [${t}] on the filesystem: ${r}`);const n=yield this.secureStore.delete(l(e),t);return this.logger.debug(`hybrid/del - delete result for id [${t}] in the secure store: ${n}`),r||n}))}}t.getHybridStore=function(e,t){return new HybridStore(e,t)}},58606:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilesystemWatcherFor=void 0;var n=r(46477);Object.defineProperty(t,"getFilesystemWatcherFor",{enumerable:!0,get:function(){return n.getFilesystemWatcherFor}})},94136:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApiHubSettingsProvider=void 0;const n=r(75111),o=r(56774),i=r(9391);t.ApiHubSettingsProvider=class{constructor(e,t={}){this.entityName=o.Entities.ApiHub,this.logger=e,this.dataAccessor=n.getHybridStore(this.logger,t)}read(e){return this.dataAccessor.read({entityName:this.entityName,id:e.getId()})}write(e){return this.dataAccessor.write({entityName:this.entityName,id:i.ApiHubSettingsKey.SINGLETON,entity:e})}delete(e){return this.dataAccessor.del({entityName:this.entityName,id:i.ApiHubSettingsKey.SINGLETON})}getAll(){return this.dataAccessor.getAll({entityName:this.entityName})}}},15914:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SystemDataProvider=void 0;const o=r(75111),i=r(75019),s=r(56774);t.SystemDataProvider=class{constructor(e,t={}){this.entityName=s.Entities.BackendSystem,this.logger=e,this.dataAccessor=o.getHybridStore(this.logger,t)}read(e){return n(this,void 0,void 0,(function*(){return this.dataAccessor.read({entityName:this.entityName,id:e.getId()})}))}write(e){return n(this,void 0,void 0,(function*(){let t;return t=e instanceof i.BackendSystem?e:new i.BackendSystem(Object.assign({},e)),this.dataAccessor.write({entityName:this.entityName,id:i.BackendSystemKey.from(e).getId(),entity:t})}))}delete(e){return n(this,void 0,void 0,(function*(){return this.dataAccessor.del({entityName:this.entityName,id:i.BackendSystemKey.from(e).getId()})}))}getAll(){var e;return n(this,void 0,void 0,(function*(){const t=yield this.dataAccessor.readAll({entityName:this.entityName});for(const r of Object.keys(t)){const n=t[r];(null===(e=null==n?void 0:n.url)||void 0===e?void 0:e.trim())||(this.logger.warn(`Filtering system with ID [${r}] as it seems corrupt. Run repair`),delete t[r])}return Object.values(t)}))}}},56774:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Entities=void 0,function(e){e.BackendSystem="system",e.SystemMigrationStatus="systemMigrationStatus",e.TelemetrySetting="telemetrySetting",e.ApiHub="apiHub"}(t.Entities||(t.Entities={}))},54925:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryDataProvider=void 0;const n=r(46477),o=r(31535),i=r(56774);t.TelemetryDataProvider=class{constructor(e){this.entityName=i.Entities.TelemetrySetting,this.logger=e,this.dataAccessor=n.getFilesystemStore(this.logger)}read(e){return this.dataAccessor.read({entityName:this.entityName,id:e.getId()})}write(e){return this.dataAccessor.write({entityName:this.entityName,id:(new o.TelemetrySettingKey).getId(),entity:e})}delete(e){return this.dataAccessor.del({entityName:this.entityName,id:(new o.TelemetrySettingKey).getId()})}getAll(){return this.dataAccessor.getAll({entityName:this.entityName})}}},38744:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSensitiveDataProperties=t.sensitiveData=t.getSerializableProperties=t.serializable=void 0,r(13303);const n=Symbol("serializable");t.serializable=function(e,t){const r=Reflect.getOwnMetadata(n,e.constructor)||new Set;Reflect.defineMetadata(n,r.add(t),e.constructor)},t.getSerializableProperties=function(e){const t=Reflect.getOwnMetadata(n,e.constructor);return t&&Array.from(t.values())||[]};const o=Symbol("sensitive");t.sensitiveData=function(e,t){const r=Reflect.getOwnMetadata(o,e.constructor)||new Set;Reflect.defineMetadata(o,r.add(t),e.constructor)},t.getSensitiveDataProperties=function(e){const t=Reflect.getOwnMetadata(o,e.constructor);return t&&Array.from(t.values())||[]}},63589:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultLogger=void 0;const n=r(1584);t.getDefaultLogger=()=>new n.ToolsLogger({transports:[new n.ConsoleTransport]})},9391:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ApiHubSettingsKey=t.ApiHubSettings=void 0;const i=r(38744);class ApiHubSettings{constructor({apiKey:e}){this.apiKey=e}}n([i.sensitiveData,o("design:type",String)],ApiHubSettings.prototype,"apiKey",void 0),t.ApiHubSettings=ApiHubSettings;class ApiHubSettingsKey{getId(){return ApiHubSettingsKey.SINGLETON}}t.ApiHubSettingsKey=ApiHubSettingsKey,ApiHubSettingsKey.SINGLETON="API_HUB_API_KEY"},75019:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.BackendSystemKey=t.BackendSystem=t.AuthenticationType=void 0;const i=r(38744);!function(e){e.Basic="basic",e.ReentranceTicket="reentranceTicket",e.OAuth2RefreshToken="oauth2",e.OAuth2ClientCredential="oauth2ClientCredential"}(t.AuthenticationType||(t.AuthenticationType={}));class BackendSystem{constructor({name:e,url:t,client:r,serviceKeys:n,refreshToken:o,username:i,password:s,userDisplayName:a,authenticationType:c}){this.name=e,this.url=t,this.client=r,this.serviceKeys=n,this.refreshToken=o,this.username=i,this.password=s,this.userDisplayName=a,this.authenticationType=c}}n([i.serializable,o("design:type",String)],BackendSystem.prototype,"name",void 0),n([i.serializable,o("design:type",String)],BackendSystem.prototype,"url",void 0),n([i.serializable,o("design:type",String)],BackendSystem.prototype,"client",void 0),n([i.serializable,o("design:type",String)],BackendSystem.prototype,"userDisplayName",void 0),n([i.sensitiveData,o("design:type",Object)],BackendSystem.prototype,"serviceKeys",void 0),n([i.sensitiveData,o("design:type",String)],BackendSystem.prototype,"refreshToken",void 0),n([i.sensitiveData,o("design:type",String)],BackendSystem.prototype,"username",void 0),n([i.sensitiveData,o("design:type",String)],BackendSystem.prototype,"password",void 0),n([i.sensitiveData,o("design:type",String)],BackendSystem.prototype,"authenticationType",void 0),t.BackendSystem=BackendSystem;class BackendSystemKey{constructor({url:e,client:t}){this.url=e.trim().replace(/\/$/,""),this.client=null==t?void 0:t.trim()}static from(e){return new BackendSystemKey({url:e.url,client:e.client})}getId(){return this.url+""+(this.client?"/"+this.client:"")}}t.BackendSystemKey=BackendSystemKey},31535:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetrySettingKey=t.TelemetrySetting=void 0;const i=r(38744);class TelemetrySetting{constructor({enableTelemetry:e}){this.enableTelemetry=e}}n([i.serializable,o("design:type",Boolean)],TelemetrySetting.prototype,"enableTelemetry",void 0),t.TelemetrySetting=TelemetrySetting;t.TelemetrySettingKey=class TelemetrySettingKey{getId(){return"telemetrySetting"}}},39617:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.text=t.initI18n=void 0;const i=o(r(62169)),s=o(r(9794)),a=o(r(71017)),c=i.default.createInstance();t.initI18n=function(){return n(this,void 0,void 0,(function*(){yield c.use(s.default).init({initImmediate:!1,fallbackLng:"en",fallbackNS:"default",interpolation:{escapeValue:!1},ns:"ux-store",defaultNS:"ux-store",backend:{loadPath:a.default.join(__dirname,"./translations/{{lng}}.{{ns}}.json")}})}))},t.text=function(e,t){return c.t(e,t)}},77285:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Entity=t.getFilesystemWatcherFor=t.getService=void 0;const s=r(10236);Object.defineProperty(t,"Entity",{enumerable:!0,get:function(){return s.Entity}});const a=r(39617),c=r(24268),l=r(48174),u=r(39181),d=r(63589),p={system:c.getInstance,telemetrySetting:l.getInstance,"api-hub":u.getInstance};t.getService=function({logger:e=d.getDefaultLogger(),entityName:t,options:r={}}){return i(this,void 0,void 0,(function*(){yield a.initI18n();const n=p[t];if(n)return n(e,r);throw new Error(a.text("error.unsupportedEntity",{entityName:t}))}))},o(r(44835),t),o(r(75019),t),o(r(31535),t),o(r(9391),t);var f=r(58606);Object.defineProperty(t,"getFilesystemWatcherFor",{enumerable:!0,get:function(){return f.getFilesystemWatcherFor}})},91:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DummyStore=void 0;t.DummyStore=class DummyStore{constructor(e){this.log=e}save(e,t,n){return r(this,void 0,void 0,(function*(){return this.log.warn(`Dummy store. Trying to save for service: ${e}, key: ${t}`),Promise.resolve(!0)}))}retrieve(e,t){return r(this,void 0,void 0,(function*(){return this.log.warn(`Dummy store. Trying to retrieve for service: ${e}, key: ${t}`),Promise.resolve(void 0)}))}delete(e,t){return r(this,void 0,void 0,(function*(){return this.log.warn(`Dummy store. Trying to delete for service: ${e}, key: ${t}`),Promise.resolve(!0)}))}getAll(e){return r(this,void 0,void 0,(function*(){return this.log.warn(`Dummy store. Trying to get all values for service: [${e}]`),Promise.resolve({})}))}}},2844:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.getSecureStore=void 0;const i=r(97520),s=r(91),a=r(21288);t.getSecureStore=e=>{if(i.isAppStudio())return new s.DummyStore(e);{const t=function(e){var t,n;try{return r(74602)}catch(o){let s;e.warn(i.errorString(o)),e.warn("Could not \"require('keytar')\". Trying VSCode's copy");try{s=r(66828)}catch(t){return e.warn(i.errorString(t)),void e.warn("Could not get hold of vscode")}try{return r(72377)(`${null===(t=null==s?void 0:s.env)||void 0===t?void 0:t.appRoot}/node_modules.asar/keytar`)}catch(t){e.warn(i.errorString(t)),e.warn("Could not get keytar from vscode node_modules.asar")}try{return r(45577)(`${null===(n=null==s?void 0:s.env)||void 0===n?void 0:n.appRoot}/node_modules/keytar`)}catch(t){e.warn(i.errorString(t)),e.warn("Could not get keytar from vscode node_modules")}return}}(e);return t?new a.KeytarStore(e,t):new s.DummyStore(e)}},o(r(71030),t)},21288:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.KeytarStore=void 0;const o=r(97520);t.KeytarStore=class KeytarStore{constructor(e,t){this.log=e,this.keytar=t}save(e,t,r){return n(this,void 0,void 0,(function*(){try{const n=JSON.stringify(r);return yield this.keytar.setPassword(e,t,n),!0}catch(r){return this.log.error(`Error saving to secure store. Service: [${e}], key: [${t}]`),this.log.error(o.errorString(r)),!1}}))}retrieve(e,t){return n(this,void 0,void 0,(function*(){try{const r=yield this.keytar.getPassword(e,t);return r&&JSON.parse(r)}catch(r){return this.log.error(`Error retrieving from secure store. Service: [${e}], key: [${t}]`),void this.log.error(o.errorString(r))}}))}delete(e,t){return n(this,void 0,void 0,(function*(){try{return yield this.keytar.deletePassword(e,t)}catch(r){return this.log.error(`Error deleting from secure store. Service: [${e}], key: [${t}]`),this.log.error(o.errorString(r)),!1}}))}getAll(e){return n(this,void 0,void 0,(function*(){try{return(yield this.keytar.findCredentials(e)).reduce(((e,t)=>{try{e[String(t.account)]=JSON.parse(t.password)}catch(e){this.log.error(`Error parsing credentials for [${t.account}]`)}return e}),{})}catch(t){return this.log.error(`Error getting values for service: [${e}]`),this.log.error(o.errorString(t)),{}}}))}}},71030:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},39181:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(44003),t)},58550:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.migrateToLatestVersion=t.LEGACY_API_HUB_API_KEY=t.LEGACY_API_HUB_API_SERVICE=void 0;const o=r(39617),i=r(9391);t.LEGACY_API_HUB_API_SERVICE="fiori/system/apiHub",t.LEGACY_API_HUB_API_KEY="API_HUB_API_KEY",t.migrateToLatestVersion=function({dataProvider:e,secureStore:r,logger:s}){return n(this,void 0,void 0,(function*(){const n=yield r.retrieve(t.LEGACY_API_HUB_API_SERVICE,t.LEGACY_API_HUB_API_KEY);if(!n)return void s.debug(o.text("info.noLegacyApiHubKeyFound"));s.info(o.text("info.legacyApiHubKeyFound"));(yield e.read(new i.ApiHubSettingsKey))?s.info(o.text("info.legacyApiHubKeyNotMigrated")):(yield e.write(new i.ApiHubSettings({apiKey:n})),s.info(o.text("info.legacyApiHubKeyMigrated"))),yield r.delete(t.LEGACY_API_HUB_API_SERVICE,t.LEGACY_API_HUB_API_KEY),s.info(o.text("info.legacyApiHubKeyDeleted"))}))}},44003:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getInstance=t.ApiHubSettingsService=void 0;const o=r(2844),i=r(94136),s=r(9391),a=r(58550);class ApiHubSettingsService{constructor(e){this.migrationDone=!1,this.key=new s.ApiHubSettingsKey,this.logger=e,this.dataProvider=new i.ApiHubSettingsProvider(this.logger)}migrate(){return n(this,void 0,void 0,(function*(){this.migrationDone||(this.secureStore||(this.secureStore=o.getSecureStore(this.logger)),yield a.migrateToLatestVersion({logger:this.logger,secureStore:this.secureStore,dataProvider:this.dataProvider}),this.migrationDone=!0)}))}partialUpdate(){return n(this,void 0,void 0,(function*(){throw yield this.migrate(),new Error("NOT IMPLEMENTED")}))}read(){return n(this,void 0,void 0,(function*(){return yield this.migrate(),this.dataProvider.read(this.key)}))}write(e){return n(this,void 0,void 0,(function*(){return yield this.migrate(),this.dataProvider.write(e)}))}delete(e){return n(this,void 0,void 0,(function*(){return yield this.migrate(),this.dataProvider.delete(e)}))}getAll(){return n(this,void 0,void 0,(function*(){return yield this.migrate(),this.dataProvider.getAll()}))}}t.ApiHubSettingsService=ApiHubSettingsService,t.getInstance=function(e){return new ApiHubSettingsService(e)}},24268:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getInstance=t.SystemService=void 0;const o=r(15914),i=r(75019),s=r(39617);class SystemService{constructor(e,t={}){this.logger=e,this.dataProvider=new o.SystemDataProvider(this.logger,t)}partialUpdate(e,t){return n(this,void 0,void 0,(function*(){this.validatePartialUpdateInput(t);const r=yield this.readOrThrow(e),n=this.mergeProperties(t,r);return this.write(n)}))}mergeProperties(e,t){const r=Object.assign({},e);delete r.url,delete r.client;const n=Object.assign(Object.assign({},t),r);return new i.BackendSystem(Object.assign({},n))}readOrThrow(e){return n(this,void 0,void 0,(function*(){const t=yield this.read(e);if(!t)throw new Error(s.text("error.systemDoesNotExist",{system:e}));return t}))}validatePartialUpdateInput(e){if(!e||!Object.keys(e).length)throw new Error(s.text("error.noPropertiesSpecified"))}read(e){return n(this,void 0,void 0,(function*(){return this.dataProvider.read(e)}))}write(e){return n(this,void 0,void 0,(function*(){return this.dataProvider.write(e)}))}delete(e){return n(this,void 0,void 0,(function*(){return this.dataProvider.delete(e)}))}getAll(){return n(this,void 0,void 0,(function*(){return this.dataProvider.getAll()}))}}t.SystemService=SystemService,t.getInstance=function(e,t={}){return new SystemService(e,t)}},44835:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApiHubSettingsService=t.SystemService=void 0;var n=r(24268);Object.defineProperty(t,"SystemService",{enumerable:!0,get:function(){return n.SystemService}});var o=r(39181);Object.defineProperty(t,"ApiHubSettingsService",{enumerable:!0,get:function(){return o.ApiHubSettingsService}})},48174:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getInstance=t.TelemetrySettingService=void 0;const o=r(54925);class TelemetrySettingService{constructor(e){this.logger=e,this.dataProvider=new o.TelemetryDataProvider(this.logger)}partialUpdate(){return n(this,void 0,void 0,(function*(){throw new Error("NOT IMPLEMENTED")}))}read(e){return n(this,void 0,void 0,(function*(){return this.dataProvider.read(e)}))}write(e){return n(this,void 0,void 0,(function*(){return this.dataProvider.write(e)}))}delete(e){return n(this,void 0,void 0,(function*(){return this.dataProvider.delete(e)}))}getAll(){return n(this,void 0,void 0,(function*(){return this.dataProvider.getAll()}))}}t.TelemetrySettingService=TelemetrySettingService,t.getInstance=function(e){return new TelemetrySettingService(e)}},44683:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.isAppStudio=t.ENV=void 0,function(e){e.PROXY_URL="HTTP_PROXY",e.H2O_URL="H2O_URL"}(r=t.ENV||(t.ENV={})),t.isAppStudio=function(){return!!process.env[r.H2O_URL]}},97520:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getFioriToolsDirectory=t.FioriToolsSettings=t.errorString=t.errorInstance=t.pick=void 0;const s=r(22037),a=i(r(71017));var c;t.pick=(e,...t)=>e&&(null==t?void 0:t.length)>0&&t.reduce(((t,r)=>(t[r]=e[r],t)),{})||void 0,t.errorInstance=function(e){return e instanceof Error?e:new Error(String(e))},t.errorString=function(e){return e instanceof Error?e.message:String(e)},function(e){e.dir=".fioritools"}(c=t.FioriToolsSettings||(t.FioriToolsSettings={}));t.getFioriToolsDirectory=()=>a.default.join(s.homedir(),c.dir),o(r(44683),t)}};